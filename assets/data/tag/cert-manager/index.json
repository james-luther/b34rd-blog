{"hash":"7eea66335e3101fb2bdf96a4df7b72a3d5630259","data":{"tag":{"id":"cert-manager","title":"cert-manager","path":"/tag/cert-manager/","belongsTo":{"totalCount":2,"pageInfo":{"totalPages":1,"currentPage":1},"edges":[{"node":{"id":"3253caeed93ac74cc67dc214d2ad8c0d","title":"K3S HA Homelab on Raspberry Pi Cluster Pt3","datetime":"2021-11-05 00:00:00","path":"/k3-s-ha-homelab-on-raspberry-pi-cluster-pt3/","content":"<p>We have made it to a part 3!! Today we are going to get a bunch of things up and running on our cluster. The part we have all been waiting for! We are going to get pihole, and unifi network application on our cluster. There are multiple ways to setup all of these applications. We will use Rancher but I will also explain some commandline ways to do some of the parts too. Let's jump in!</p>\n<h3 id=\"pihole\"><a href=\"#pihole\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>PiHole</h3>\n<p>Let's begin with everyone's favorite Raspberry Pi tool, PiHole. We all know what this is and we all love it. We are going to be setting ours up with cloudfared for DOH and DOT DNS traffic also. Log into Rancher and create a new project called Networking. Well, you can name it whatever you'd like but mine is going to be networking. Then I am going to create a namespace called pihole.</p>\n<p><img class=\"g-image g-image--lazy g-image--loading\" src=\"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 2560 728' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-24506b081693fe181c23a5d03a35df62'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-24506b081693fe181c23a5d03a35df62)' width='2560' height='728' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAASCAYAAADrL9giAAAACXBIWXMAAAsTAAALEwEAmpwYAAAEtUlEQVR42tVYS28bVRj1LygktmOPPR7P0/P0%2bO1xkqZJqsYJTRDJgoakiIdBQmqRqNiwYMkCCQQSEhIbNvwFdgiJBX/scL5rT%2bK0kboj7uLomzuex73nnu9837gQx134yQDW5DHS7giOF6FWt1DXbegNBx2e6w8mRIbhaFNFxw3RND3YTsBrzZVCXbeg1ZpwvRCm1ULDcJB2hojbfbitBLYboVwx8PXvzzD77kMUrKYNy3ShGR7qmg6tUkN1Q4NG6PUmjKbHh7iMc8gD9YZ99TKBjFcNlu2r%2bcqxzQ0zDRKzXoRWLKF07x52DvvYebyDQjCZIt46gh5P0GhvK1TCCcpEvdWD7yeIqJIgTBk7iJPe4pjngrZ6yTIJOSl3CbVBVHBd5kMVV8sVODtnGL/4Ddmzn7H51a/w3/8WzWaIgnvyBbpPXiA6%2b5J4juj0OfSDGarTz6Fnx4ijNobjLSX9wXAT4%2bw%2bev0M2eQ%2b02OoXlbVDGxUdIVKtXF38ifyuVRLG0RFkVAtleG/M8PDn/7Bo%2b//xPTHv5B98we8qItCnfkScierlTrefquItbUyimsbKBV5M3/z%2bdtgsIluL0OLakjaA/T7E3S7Y5KyqcgQVYyzHYW0M1K7kKfI/7Xw/Dhhrg9G20iOZwiPPoa%2bSNs601mlN9cp0AiXflewaBRh2EaDTK2vV1AqaVeokMnd3SmePv0M5%2bcfYX//EGdnH%2bDy8lNcXHyizp%2benmNv71CNLy9nODp6786kXyMOpyd4cjHD9Jd/sfvD3zDsEIbyLefaIxY%2b5noxCjbNIgiSea5HnRtE1KgAuVAYlFzPx03Je2Gc49t2RFz4rnDlASYrVNN/pULknjWvFFSAw1ImCohpcCHNrVyuoVisKgLynBKVyHVCjCxartN4vljUbigmhzzjrnA1D6awwtK8Njbq8LjoCmOJ1yoFuCwRsvMi9%2bXF5wrwPFEHewW/o6LrJnN47cX5NwBB75Wx10oJEiClTNJgjcaXLz6Pssstf26CYnZ9QpqLJnsDg72BxfxKkjGRrTTSbIrO9gnxLtKtY6SjRzTubE6AyY6u1YrU7i%2bboJBQZUnLm6CmxUU3nfnY9FWs0VlNHttORBKjeVxFeCkc7rygFQ3hUs2yeYoA2X1ph4WIeV5fq0DGasGWCzsO6J502wbHfo/lpUUzMVeuFb4VNQM1raFiHKeqhddohJ54gLh%2bbnKGYV97wIKAVku6vgHRV9EPpCvss3IsIVxRLOYWticI021EnW3GLUQcixcoBYjsJf8FL6eAdFQu06PN5iKOe0hTfjRZvjLEOB7RPPmREQ/V8Uoims8tGT5Ee3KIJDtENJ4i6e8hjEZzAl4uYcspICVQ9feUvuE6bDRYaykpnfmuG%2b6isXBW8mPoJhxV%2b%2bUrNgg7NHJfzV%2bVwdvq%2bLIJmlYAizd6cQKTfmE5MZxwqEzENFkR3gRI1SIJUvJFzbJwgx72WgKkNwiCDjqdMW%2bklNpDun0ImwwKAQHrqZSZOB6vLFSZ7j1Ae7CvpB91HyDp7tDPRvS35PUEOG6AKOmqz9%2bQDZP8ESLI/xeQpiIMB0R/EVcNNO/%2bLuLRAeLxARJ6QExCAv4mCv4PtfFtdLdXHb4AAAAASUVORK5CYII=' /%3e%3c/svg%3e\" width=\"2560\" alt=\"namespace and project creation\" data-srcset=\"/assets/static/pihole-project-rancher.82a2fbd.8ac1259a16ede379f303fd3678a61fa8.png 480w, /assets/static/pihole-project-rancher.cbab2cf.8ac1259a16ede379f303fd3678a61fa8.png 1024w, /assets/static/pihole-project-rancher.2665e34.8ac1259a16ede379f303fd3678a61fa8.png 1920w, /assets/static/pihole-project-rancher.42db587.8ac1259a16ede379f303fd3678a61fa8.png 2560w\" data-sizes=\"(max-width: 2560px) 100vw, 2560px\" data-src=\"/assets/static/pihole-project-rancher.42db587.8ac1259a16ede379f303fd3678a61fa8.png\"><noscript><img class=\"g-image g-image--lazy g-image--loaded\" src=\"/assets/static/pihole-project-rancher.42db587.8ac1259a16ede379f303fd3678a61fa8.png\" width=\"2560\" alt=\"namespace and project creation\"></noscript></p>\n<p>Now that we have project and namespace we need to add some repos into Helm on Rancher. Click on Apps &#x26; Marketplace then Repositories. Now we click create. Here we add in our pihole repo. I'm going with one that was made specifically for k3s.</p>\n<p><img class=\"g-image g-image--lazy g-image--loading\" src=\"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 2560 1095' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-e1d8b8b2b23dfe1ae9f4dfa3f48ea61a'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-e1d8b8b2b23dfe1ae9f4dfa3f48ea61a)' width='2560' height='1095' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAbCAYAAADMIInqAAAACXBIWXMAAAsTAAALEwEAmpwYAAAEt0lEQVR42t1Yy3IbRRTVJ8R6jub9fmv0HEmJZEMwMRRVIVXZUFCsIItUqKKA4geyY8kun8GWvzvc2%2bMZj%2bXIJgjJchbH3a4ZzfQ9fe%2b5p6cRRQP48RjW4kvEyQi2E0BWTCiqBVWzMcimGI5ygdF4jmw4g%2bOE0A2X7g0hq8W9BcwjgIW%2bbMD1YpimV8QwmCCKh2K9luWj01Hw67vX%2bOHt92hwMA7drLoD2HYATXfEA5gEntu2D4fAo0vk8D38Er4uiFKK4FXVFi87Fli0Tt4kBpPBMIgQw/Ag9XWcf/sZTr8%2bLQhw3RDtZhfNZg%2btllShL%2btQ/RHUYCKg%2bGP40QjzxQqL5Rqr9VMEaQor9KHbbpU5x4Bygxi8oeWmlmtsnyjotFQ0OCXiOBOsnZx00W73CzABxJQbTxFN1giHyyJLvITKYYaU0iodUOl4AczAg2Y6xQtU89rLjwXK5v%2baJdBw3QhRlBEJQ6r3iUh7zoR2W4ZMrDFBHmUIQ1WLB3EKMTk8cgmoeyoBXss%2bwZnQ6EsqwiCBQuneojLgnW9xKdC811VgEgEBXbdtj%2brKE%2bM2WFZxzwfBunouE8m1y2Ls%2bckNElTtaixJKsX6Q1D/TUM2AkRZjnS8hBuO0JIMtCUTnT7VkeaKxaXpkLIkvZOAXaFSSmq6W4gVQTc8IWLF3N2YU9lpzk46IQiIXv6M6Xe/Y/jNb7Cfv0Hv2Y/oX7yC/NUbGKsXkChDepImROS2Vve/1erGAq8v2r4237XERAlowRjx7AwhCV2SfwIrydHWQnStFIodI0ky5PMnMKkNitq/VNQ6tqm/TPogq/8em%2bp9CDQsw0bghYiCGAEJXafVReukQ22iA6mnIhivkS9PEYYDoQeWTb6BhJNr1XEimsciHett5jZSjg0NDsQnweHd7ZLolW2wReBAzJDaXcZOkF1g4QZn%2bQqTyZLmC4F0MIUfpMJthdEQSTom1xVVJBxjW6wygIPnVsgeoDRAggBhhAwYui0sJNvK0vVtGg6upyuB8iqhOiZnuA2XTjASARf9v18RIJH4%2bcGAnN8a48kCQzoHjCdzYYD4jMDgOZsiDrheBrsK4L5dYtUFOPgRHXSYCJm9QC0DuCw4sKL2g8pTswYwODNKiLa0gym5twzQ6A%2bntzgI0fxGCdC1UuzqB6X37V7RWv5bO2KS%2bfmHzoQGpz3X/6NHnRslwKLI4jaZLkUGlPZxHwuxL4/YhxRO0QWqw08t8LoGmCIDQnEGUC4Fbx/YrM%2bDtcFNAupE9MgHJNkMM/IBqulD0d2D7MohSbiVAJEB2RPYq%2bdwTl/Amj7d%2bwKPKgOYAM1JoPtDAc1N72WR90oAfxPgURIHIr0g4CMi4W4NSEeYTnLMpgsEfixOh%2bXHx4%2bBhNsJoF230zmC5QXCxxdw83MYg8dQyPQ8hOC3rpG/I5RfhO4qASPOYc4%2bJ5zDyp/BHJ8RAf7RE3DDT1D5irGvoddsoXvShEzZfCcB4mMH/ahC7aj7UEhQTTJxJOI8Gtkas5/%2bxOKXd7DmX6BR/wxeoVYCSu1jxX22q50IsCLo4ZRGOtVOz7F6%2bxc%2b/eNvOGcvt2cAQyoJeE%2bwD7YEuKt1eui1eyKj/wFGVil%2buGYGVgAAAABJRU5ErkJggg==' /%3e%3c/svg%3e\" width=\"2560\" alt=\"pihole repo\" data-srcset=\"/assets/static/pihole-repo-rancher.82a2fbd.7e1ced9b9169def7393ae16d605f7f3c.png 480w, /assets/static/pihole-repo-rancher.cbab2cf.7e1ced9b9169def7393ae16d605f7f3c.png 1024w, /assets/static/pihole-repo-rancher.2665e34.7e1ced9b9169def7393ae16d605f7f3c.png 1920w, /assets/static/pihole-repo-rancher.42db587.7e1ced9b9169def7393ae16d605f7f3c.png 2560w\" data-sizes=\"(max-width: 2560px) 100vw, 2560px\" data-src=\"/assets/static/pihole-repo-rancher.42db587.7e1ced9b9169def7393ae16d605f7f3c.png\"><noscript><img class=\"g-image g-image--lazy g-image--loaded\" src=\"/assets/static/pihole-repo-rancher.42db587.7e1ced9b9169def7393ae16d605f7f3c.png\" width=\"2560\" alt=\"pihole repo\"></noscript></p>\n<p>Before we install we need to setup a couple of things. First, we need to make sure we are in the pihole namespace in Rancher. We do this by selecting it in the top.</p>\n<p><img class=\"g-image g-image--lazy g-image--loading\" src=\"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 928 114' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-315c2d035505d56e5d4603185de93c43'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-315c2d035505d56e5d4603185de93c43)' width='928' height='114' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAICAYAAABJYvnfAAAACXBIWXMAAAsTAAALEwEAmpwYAAAC9klEQVR42sVU2VITQRTNF4hClsns%2b2TCTMjCTPagKBYqoUoFil1RKMDlDbcnS6p89sV3P8J/8C/8luPtnoRFXxKKKh9O3e6Z23c593SnGs0W/g/aaDSaqBPYuj4CGs3OOVqdy/txQGfr9QbPn8oJKoS8BlHSkRc1WqtIvjGrQBB1CJLB99eJXE6GqLmwKj3Y5Q6cSpdAa24T2OUu39uDtVlqXQusmTa3rLeUrJi8oHRGRCYrcSIk2UjASElnkJ9KQxJV/o2RJMk69xuSduY/KiinSPHMoA6/0oJhuNAMD4pqQyer6WzvwrR9GGaB/7PsIgzLh6xaUDQbquZw/7FA5yTFgkCD9cotaIUqU4CC2aiF1bVNLC8/gWl5yLPmqEB3YRvT6x8R7n5GoX9EyW243vRZIwoV47jJ/hJxIyBPpBvTEbwwgkBq8AoBybNLzTsoTs9Q3CJXoKpZVFOBF22YHh%2bWTuT05u4iS%2beGuUcBz0kxin4Aw69CZQSwyS8%2b6OPL6VecnHygQkJ%2bJSRJg15qo/XtF3o/fsOZX6cACnZ2X2Br6xk2Nnfwcv8Qz/f2eVHjqoDFMoMYFhUShhW8e/8Jx6/eYntnDwcHxzg8ek1FG6jWGljqP%2bYKNUkBrDaLlNGnYWWIAKbgUfIxvyyR2Ju7h5Wna3DCGKpXGSqgiZXVDZ6IMcRlTdPOTdxA%2bc13xKc/k%2btARUdxG93ePJ/Awv2HiOudK10DFssgApxiFQ6prlaNoeukMJo8g0%2bDUJgvi02Q6dqx/4IgQ1WImEpE74jElSrmR4GS%2bBIyU1k4QUQKqCHFimFMTtzM4NZk7qyZoaRlw4dincuevRNsGgyT6TzfX5ThqASwgjS/Brfag%2b6WoDolGIUKdK%2bcwJ2BSeqwhiCi2DfFDjgks0hnQqj2mGBnqB/28EpWiBQrWlaS%2bzyUE29k0IxIhIiDBzDxNf/BuPc/eUxVWG6A6HYfs3OPyC4hYvYCZv9CNPQjxAN7FcR3%2bqh1FhGENfwBbVz3S0i2eL0AAAAASUVORK5CYII=' /%3e%3c/svg%3e\" width=\"928\" alt=\"pihole namespace\" data-srcset=\"/assets/static/pihole-namespace.82a2fbd.7b8408bbdc52556f30402398856d6a05.png 480w, /assets/static/pihole-namespace.a9e2085.7b8408bbdc52556f30402398856d6a05.png 928w\" data-sizes=\"(max-width: 928px) 100vw, 928px\" data-src=\"/assets/static/pihole-namespace.a9e2085.7b8408bbdc52556f30402398856d6a05.png\"><noscript><img class=\"g-image g-image--lazy g-image--loaded\" src=\"/assets/static/pihole-namespace.a9e2085.7b8408bbdc52556f30402398856d6a05.png\" width=\"928\" alt=\"pihole namespace\"></noscript></p>\n<p>Now we need to create two things, our secrets file for our admin password and our persistent volume. The both are created in the Storage section. We create a secret just like we did for S3, this time though we just need one key value pair of password and the password value. If you don't remember exactly how to do that, it's Opaque secret, name it whatever you'd like, and input the key of password and the value of what you want your password to be. Then save.</p>\n<p>Next, we need to create our persistent volume. In the Storage section we just need to select PersistentVolumeClaims then click Create. Here we have a few options, the name of our claim, the storage class, and the size. I'm naming mine pihole, the class is longhorn, and the size is 500Mi. </p>\n<p><img class=\"g-image g-image--lazy g-image--loading\" src=\"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 2560 717' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-9157f34bfbb2d9a93fd2e32bb09c8dff'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-9157f34bfbb2d9a93fd2e32bb09c8dff)' width='2560' height='717' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAASCAYAAADrL9giAAAACXBIWXMAAAsTAAALEwEAmpwYAAAEuElEQVR42tVXyW7bVhTVvmhszaQ4U5QoDposS/GAxG6QDgHSuBlatEgKFCjQRbtru%2by3dFOgf1X0U07vuRJlynDqxDJqd3Fw%2bchH8t3zzh1eJUmGCJMpwvljpOkQnt9Dx/IVjtvFZLrAeDLHdO8%2b9mYHeh12B3C9CEEY6zzLDhTFe7cNs%2bPp2nzxxXZCxIMh8uEe/KCPMIpR2zHx9S8v8evvP6ISxznCeAh3MEMUDdTpjnzAWhHQFWfDbiw21uehfNgT5x03hCvPl44HayL4w9sG18E102FuVDdKlARurh/20W65ePT8EV78dIYKnQqCHmq7DdTrhqLRMNFsdpZE%2bDEsr38OGdtibVqB4/eVlKiXLskrKeI2UaiB11QEUdwjSY2aheo9kwQkSJIRDMNBtdpak0AC%2bJKXLuDlB/CGR/Cy%2b/BGx2KXYzc/RJjNMZ8f4uT0sTJtkLQ7FA5lIspj2xG1ioolBDJk2Vjifyx2ItL3UKu10aICOFEZ9VXurlcgKlkJBw2Jrny0q%2bwW998Xjrv8JqVajK/Cdf9FcK2Vfj8FE%2bF4PAPJoPypgFbLUlVkkjwOjk4Qi0o8iR%2bfsUVbQsB7/RzD0UyJNFcqeF9wQX4QI0kn6Mn3SOi/OV/E%2b3WhBGiSkxjmrtPxwjIEDNPFQByf7C2WTl5wfAPynUSc5/xtkuFSAX1VwVVw3GjrhFlhqeDOeyJpXjPxaQiIAhgCJKFJNYg1BZ2Or3OKcsP7BVptW%2b1NlDFNWit7cdy5kNS2QYUsMAnm%2bVR3kOWvXjeXBIgEg9ERIi2Bidb/8svcLd4LpNxQSUVf8H9CxTJsZIMMeZLDbHdw74MdKQ9VmE0DNieFObxI0BupZEhMW3aaIUK5Hx%2bfYr44wr5Ugpk0SkW2fVsl2CZeb7JPWBOQPfkOo8%2b/x/SLHzD49FvEn7yBd/oVrJNv4IwfolFtom74aJgBaqsSWeSKvjQX%2b%2bI8y19bEuZlyU9/aocbCetdSxYVRpKJokO9iR6BTRzXzPVW4o%2b%2bxPjJG0QnLxAcn6H78Dmcg6fwHryEI7W%2bUWNvIIlRHGaFWEPue9IHpNMjLZ/jyQKj8b62nLRZvifd1whpNhUHpMzKnL50nGWFXNXIMNPP9g%2b1/V7v4LrcXhehJk8NZxIQelJ6HIn73Tp2P9xFdQWz2YZlOmiI1JkTys4X3SJ7BHaAvX6mztJBli8ilmv%2b7LJkdZUK1gQEA/hRhrCXKzpOBFOcoL0OTLt7/r50sx35T4WLp0SrusMddZi2Lg5qBVACjA3HC1ucAcqZ27TOs/ZWrazA66YYSJix8hiGq2uql8LwcpgrlMby3s5uUxP1s7NXUtVsaetjTfLSCGUYSQNDOZSdbVxCwEUFXCXlbTO07Umtl/OGqTsvu%2bb2YF2BjV13N3ffFUVRna2GAdOwFHoY4omQTDsi2fJZoFzvL8N/cazd/I/3dqzmKRE8tNGK4%2bsDnDhvipLsZIH449cKb/wAFWZzHoKIWinRkQQq4C6c7N719Gexde5merS3xdphCrc/gZvsw03nQpKL9NXP%2bOyPv/D0z7%2bRv/4NlY3MfiHOCwLufENTriyqAIZDpIQsr1dgFRAlKCECEvQPbxQisObeMbIAAAAASUVORK5CYII=' /%3e%3c/svg%3e\" width=\"2560\" alt=\"persistent volume\" data-srcset=\"/assets/static/pihole-pvc-setup.82a2fbd.8c252a80b853c60c5c565cf9d0905ea2.png 480w, /assets/static/pihole-pvc-setup.cbab2cf.8c252a80b853c60c5c565cf9d0905ea2.png 1024w, /assets/static/pihole-pvc-setup.2665e34.8c252a80b853c60c5c565cf9d0905ea2.png 1920w, /assets/static/pihole-pvc-setup.42db587.8c252a80b853c60c5c565cf9d0905ea2.png 2560w\" data-sizes=\"(max-width: 2560px) 100vw, 2560px\" data-src=\"/assets/static/pihole-pvc-setup.42db587.8c252a80b853c60c5c565cf9d0905ea2.png\"><noscript><img class=\"g-image g-image--lazy g-image--loaded\" src=\"/assets/static/pihole-pvc-setup.42db587.8c252a80b853c60c5c565cf9d0905ea2.png\" width=\"2560\" alt=\"persistent volume\"></noscript></p>\n<p>We can actually go check this volume out in Longhorn too. We can see what nodes it has been replicated to and all the details.</p>\n<p><img class=\"g-image g-image--lazy g-image--loading\" src=\"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 2560 725' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-5f4d86b3ece7dfa667fc530832f9d0cc'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-5f4d86b3ece7dfa667fc530832f9d0cc)' width='2560' height='725' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAASCAYAAADrL9giAAAACXBIWXMAAAsTAAALEwEAmpwYAAAEuklEQVR42tVYW4/aRhTm//%2bL9qWt0qoPrdSHKmrVKG2yabguZFlYYJfbYsB3G9vAnn7f4KFer03IqpWSkY7mwvGZM9%2b5zVAZTabSH93KcDyRu9kc/Vh6w6F0b27Qj9RY0WCo%2bPpYG4H3qn%2bjqNO9lunCkKVli2FaXwQtSGtTDOhcuV%2btZWYYMl%2bu5DBeqgNN7hdqrPsZ1rjOMXk1z3h%2br4SubOeLIcv1xPZ8pXdliQVFQENROl/l%2bkdkPRZoZKyv5Rjm5%2bsRXhBIFMfS/nAlFReTMIqwkKg%2b3ICi%2bDD%2bRNpAKOXZnicbyFAUP0/W/008b6vdkUqUJDKbzWQ6mcj47k4GiP04juS5bbvbSYAN1quV9Ho9Wa/X8rm2zhU8gEg8PDzIDorv93tFnD%2bH2BbLpbh%2boMZ67b9unyq3TFcVAnGyFRJdP4LlfN%2bHB8SPPiwTkhfIvgurMwTY5vO58qq7EzQajcR1XWUAzk/x397eyhhVikaybfsw/wg/dcgDp/uOBiBCrNquL2EYiuM4qi9Dr8gCxzn6HkLIQYZlazab8ufbC6nW6tJoNOTy8lLa7baiVqslnU5H6vW6LOE12%2b1W3l5cyJt37xV/s9k48pL0t/yOYPFgr17/JX9X61Kr1dR6lpeyuXZ9fX0uAB4OvhEHve%2bH4icbsRP/LPfLA6A9oArFvvr2hfz88g95X2uoQxEITQSoWq0qAGjVl7/9Ll9/94P8%2buqN1BuPeTXxUMwzi8VCvvn%2bR3nx0y/y%2bh0AKJBNcPMAZA35LwDIA5aDgwcbcWE9x3HFDly5D03xfACDmDZ8S8zYPekBOgS0B9ANO50P0oY1bgBMv99/Qt1uV7kzPYA8l7DgFZJTET%2bTKtfpAaa5Vt%2b2YO0iuSQenjqUAZDmgETlAALgeoF4ngvhpjhQKtklKhxClDY/CiXCvAwAvWYDPJbCPF92cx7gY56leXVifvqblPKfMlCpB5i2iwvCRkxcciwcgj0T47kZWK9TnheET4BhbmHCI02n0%2bOhSqsJXHyIKziJBilNxFgnoEx4lE2Le2kIFuWu7HzNq3AM1%2bOFhdY3LdyS4O7b3f5QFdISeU4S1Gu8%2bOQB0L8l8DZWmVPlKSub3sfKdC4/D14GbJE%2b1PPoAYxbui8VzLpo/uNTdZYtygCgleHBJ7hoaQsNBgNZ4aJUdhiWRVpUW5U917TMvC7aW1gitYfpUp4NiSf7wNhHAFgGGQJ%2bECgkA/QJvOOcO0AZAFyj4hpUKsOegBTeIrEfQ4V769gnb1HOYCMf5fOwOreQv7RM5%2bYpAIlSmiFAEFgJmJVZmih8m4Jw7u0sGwK0CGsyszU9IEv8jZalN%2biLEDM3%2bZnpi/hpZXoQeakjaz2JcvL82tN4X8gbak9daRwCQCvHaQi4qP8B7gKui0SIfECiNxDhaLORBH3MhwTHBA5j9lmQ%2bLbw04sUlVQEOXwT5InJjW8GyqG1dfWxLLOUn8RDMD9YKb9ZxJv29KiyxmpVobJEYqWyvycm7wCwyJoA4KnLfoWNDChq8qkLoWqMjY3l6sCHTWh5lUzVa9BX84QumRITayHh4ASN/Jwf%2bPel/PyN%2bzB0Nf/2JP8ufd1m6fBy5f8C/wBWg0iNTehRfwAAAABJRU5ErkJggg==' /%3e%3c/svg%3e\" width=\"2560\" alt=\"longhorn pihole pvc details\" data-srcset=\"/assets/static/longhorn-pvc-pihole-details.82a2fbd.50ea86500824c9c46012842a8dd7ebcf.png 480w, /assets/static/longhorn-pvc-pihole-details.cbab2cf.50ea86500824c9c46012842a8dd7ebcf.png 1024w, /assets/static/longhorn-pvc-pihole-details.2665e34.50ea86500824c9c46012842a8dd7ebcf.png 1920w, /assets/static/longhorn-pvc-pihole-details.42db587.50ea86500824c9c46012842a8dd7ebcf.png 2560w\" data-sizes=\"(max-width: 2560px) 100vw, 2560px\" data-src=\"/assets/static/longhorn-pvc-pihole-details.42db587.50ea86500824c9c46012842a8dd7ebcf.png\"><noscript><img class=\"g-image g-image--lazy g-image--loaded\" src=\"/assets/static/longhorn-pvc-pihole-details.42db587.50ea86500824c9c46012842a8dd7ebcf.png\" width=\"2560\" alt=\"longhorn pihole pvc details\"></noscript></p>\n<p>With those two things setup we can now go back to our pihole namespace and click Apps &#x26; Marketplace, click on charts and scroll down until we see PiHole. Select it and click install. Here we are prompted for a namespace and if it doesn't say pihole we can change it one last time.</p>\n<p><img class=\"g-image g-image--lazy g-image--loading\" src=\"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 2560 1179' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-1656f976cb2c8f39ae5028d2c1f16310'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-1656f976cb2c8f39ae5028d2c1f16310)' width='2560' height='1179' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAdCAYAAAAaeWr3AAAACXBIWXMAAAsTAAALEwEAmpwYAAAE00lEQVR42u1ZS3PbVBT2X0hsxXo/radtWUr8Tpw0MI2blIFpy2PJql10smKABdOBHaxZ0A0MazYMK34JP%2bjjnCtbtUMmbbDKtMWLb87V8dWVzndeV9e1OO4iSHK4k/vopgfwWhFUzYamO9ANF3k%2bRL8/wUF/jMFgiv2DMc2JYdm%2bkDyPwfdUgsV6m0BRLfhBG7YTCBt6WR/tTi5sc9wQjYaKr3%2b9xJMfPketRUZ4fgLVCmGYHjR6CUUxxSIG3dwk2VCscnFekLF8YZ63qq8CmmZtvAY7yLRawiYmgg0vrlvincdnE/RPhgUBQdiG1FCws9tEva6gTuOGpEKSDHzz3Zf44/ef0e0OKApGiChikqRHkTAS0ZBRhLheVBKxCYrIc2HGfWhMhNC7t15HN9wr6zplVDOYEKmuk806apZhIwpimDp5eqdBkFAXsoEdIuH5s2/x1/OfkA6PcEAGtyha2Ojp4R2MxjMBZnv1Af%2beAPK8m8DZP4VBUtPtaiNrIdnhluOLZ9aC/AjJ4A7hFOn0LqxkiLqVYM9NoTqJuMGg8JFlHXtNnaQh0KRxk3QsOWVUioCXQVHNUhYgg9ljJdhgDzqFqb5Ix1JfGRyYtLYhosSmFPjoEulnX8D%2b4Cnks8dQ50%2bgzB9DOX8KbfIh7CiH3x0KBD1KgWyMIB0i7BWSdUKmozX4Ys6onBOKeycI6f44nwjwWmaYwQh6V5Beo6sSxfqa5aOm6R6iJEMn7aMVdFCXNAGZvWMFCKYXOLz4FJN7jzCeP8Th%2bScY3n0gxuP5o4V8KHTT848xIR1L/m15D8sJyezkPtrTM/SOL5DOzgWcfAY7O1rBbAVH14D0eRU4pnSLUeOQbFNRS5JUhMjuzh4adVmAw99Opwj3jxAR4v6McCyuGcngBNHBTCDID8sxz%2bPfYkqteHiKZPSekHZ3DINSbBUW6W6F9hBm0q8Euh2gxjkRxymiqIN2O4NNBW13V6YOoIp8salYBGFH9FXL5jZCNcHyRHsR4wXMKzpe3LRD6usupD2uH1Q7qJ3Kqi2iq4Ty6mhyrTFaRcHkuqJtCqoBnhciXrS2kAxtUAuscwSQ5OIWkf70/TmlyD5c2kjYNN%2b5EdRzaZ6b7Ive22xqRGhTrFlnuQF2qUPJRCgXySq6jugCrkt5Tt5lj7PRJQEEZpm9WrQQp/Cw9QrgedwazQIcDZpVDbguvdgzVEAAe90lT7GXVr3Pcrm5WT7sttvaKl7wn7DX3mdjAhzKcd4NssE7XABXokCWzY0eVNn3wRqcaiPA92Nk2UCQwHvwtQhQzEofVhWqfB/RBSzKW44EHt%2bUAu8iapz7HPqMZR1YEtCkLe87T8DS4LUOUNaA/yEB60VwS8CWgC0BWwK2BGwJeBkBr3fv/wYQoKjWyl78xbf022x4SYD4Tr%2bKlZ2gYbXEgUgYdQkpjQvJ1zz2/fZGX4z/OdhwwytwUwQwOALEHwtEAp8U8fG37YQLBKQLSBdUenT92sER3diDXJegKgZqkqQJT3e7uTgV6nRy8CEJRwAzpjsRdD%2bF7rUFa%2bvp8HalgKqa0FtdDC5/xPSrX%2bCO7qG2POdnj0vi3yC1PB2S6XPYcGMYQQaDbuRjZO0ag9/4sF%2bmJ3lc93uYPvsNJ9//CW/2AH8DCSrsY/Taz34AAAAASUVORK5CYII=' /%3e%3c/svg%3e\" width=\"2560\" alt=\"select namespace\" data-srcset=\"/assets/static/rancher-pihole-1.82a2fbd.49d79aea24b95dcf1c5f131b34f4c5bd.png 480w, /assets/static/rancher-pihole-1.cbab2cf.49d79aea24b95dcf1c5f131b34f4c5bd.png 1024w, /assets/static/rancher-pihole-1.2665e34.49d79aea24b95dcf1c5f131b34f4c5bd.png 1920w, /assets/static/rancher-pihole-1.42db587.49d79aea24b95dcf1c5f131b34f4c5bd.png 2560w\" data-sizes=\"(max-width: 2560px) 100vw, 2560px\" data-src=\"/assets/static/rancher-pihole-1.42db587.49d79aea24b95dcf1c5f131b34f4c5bd.png\"><noscript><img class=\"g-image g-image--lazy g-image--loaded\" src=\"/assets/static/rancher-pihole-1.42db587.49d79aea24b95dcf1c5f131b34f4c5bd.png\" width=\"2560\" alt=\"select namespace\"></noscript></p>\n<p>Once we click next we are given a yaml file of values that we need to configure based on our needs. This is a large file so I'm going to just tell you the parts we need to change. From the top to the bottom here are my changes:</p>\n<ul>\n<li>DNS1: 192.168.1.1</li>\n<li>DNS2: 1.1.1.1</li>\n<li>existingSecret: 'pihole' (this is the secret we setup earlier)</li>\n<li>doh enabled to true</li>\n<li>ingress enabled to true</li>\n<li>ingress hosts changed from -chart-example.local to pi.hole (you can use whatever you'd like)</li>\n<li>add under the line PersistentVolumeClaim add existingClaim: \"pihole\" (make sure to use two spaces before for yaml syntax and the name of your volume you created)</li>\n<li>set nameservers again where they are listed</li>\n<li>under service DNS I specify LoadBalancerIP: '' to one of the IP address in MetalLB pool (192.168.1.201 for me)</li>\n<li>change NodePort to LoadBalancer</li>\n</ul>\n<p>That's everything I have modified. Once your configuration is how you'd like it, click install. To note, if you want to use DOH, you must use ClusterIP for the web services. If you don't, you will run into issues with Rancher ports. Also, if you cannot use HostPort with DNS for DOH to work.</p>\n<p>We can view progress of deployment here and shortly it will be up. Once things are up, we can check on our ingresses. We will need to create another entry in our DNS or our local hosts file.</p>\n<p><img class=\"g-image g-image--lazy g-image--loading\" src=\"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 2560 572' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-4ef6e758e844ec3e9eb7586552a66f57'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-4ef6e758e844ec3e9eb7586552a66f57)' width='2560' height='572' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAOCAYAAACfOxrCAAAACXBIWXMAAAsTAAALEwEAmpwYAAADlElEQVR42t1W22pTQRQ9f6BNcpJzv5%2bcW25NmjZaWrQKWioIXqBYUKlIfSioCH6BDz4Ivvjon/jkly33njMTQzUYsMXiw2ImcyYze6%2b999qj5XkPSTFEsHUXvf4YUZzDsgPYTgjHjTCebKE/GMMPUrheTGsxfYvEPv7Ney8T2G7T8pGkpbCZfegPJiirobA5jHLobRfvvp7ixYen0LrdChkR4HUJ7KA8wCKwg55fH8IHM3itXk8kIdGlRBhl0sYEcVIgJuf9oAvX9tC6chU7%2b2Ns35lBi2hjRewEfoR224auW2g2DbQIzGiSFsgoS/KiLw5ipxUZNaIzvy8HFrNCBJQDqxtIdh9g9voLBs8%2bwu7dgBZGXaSULlneR1kOBXuCgJYp/jgYTjCb7WCycY3SaCTWDNNDx3DR7jhoG45YO3vpZSiFRZtsKl2jpSM/eIlbn79j79M3pDcfUwYECbIuRZkinSYZGms6Gld1NBttmORclg8wHs8wGm1incaN6Taq3hjD0RRTmm9sXEeSlHMSlkXhj8ZeEBEc0MVStS0PRpuC27HoTh%2baHVXIhzMUoxmG0x2UNGaDTRg%2biaHfxe7ubTx5cozDw2eE5zg6Osbe3j4O7j0Qc14brW%2bJjOALfheFVdL1okqBbVJiKAiQoxJ0rXz0FpOj98gfvoF59wT2/ivCCayDU3jb90k0fCEe6hBPCqA60OVDZZ2pLFCiOa%2b/JRDfaI/QFTuU64GE/9fg811ps7JnToQkSHPjHqr1ayLyDMPP0DQj6E4KLypgUGQDcj4KM6ytUVmYLgoSRV5XWsFQ4sldJMt6KEg0O6QR6vsysPCWtNcmY5vNjhDflhr/8N9VwOrP9vA9jbWO8IVtZFuZJM0ih0pyKPBj6PJyrv8WwXEoOpQmbhAjyLpwPGKRVN%2bNSqH%2bZ%2buNGedMSam1rqwBnDFhTijgUMm5QSbmNs3PTRAX5tzJuEXWpUAlkNBCUQx%2btr8F9ur0TOCHCaI8g0skOfQu4DeD4yW/9F52mi%2boeuur92w6x0sH9TskruAnlZyX5/YmWBRB7nYMYT%2btawF1ASaAU4RTnB2fvwMW25vJDEq1JiW1lwiXapMrC5U8r4aqX29%2b93nDMKV9MiMoA3LxEOJR1YYiYd7fHeVsnbL1WrhS/12lBFZ5zJz/%2b0CKoElsuG4olNISQrRAgIzkRbapfw2t0eiAwenPo6p/JoB7%2b/9OwA%2bi98dKeeIGBwAAAABJRU5ErkJggg==' /%3e%3c/svg%3e\" width=\"2560\" alt=\"pihole ingress page\" data-srcset=\"/assets/static/pihole-ingress-page.82a2fbd.58fd172db11e167ea791f5e2d3f523d7.png 480w, /assets/static/pihole-ingress-page.cbab2cf.58fd172db11e167ea791f5e2d3f523d7.png 1024w, /assets/static/pihole-ingress-page.2665e34.58fd172db11e167ea791f5e2d3f523d7.png 1920w, /assets/static/pihole-ingress-page.42db587.58fd172db11e167ea791f5e2d3f523d7.png 2560w\" data-sizes=\"(max-width: 2560px) 100vw, 2560px\" data-src=\"/assets/static/pihole-ingress-page.42db587.58fd172db11e167ea791f5e2d3f523d7.png\"><noscript><img class=\"g-image g-image--lazy g-image--loaded\" src=\"/assets/static/pihole-ingress-page.42db587.58fd172db11e167ea791f5e2d3f523d7.png\" width=\"2560\" alt=\"pihole ingress page\"></noscript></p>\n<p>We can view more information if we click through here. Our traefik IP is the same as it was for our Rancher deployment so we need to point our DNS entry to it. In my case it is 192.168.1.200. Once setup we can browse to our pihole instance and login with the password specified in our secrets.</p>\n<p><img class=\"g-image g-image--lazy g-image--loading\" src=\"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 2560 1775' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-d33d4a3d0e85f738ce053d8c87e35c98'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-d33d4a3d0e85f738ce053d8c87e35c98)' width='2560' height='1775' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAsCAYAAADVX77/AAAACXBIWXMAAAsTAAALEwEAmpwYAAANYElEQVR42u1a%2b3McxbVeFyAbA5GxsY0s23rs7LxnZ3ZnZnfnsavVSqu3ZOQXOEBiC9tYBhcGYjAY2xDZQBJDQmKKR9nBJNyQqlTdqpCQVFLcR6VS%2bSGVH/IffTmnZ3e1EorBMje3uL4/fHt6Hj3d5%2bvT55zu3pTrusjn8/B9H0EQoFgswHXz4l7zGUvLsmAYBkyTYSZoXf8rYV4X3EfP81AplzEzM4Pp6WnMMGamqTyFvXv3Yv%2b%2bfdizZw9mZ2eRYgUTAgoIwhDFUkAKe8jlcsg7DsEWH7SyNgxuhIjQqRFN00XZMP81MBtStK3r0HVDgMsCWgJV1ZC1bRSKRYyOjmF8fBwj4xMYJYyMjmJicgrTRAyTMzU1hVQmk4EkSchoJmTThmxkoZgO9GIVejAEPR6FYntQ6Z6WzYtnWbcILyiLspbNQb0erBw0i8v5Lw1%2bn7%2b7HDrB8UtwSxFyfoBcIYQfVui6jEI0QKiiVB4U124pFs8zOvXX05HNG4QSbK%2bEjGoInRmCAAHFhKbmoBgOkWBDyYfQoxEYgzNQnQJkPSFG0iw49JGoUoNEdRTdFpAbMilnIWtZITMNyLoFheoq%2biJkrR1mIhvvS/SdNHWepUQy3ZBZL0S%2bVElkUEVQHUGpMoSoNopoaBzl%2bgRKdC%2bsjaFI93eaOQyRfrWMTIMaC3K4LTHodD8lyzLktIyMq2NH1YLEpk6jYNo02jp1StWJFFsoLzek5ZagugWohSI0Aku9UFosFwNYQQSzFMIu0mgVIhjUabU0AI2gNmCQAlY4CJMR1QRs6qBD77vFEk1Hj0w5QbEh/QLJkk/PCgI5mrqmF9DoUpn67BByjkdTl/wXSZ/66fshCmwtZLkuvWvQfVaedU/JCinfK6En0lF4vgvqoIx8cRBju2aJ5RL6VSKlOYo0RTSyECOOcf9cDduODGPb4SF0H6lj86EB3P9YDV10f8NDAdbuzuOOAx52TIbwKqPYevI1dJ97B10v/gTdL13GtjOX0fncj9Dx9CWse%2bp7WDf/Xdzx7A%2bxZe55%2bETOD44q%2bNVpCb84JeOXz6v4%2bDlZ4KNnenDl2Ca8ffg%2bfPjERrz52E545RqOxwEuDwd4YzjCpWoRbw6H%2bGE9wuuDJZxzNZzNKThPOOebKNI0SjctQKGfXiIh2pnGpx134uSmLXBiHSOTwxiieTVUrWGgPo5oYEj4AJXMUCmHWH8kwsb5Qaw/HOKeo2WSETbR9eYjdO9ggNS0htR%2bE5tnaGQq4%2bh88W10XvwZ7l24hq2v/RxbCOvOX0HqzPtInbyE1NGXkXr6Tdxz7Dy8YgUfnOjGf73cjd%2bf6cIfz%2b3AH85247NX%2bvGLp7bigyPrcOXwelw7shbXjm9EoTyA75Ty%2bCDO4v2qi/fKObxfIZQdXIocLGT7sWD24BWjh8pphF4BfURAYgFEQJpgZRRc3bABx7t2kDMxsGtmFAPDExgem8QgETAwNAqNzEs3cpCjAD1PTWDL/BCmL51E/bV5KKcopOwhpWcIeyys2WUitdfE/VMFZMuj6Dn/Doav/hZdFz5A6pm3kDp1Gann38aaUz9G6vgFrDl6Dqn5BXTOnSbzL%2bPq0yo%2bW5Dx32/V8ed3ZvD78xJ%2bOX87fvzonaT83fjo%2bN348PH1ePfoZvhxBaeqMT498Riu7RnD1ckqPv7WPvz6qaN41dexQIp/z5FwwerDy3aGCCgKnYUFCAdIbOyUNQohBpm8if4shRkKgxo5EJ2U5gigUHRI0/NMxkAfzcH8uYcx86Nn8PC7L2HuyisIF%2baQOmAhNcsg5fdliQgDW3cVaW6Pwvr%2bh9j18We455WfIvXCuzTy7yWj/xwRcey7ZAHniYiLZE1n4ZIP%2bOi0hb9f242/XTuAv16ZxV8u1/DJybW4eoSUPnQnfn5sPX72%2bFq8d3QT/KiMF2pl/Onss/gNKf27Z4/jV9/ei989fQxvDHh4Wd2Oi6S8sAB70QJaTpA9Yk8fkSAp6CMi%2biQdPZKKHXSvu6cf23sZaWzvS6OnNwON8oW1D/lY/0gJqd0m1uxzcPuDeXTQnO940EXHrIO1szncdsDF9ilyPpUx3PXEgjDxO2jOdzzzxiJo3nc8%2bSo6Dp/BbccXcN%2bhU/DJOX7/0A58fKIT147dg2s00h/OfwMfndiIn85vxFsH78XluY34tyc34M25bvIxNTzu5/C62YtXKeS9XjBw0cngApn%2beRrxlxwZZxlUPkvOvkAW0N8koJkH9NEUyJFzUC1bQCGH16/oCSFNZFQhc2SidlSBTl4%2bG5bJ48eLCGPy6g1JkcCm0MNhy4mHYFfqCcoNNMuVkRZy0SCFN47pZcTlCFE5RlyJhYzoOq5EKFcSySjSezkizA8qCAkBxf8SIaA8JRD3yksQhFXYlENkmnlAMyGQKNxNkucPylWElUFKKKrk%2bS2hsCBCSUjop2mQpVDikmIhxVluuBglHeB7HoUxvi6EAyjFgyJRsShEcShVvwQ4zIqQS8iQv/kiyDRNm%2b9zeTkyAk5LqllXJHLpdHqpBaRJSf5QM3GRKFlgAjJtyQxfcy6QpbjKSnG25RKrPkWLfCkWyFHc53uchfFzj4gxc34rh5C/AMoS2NeB0yavDzlL0nKSQaBIxgRIy6cAO7mRqQcQ0HzijsvGyh/n1JYJyFIyxAqL/MCwW2hPmJr3RDrMKe7/AjhqmRlK7jQnSbNtt0FAuhEGG06Q1wI6ZUjtHV8JrIzl0hSgka1QeBSN0Ee/COK9Zsf42s4vuaffILgOZ3TcZ81xk286DdhJG4aeQ%2b8o5SkvTqB7/4AggZ9b%2bRUsgHP1wdFJsZhgK%2bAGVhpRQQD5gDzN9bg28vnR5bDpEBoKtku%2bL5Q1kxAr6tpL62kr1bM/P7I8mjopY9AIG6ojvsnSVChbteh5jp4pDroeHUTqP%2bfQ%2bcIkTClL9z1KmxMCFEVZdIJsAQo7jjZlm%2bbdmksNAtgJOjTHY1qAiA7wKDdGwzTzsDO0XtDzomzRAsuwiHWN6smOeFct%2bFB9n9YcLkwj35L8nOuIenpyn%2bsxuB5fC9koW7RKlSjd7dlVgRIVKT0fwub5EfF9/pbdb6P7m0TAJ49i43cmkJXstinQsgBJeESNnMTU7H4UyQKK5L0DSn2jwfpSB9ZGAH8kqA5DiguCbWadR2DndIw7L83i/m/TajEsYOcU%2bZOiTyNRw33HR9BXD3D7u/vQ8dZuyJ4LaaAExaM1w2wFnWemRH2u1zsSQPY9bN9dwfY9tJDKu1BcV0iVRp6fGdTmXa89gNQfD6Lr4UGsubofqX9/BL3jlJafGMW2h6roeoQI%2bI9D6Dw9ISwsExSEBTRXwUssQCNWWcF2LJ8CbCU2ZWqscI5ygK2HiYQyhZVqCVLgIz1VwZYfPIi%2bh4fRdaCK9a8/gJ6JpEN3XdxFBIS0LpjEvTQiPHqbSG7fOyDm6DoijonYerCGb7w0iT5a3HSenhTvM1Hb5obRQ8/7awG2PF6HNF7GjoN1bDg/g/6xCMoTu6A8uxsSLYTWX5zBpidH0D8e474Lu9HzYA07qJ3emQrsrA%2bpMfWXECAbKzvA9inQJKA1RdTGup9CEkOhay1tQlVozU8rSVUyxTuK3ChrVCZpkolzvqDR4irD%2bwT0vkr1uI7SeJ/fVTOWgGij1ackLHsUfl03pOW8AYXe1WRCplGP2uBvKKKcfFPm/hhOawq0NkQWfYCzYvhb7gw5E%2bQ9ATNHa3HKB4RswKBrw00kPzPI3BK5vNyo2wbDLS6W26SxrI2V2lv%2bXW6rVW70x6D32YHzrlDLBzSZkK9DwHIiOLUtlCkLjGtfOxTKw3A4FV6yGmTcIAH8MY/y9q8bfBo4JuCGpsD/VQKWJEKrJeDrZP5NAng1KC1fDN1SBHhf4RT4fwK%2bpgQsiQK3tAUsXQzdKgSskAjdalGgdTJ0q4bBlg8QZ4OEW88HpD%2b/I3RLTgHeFrrVUmG2gM9ti2fUGyCADy6%2botVgQazQhkTHGIV/gq9sNVjh1WCYWP1qnaDYEyzG4hzfKcQ3gQhZkrzN7vA6nbfbm/CWlm%2b%2brUZ/i2WxzXfDy%2bHle/03Cz6kSBsOSrqBKF%2bAVKjC8CJxPMertXzjjxXNMv9tRl52BrFaSKqxOAXazwW%2brAXcDJJTp8UtLpNg5YpQgyFkQ/IrcVX8jcXjUydBQigsQ7bykIgwyUwgr6r9pP%2bsa9PyVzUFVguuz9tYPKq8PcVKGboJkxyxbzuYHK6jXhkQ/0UIh8fhhFUo/B71zTEsOKaFHMElaPyHrhs4Hmvvf6b9P0I3kgneLPjbfOw2MDwmHJKcDzFT8rG/4GC66GGv72A8mxxf1weq8ChlzZNvmLFU7DclDJkqJkwFk6aMrMkWtEoC%2bF9iq9kPuBnFW423HbbyX9/ioTGUqnWSo%2bKcQfZiWPTehJZGXZcxTJgyJASGjrQ4MXbEVJAbyifyRi3AWLoj9GX3BL8KIpb4A7rm6ZD8xy85Tg/F4WwEO6ohW51EtjyCbFyH7setv%2bo1T4jlm7CAVTnB/wlClh6ueosHqVQWW9u5ZDubj7QW%2b5ZEkVX7gMYfJVn3fwAA686hh3pclwAAAABJRU5ErkJggg==' /%3e%3c/svg%3e\" width=\"2560\" alt=\"pihole\" data-srcset=\"/assets/static/pihole.82a2fbd.3d0118d98ece54f58adb02759e32f03f.png 480w, /assets/static/pihole.cbab2cf.3d0118d98ece54f58adb02759e32f03f.png 1024w, /assets/static/pihole.2665e34.3d0118d98ece54f58adb02759e32f03f.png 1920w, /assets/static/pihole.42db587.3d0118d98ece54f58adb02759e32f03f.png 2560w\" data-sizes=\"(max-width: 2560px) 100vw, 2560px\" data-src=\"/assets/static/pihole.42db587.3d0118d98ece54f58adb02759e32f03f.png\"><noscript><img class=\"g-image g-image--lazy g-image--loaded\" src=\"/assets/static/pihole.42db587.3d0118d98ece54f58adb02759e32f03f.png\" width=\"2560\" alt=\"pihole\"></noscript></p>\n<hr>\n<h4 id=\"install-from-cli\"><a href=\"#install-from-cli\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Install from CLI</h4>\n<p>On our workstation let's add the helm repo...</p>\n<pre class=\"shiki\" style=\"background-color: #ffffff\"><code><span class=\"line\"><span style=\"color: #24292EFF\">helm repo add mojo2600 https://mojo2600.github.io/pihole-kubernetes/</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">helm repo update</span></span></code></pre>\n<p>Now let's grab the values file that has all of our options.</p>\n<pre class=\"shiki\" style=\"background-color: #ffffff\"><code><span class=\"line\"><span style=\"color: #24292EFF\">helm show values mojo2600/pihole </span><span style=\"color: #D32F2F\">&gt;&gt;</span><span style=\"color: #24292EFF\"> pihole.values.yml</span></span></code></pre>\n<p>This is a rather large file so I'm going to share with you the parts that I changed. I recommend you look through and find out what options you want for your configuration. First, we need to create persistent volumes and persistent volume claims. We can do this in the Longhorn dashboard or from our workstation. I'm going to do it from my workstation because, well, I have to do everything else from here. Let's create a file called pihole.longhornpvc.yml</p>\n<pre class=\"shiki\" style=\"background-color: #ffffff\"><code><span class=\"line\"><span style=\"color: #24292EFF\">---</span></span>\n<span class=\"line\"><span style=\"color: #D32F2F\">apiVersion</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #22863A\">v1</span></span>\n<span class=\"line\"><span style=\"color: #D32F2F\">kind</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #22863A\">PersistentVolumeClaim</span></span>\n<span class=\"line\"><span style=\"color: #D32F2F\">metadata</span><span style=\"color: #D32F2F\">:</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">  </span><span style=\"color: #D32F2F\">namespace</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #22863A\">&quot;pihole&quot;</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">  </span><span style=\"color: #D32F2F\">name</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #22863A\">&quot;pihole&quot;</span></span>\n<span class=\"line\"><span style=\"color: #D32F2F\">spec</span><span style=\"color: #D32F2F\">:</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">  </span><span style=\"color: #D32F2F\">storageClassName</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #22863A\">&quot;manual&quot;</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">  </span><span style=\"color: #D32F2F\">accessModes</span><span style=\"color: #D32F2F\">:</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">    - </span><span style=\"color: #22863A\">ReadWriteOnce</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">  </span><span style=\"color: #D32F2F\">resources</span><span style=\"color: #D32F2F\">:</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">    </span><span style=\"color: #D32F2F\">requests</span><span style=\"color: #D32F2F\">:</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">      </span><span style=\"color: #D32F2F\">storage</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #22863A\">&quot;500Mi&quot;</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">---</span></span></code></pre>\n<p>We can then apply this PVC using kubectl</p>\n<pre class=\"shiki\" style=\"background-color: #ffffff\"><code><span class=\"line\"><span style=\"color: #24292EFF\">kubectl apply -f pihole.longhornpvc.yml</span></span></code></pre>\n<p>We can now look at our pvc via kubectl and in Longhorn</p>\n<p><img class=\"g-image g-image--lazy g-image--loading\" src=\"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 1612 202' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-f1201d3c666bc5fc0306045e158186c5'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-f1201d3c666bc5fc0306045e158186c5)' width='1612' height='202' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAICAYAAABJYvnfAAAACXBIWXMAAAsTAAALEwEAmpwYAAADV0lEQVR42m1V227iSBDlT1Za7S6bTcDGgLHBNmBzMyFgTLglQKTMLDOzykNW8/8641NSoRbiodRdt%2b6uU6fs0vJrH43pb3DTP%2bHP/0C4/x3trNhP79Ca/gUvLcPrtGE1I9S6OZxejnqYwulmsKMMtSCF7SWwwrn4Gv0VrM4jptkO6WSMp6cnLJdL7Pd7zGYzPD4%2botfrIY5jHI9HJEmCbreL1WqF0WiERqOBwWAgfsYyl77FYiH59DuOg3q9LsJ9rVaDbdsi5l7j1HbtsywLpf2XHJ2Bg1EWIZw4cAd38Eb3aEYVBCMH8cxHnMQIugnCeIJmMITj99EKE0SDGbxoUNhTxNM13JC%2bGDU3RNAbIiiAY7HD4VCKY1FRFKHVaknhLMj3fbHRTyD4YNqCIJA85jCWMTxLi9a12WxKfBiGksN9p9MRnWCxaN5Hm97FPW2ML/3/%2bRP77Qu%2bn//DKJmgem%2bjbjdxf1fBMBkjm%2bdYr9d4XuXYbTfo%2bB7%2b%2bbuMKAzwdjpgXdhPxwO%2b/fsFvufCtiqoOzXUbOuCOJGmmOhzrVarEkNRv3bUtJm52nkKdRa03W7x9vaG0%2bkkb1XWuK4rd5CFh8NB7GQd2UjAX19fUTp/OyPPl5jP50UHIljFw/2iSAZn2QKbTVH887Po48kEo/EYiyyTC4hy1bIE2XlB0aywu24LNYN6JlXNzpl7syj13Yo3wTF9JsjqvzUC5phcRuB4PMmsEaV%2bvy8BpMe4KDRNU7HTz%2bJoo0ynUxFSiQiTSgSI6HPPM0i/drt9KczzPOkI91zpV7kGi37GU6jzPaQ67QSbuhbPfI2lzwRTYxhPv%2baZvtL3Hz%2bkmJeXF2EBO8vgcrkshbP79JNmpFulUsHDw4PM5W63Ex%2bZoB84AsFzKHmeC6gEj3QjmMwjBanTTl3v1ibwDTyXHz7G8W7ulb7v7%2b%2bSp%2bAz/3w%2b4%2bPjQ6jNzmqROgKfn59yjvkRFQBoJLrslqJE4cdnUlBeu8%2bVh9PHbjGeDGBX%2bAheorlml7T7tHHVjpk6z6KuzDD3%2bibtPt9KG9drBmjs9V9C6zOZcwGAhVWKjprzRSc7wE6wy/ob4kiwWJ0h/VDRttlsLvQ359Q818y7pZvxt2b%2bejV/g6bc%2bs5c36H2Xx4GbGgGyWevAAAAAElFTkSuQmCC' /%3e%3c/svg%3e\" width=\"1612\" alt=\"kubectl pvc pihole\" data-srcset=\"/assets/static/kubectl-pvc-pihole.82a2fbd.39a29349af1fae30987ad7a720087400.png 480w, /assets/static/kubectl-pvc-pihole.cbab2cf.39a29349af1fae30987ad7a720087400.png 1024w, /assets/static/kubectl-pvc-pihole.cf0e403.39a29349af1fae30987ad7a720087400.png 1612w\" data-sizes=\"(max-width: 1612px) 100vw, 1612px\" data-src=\"/assets/static/kubectl-pvc-pihole.cf0e403.39a29349af1fae30987ad7a720087400.png\"><noscript><img class=\"g-image g-image--lazy g-image--loaded\" src=\"/assets/static/kubectl-pvc-pihole.cf0e403.39a29349af1fae30987ad7a720087400.png\" width=\"1612\" alt=\"kubectl pvc pihole\"></noscript></p>\n<p><img class=\"g-image g-image--lazy g-image--loading\" src=\"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 2560 572' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-e43e950f1f959b31c87b6dbfa1cf48c0'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-e43e950f1f959b31c87b6dbfa1cf48c0)' width='2560' height='572' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAOCAYAAACfOxrCAAAACXBIWXMAAAsTAAALEwEAmpwYAAAFoUlEQVR42r1W%2bW9UVRh9QlsWhQKSEJFFEkyMf4uRRcoiCEGQBARUEgQUCGsUKFBbEPEHIbK2tCCUtpS2EMAQgem0EIFKoYUus0BpZ3lv5s28N%2b947n0z0%2blCU5roTU6/7zv32%2b6d%2b%2b6tcv5%2bC6YdvYEfqu4jFAqh1eOFy/Mc3hdtlF48bXEBUR3Z1%2bqgrDmBMZvPYvTmIgz/7gzS1%2bcjc2MhMsmlrTyCEQv2I3NRLkZSpi05hDc3FmEk50cIn02FGLqhAEPWF2DUpiKJDOqCy4zbw5hz8LenMXhdPuUAEI8btPZ0vyBqKWJhH/12HZ/n30JbewcanjWhsakZTa0uyhY8anwGM6xix5WHUJYf5aILkLHhDDfjJJTVx/GGKLie9uLDUGZnY9DcfVCy9kCZmwNlbT5xWiJtXQGUr09IDKaexjzKV7S/OYlBzCHyKmtOQfnydygrjw0QjF11TOaU/aXKhL4mhRO%2b7nY/nE89aHzeAZUnQAuHJdRQHNSjER1X6prwfbED28qc2FJaLeX2S7a%2bhfrOUge2n7uJbYSQOy/exlbyWzlvS2fXGELoiXyJnDsu1QwYO8trZJ5lx69jybFrWHqcoPyC9vJTN6SeBOc2XXRAaXG58aThCf6pr8fjp8/gaWuHm8ff3fbSxouXcBEdPh%2bioSAiGhGXutZp6yEVEV1LQuepkX7dob1Cj0PXBoawGgCMMB40tmDSsoP4cPWvmLriF3yw6jAm0xbyfdpTVxyScvzSPFQ6H0Fp9wfgVzUEtJD8xbWwDk2PELrUQ3E9yLlAN/i1hAzBxxw9EfoPoMXr6vG6nRC9uNsDuHCnHsWOTlwgSp2PUV7bgFv1rbhNVN5rRF2LF4pYtGmaUFUVGhOGuWihiwsxzOMfTPLcHE2Tc7avluQMw4AYFrqO3uz%2bcKl8b3ORaFTWNWMxWHSw%2bCdGPWb15t05HrnasehAKeblFOPq301AzIAS5EIt04CfRzysBmHye1cDfoS4yKjOBVLXNRUGdTUQkHNaMJDkhB9iJv7PYRkRqH5fZ12r61ZZYmPikHNCctQ2eLAwrwSf5V7kyXgMIxqBwr84cq8Zc/5wYvY5J6YV3sG88zWYT8wqcmDG2WrMEJKYf6EWn5L/hNx02jMlV4Ossw4ZN/tctYybx1xz4lxWnJtLOZO2zM95wWUxfjrtGYUO5nUmY2cV3ZH89Li/mFvAOkKKWqKXmexVSMEvLBY9OfDxmc4eErmyUnItLrmLFRUPsLLyAUKGydOtcQMsA%2buuPsTUn6swcu8lpP1YgnE/XcbEvAq8tbsEGbtKJYbuLsXkg1WYkHtZ8um7SjCM3IS8SozOLkU648bmXLZ9yI3dVya5t/eX4z1y43LKMZz%2b6cw1PrcSkw5UYlS2nVvkmUh7Cnt4N7dC8kN22chgHZFPzlGO2VsmeZFb9CTyiPwjssvivVfIHqYctP1Hx2sM31NG3yrWrsA7XJ8rEJKfuRLid9waDOOv1nbc9folajyEN4BaIsE53X7cbO7An8Rtl09ytd38ajw%2bOAkR7/TYcbWClzIgdZnLY3M13k6farfP5jw2EnXt2j45L2TqnIhzuAUCspdED9W9%2bIt5wTmIu/SJ8gT4%2bfkq4vbvMXg5iP/%2beDl0ob383FsCFqIpdExnvBlNDe5qM4cVCdt%2bKT6C63HF8f6RtV9nxPifasjR39sjWVPcD74gNyDIDRCUQcKMWfIm1SN8%2bng8dN62wo6YFjyqiWa/ibo2A086DAQiMXn7anxFhL/wE4jyRUi19UgUqnhieWtH%2bdqwhPSRtmFKH1OA9UXNsG7Hil76Bvu1xF77%2bfy32nof/rI31hc1pZ26AfZFaiXRZc/inCGD7GRR05apvt1j%2b8rVG9dbbL%2bQ%2bF376Z/M39cG9AyyennZrddr9D8BXqH3D2ID/gXH2O7UAGDTgAAAAABJRU5ErkJggg==' /%3e%3c/svg%3e\" width=\"2560\" alt=\"longhorn pvc pihole\" data-srcset=\"/assets/static/longhorn-pvc-pihole.82a2fbd.7ec8bab0115c15eb165ad023327d3094.png 480w, /assets/static/longhorn-pvc-pihole.cbab2cf.7ec8bab0115c15eb165ad023327d3094.png 1024w, /assets/static/longhorn-pvc-pihole.2665e34.7ec8bab0115c15eb165ad023327d3094.png 1920w, /assets/static/longhorn-pvc-pihole.42db587.7ec8bab0115c15eb165ad023327d3094.png 2560w\" data-sizes=\"(max-width: 2560px) 100vw, 2560px\" data-src=\"/assets/static/longhorn-pvc-pihole.42db587.7ec8bab0115c15eb165ad023327d3094.png\"><noscript><img class=\"g-image g-image--lazy g-image--loaded\" src=\"/assets/static/longhorn-pvc-pihole.42db587.7ec8bab0115c15eb165ad023327d3094.png\" width=\"2560\" alt=\"longhorn pvc pihole\"></noscript></p>\n<p>If we click on the volume in Longhorn we can see it's replication status and details.</p>\n<p><img class=\"g-image g-image--lazy g-image--loading\" src=\"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 2560 725' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-5f4d86b3ece7dfa667fc530832f9d0cc'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-5f4d86b3ece7dfa667fc530832f9d0cc)' width='2560' height='725' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAASCAYAAADrL9giAAAACXBIWXMAAAsTAAALEwEAmpwYAAAEuklEQVR42tVYW4/aRhTm//%2bL9qWt0qoPrdSHKmrVKG2yabguZFlYYJfbYsB3G9vAnn7f4KFer03IqpWSkY7mwvGZM9%2b5zVAZTabSH93KcDyRu9kc/Vh6w6F0b27Qj9RY0WCo%2bPpYG4H3qn%2bjqNO9lunCkKVli2FaXwQtSGtTDOhcuV%2btZWYYMl%2bu5DBeqgNN7hdqrPsZ1rjOMXk1z3h%2br4SubOeLIcv1xPZ8pXdliQVFQENROl/l%2bkdkPRZoZKyv5Rjm5%2bsRXhBIFMfS/nAlFReTMIqwkKg%2b3ICi%2bDD%2bRNpAKOXZnicbyFAUP0/W/008b6vdkUqUJDKbzWQ6mcj47k4GiP04juS5bbvbSYAN1quV9Ho9Wa/X8rm2zhU8gEg8PDzIDorv93tFnD%2bH2BbLpbh%2boMZ67b9unyq3TFcVAnGyFRJdP4LlfN%2bHB8SPPiwTkhfIvgurMwTY5vO58qq7EzQajcR1XWUAzk/x397eyhhVikaybfsw/wg/dcgDp/uOBiBCrNquL2EYiuM4qi9Dr8gCxzn6HkLIQYZlazab8ufbC6nW6tJoNOTy8lLa7baiVqslnU5H6vW6LOE12%2b1W3l5cyJt37xV/s9k48pL0t/yOYPFgr17/JX9X61Kr1dR6lpeyuXZ9fX0uAB4OvhEHve%2bH4icbsRP/LPfLA6A9oArFvvr2hfz88g95X2uoQxEITQSoWq0qAGjVl7/9Ll9/94P8%2buqN1BuPeTXxUMwzi8VCvvn%2bR3nx0y/y%2bh0AKJBNcPMAZA35LwDIA5aDgwcbcWE9x3HFDly5D03xfACDmDZ8S8zYPekBOgS0B9ANO50P0oY1bgBMv99/Qt1uV7kzPYA8l7DgFZJTET%2bTKtfpAaa5Vt%2b2YO0iuSQenjqUAZDmgETlAALgeoF4ngvhpjhQKtklKhxClDY/CiXCvAwAvWYDPJbCPF92cx7gY56leXVifvqblPKfMlCpB5i2iwvCRkxcciwcgj0T47kZWK9TnheET4BhbmHCI02n0%2bOhSqsJXHyIKziJBilNxFgnoEx4lE2Le2kIFuWu7HzNq3AM1%2bOFhdY3LdyS4O7b3f5QFdISeU4S1Gu8%2bOQB0L8l8DZWmVPlKSub3sfKdC4/D14GbJE%2b1PPoAYxbui8VzLpo/uNTdZYtygCgleHBJ7hoaQsNBgNZ4aJUdhiWRVpUW5U917TMvC7aW1gitYfpUp4NiSf7wNhHAFgGGQJ%2bECgkA/QJvOOcO0AZAFyj4hpUKsOegBTeIrEfQ4V769gnb1HOYCMf5fOwOreQv7RM5%2bYpAIlSmiFAEFgJmJVZmih8m4Jw7u0sGwK0CGsyszU9IEv8jZalN%2biLEDM3%2bZnpi/hpZXoQeakjaz2JcvL82tN4X8gbak9daRwCQCvHaQi4qP8B7gKui0SIfECiNxDhaLORBH3MhwTHBA5j9lmQ%2bLbw04sUlVQEOXwT5InJjW8GyqG1dfWxLLOUn8RDMD9YKb9ZxJv29KiyxmpVobJEYqWyvycm7wCwyJoA4KnLfoWNDChq8qkLoWqMjY3l6sCHTWh5lUzVa9BX84QumRITayHh4ASN/Jwf%2bPel/PyN%2bzB0Nf/2JP8ufd1m6fBy5f8C/wBWg0iNTehRfwAAAABJRU5ErkJggg==' /%3e%3c/svg%3e\" width=\"2560\" alt=\"longhorn pihole pvc details\" data-srcset=\"/assets/static/longhorn-pvc-pihole-details.82a2fbd.50ea86500824c9c46012842a8dd7ebcf.png 480w, /assets/static/longhorn-pvc-pihole-details.cbab2cf.50ea86500824c9c46012842a8dd7ebcf.png 1024w, /assets/static/longhorn-pvc-pihole-details.2665e34.50ea86500824c9c46012842a8dd7ebcf.png 1920w, /assets/static/longhorn-pvc-pihole-details.42db587.50ea86500824c9c46012842a8dd7ebcf.png 2560w\" data-sizes=\"(max-width: 2560px) 100vw, 2560px\" data-src=\"/assets/static/longhorn-pvc-pihole-details.42db587.50ea86500824c9c46012842a8dd7ebcf.png\"><noscript><img class=\"g-image g-image--lazy g-image--loaded\" src=\"/assets/static/longhorn-pvc-pihole-details.42db587.50ea86500824c9c46012842a8dd7ebcf.png\" width=\"2560\" alt=\"longhorn pihole pvc details\"></noscript></p>\n<p>Perfect! They are both there! We can now work on our pihole values. I'm going to break this up and show the parts I have changed. You will want to verify all the information for yours.</p>\n<pre class=\"shiki\" style=\"background-color: #ffffff\"><code><span class=\"line\"><span style=\"color: #D32F2F\">dualStack</span><span style=\"color: #D32F2F\">:</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">  </span><span style=\"color: #C2C3C5\"># -- set this to true to enable creation of DualStack services or creation of separate IPv6 services if `serviceDns.type` is set to `&quot;LoadBalancer&quot;`</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">  </span><span style=\"color: #D32F2F\">enabled</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #1976D2\">false</span></span>\n\n<span class=\"line\"><span style=\"color: #D32F2F\">dnsHostPort</span><span style=\"color: #D32F2F\">:</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">  </span><span style=\"color: #C2C3C5\"># -- set this to true to enable dnsHostPort</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">  </span><span style=\"color: #D32F2F\">enabled</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #1976D2\">false</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">  </span><span style=\"color: #C2C3C5\"># -- default port for this pod</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">  </span><span style=\"color: #D32F2F\">port</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #1976D2\">53</span></span>\n\n<span class=\"line\"><span style=\"color: #C2C3C5\"># -- Configuration for the DNS service on port 53</span></span>\n<span class=\"line\"><span style=\"color: #D32F2F\">serviceDns</span><span style=\"color: #D32F2F\">:</span></span>\n\n<span class=\"line\"><span style=\"color: #24292EFF\">  </span><span style=\"color: #C2C3C5\"># -- deploys a mixed (TCP + UDP) Service instead of separate ones</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">  </span><span style=\"color: #D32F2F\">mixedService</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #1976D2\">false</span></span>\n\n<span class=\"line\"><span style=\"color: #24292EFF\">  </span><span style=\"color: #C2C3C5\"># -- `spec.type` for the DNS Service</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">  </span><span style=\"color: #D32F2F\">type</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #22863A\">LoadBalancer</span></span>\n\n<span class=\"line\"><span style=\"color: #24292EFF\">  </span><span style=\"color: #C2C3C5\"># -- The port of the DNS service</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">  </span><span style=\"color: #D32F2F\">port</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #1976D2\">53</span></span>\n\n<span class=\"line\"><span style=\"color: #24292EFF\">  </span><span style=\"color: #C2C3C5\"># -- `spec.externalTrafficPolicy` for the DHCP Service</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">  </span><span style=\"color: #D32F2F\">externalTrafficPolicy</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #22863A\">Local</span></span>\n\n<span class=\"line\"><span style=\"color: #24292EFF\">  </span><span style=\"color: #C2C3C5\"># -- A fixed `spec.loadBalancerIP` for the DNS Service</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">  </span><span style=\"color: #D32F2F\">loadBalancerIP</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #22863A\">&quot;192.168.1.201&quot;</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">  </span><span style=\"color: #C2C3C5\"># -- A fixed `spec.loadBalancerIP` for the IPv6 DNS Service</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">  </span><span style=\"color: #D32F2F\">loadBalancerIPv6</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #22863A\">&quot;&quot;</span></span>\n\n<span class=\"line\"><span style=\"color: #24292EFF\">  </span><span style=\"color: #C2C3C5\"># -- Annotations for the DNS service</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">  </span><span style=\"color: #D32F2F\">annotations</span><span style=\"color: #D32F2F\">:</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">    </span><span style=\"color: #D32F2F\">metallb.universe.tf/address-pool</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #22863A\">default</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">    </span><span style=\"color: #D32F2F\">metallb.universe.tf/allow-shared-ip</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #22863A\">pihole-svc</span></span></code></pre>\n<p>To go over my changes, I set dnsHostPort to true, disabled mixed service, set LoadBalancer to the type, set the IP from the range we configured before (I want to ensure this stays the same no matter what), and annotated the svc and the address pool for metallb. Let's keep going. I don't want DHCP so I'm skipping over that part. For the web service...</p>\n<pre class=\"shiki\" style=\"background-color: #ffffff\"><code><span class=\"line\"><span style=\"color: #C2C3C5\"># -- Configuration for the web interface service</span></span>\n<span class=\"line\"><span style=\"color: #D32F2F\">serviceWeb</span><span style=\"color: #D32F2F\">:</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">  </span><span style=\"color: #C2C3C5\"># -- Configuration for the HTTP web interface listener</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">  </span><span style=\"color: #D32F2F\">http</span><span style=\"color: #D32F2F\">:</span></span>\n\n<span class=\"line\"><span style=\"color: #24292EFF\">    </span><span style=\"color: #C2C3C5\"># -- Generate a service for HTTP traffic</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">    </span><span style=\"color: #D32F2F\">enabled</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #1976D2\">true</span></span>\n\n<span class=\"line\"><span style=\"color: #24292EFF\">    </span><span style=\"color: #C2C3C5\"># -- The port of the web HTTP service</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">    </span><span style=\"color: #D32F2F\">port</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #1976D2\">80</span></span>\n\n<span class=\"line\"><span style=\"color: #24292EFF\">  </span><span style=\"color: #C2C3C5\"># -- Configuration for the HTTPS web interface listener</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">  </span><span style=\"color: #D32F2F\">https</span><span style=\"color: #D32F2F\">:</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">    </span><span style=\"color: #C2C3C5\"># -- Generate a service for HTTPS traffic</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">    </span><span style=\"color: #D32F2F\">enabled</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #1976D2\">true</span></span>\n\n<span class=\"line\"><span style=\"color: #24292EFF\">    </span><span style=\"color: #C2C3C5\"># -- The port of the web HTTPS service</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">    </span><span style=\"color: #D32F2F\">port</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #1976D2\">443</span></span>\n\n<span class=\"line\"><span style=\"color: #24292EFF\">  </span><span style=\"color: #C2C3C5\"># -- `spec.type` for the web interface Service</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">  </span><span style=\"color: #D32F2F\">type</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #22863A\">ClusterIP</span></span>\n\n<span class=\"line\"><span style=\"color: #24292EFF\">  </span><span style=\"color: #C2C3C5\"># -- `spec.externalTrafficPolicy` for the web interface Service</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">  </span><span style=\"color: #D32F2F\">externalTrafficPolicy</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #22863A\">Local</span></span>\n\n<span class=\"line\"><span style=\"color: #24292EFF\">  </span><span style=\"color: #C2C3C5\"># -- A fixed `spec.loadBalancerIP` for the web interface Service</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">  </span><span style=\"color: #D32F2F\">loadBalancerIP</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #22863A\">&quot;&quot;</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">  </span><span style=\"color: #C2C3C5\"># -- A fixed `spec.loadBalancerIP` for the IPv6 web interface Service</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">  </span><span style=\"color: #D32F2F\">loadBalancerIPv6</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #22863A\">&quot;&quot;</span></span>\n\n<span class=\"line\"><span style=\"color: #24292EFF\">  </span><span style=\"color: #C2C3C5\"># -- Annotations for the DHCP service</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">  </span><span style=\"color: #D32F2F\">annotations</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> {}</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">    </span><span style=\"color: #C2C3C5\"># metallb.universe.tf/address-pool: default</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">    </span><span style=\"color: #C2C3C5\"># metallb.universe.tf/allow-shared-ip: pihole-svc</span></span></code></pre>\n<p>This is pretty self explanatory. I set ingress to false and kept moving until I found the persistent volume claim information...</p>\n<pre class=\"shiki\" style=\"background-color: #ffffff\"><code><span class=\"line\"><span style=\"color: #C2C3C5\"># -- `spec.PersitentVolumeClaim` configuration</span></span>\n<span class=\"line\"><span style=\"color: #D32F2F\">persistentVolumeClaim</span><span style=\"color: #D32F2F\">:</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">  </span><span style=\"color: #C2C3C5\"># -- set to true to use pvc</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">  </span><span style=\"color: #D32F2F\">enabled</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #1976D2\">true</span></span>\n\n<span class=\"line\"><span style=\"color: #24292EFF\">  </span><span style=\"color: #C2C3C5\"># -- specify an existing `PersistentVolumeClaim` to use</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">  </span><span style=\"color: #D32F2F\">existingClaim</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #22863A\">&quot;pihole&quot;</span></span>\n\n<span class=\"line\"><span style=\"color: #24292EFF\">  </span><span style=\"color: #C2C3C5\"># -- Annotations for the `PersitentVolumeClaim`</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">  </span><span style=\"color: #D32F2F\">annotations</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> {}</span></span>\n\n<span class=\"line\"><span style=\"color: #24292EFF\">  </span><span style=\"color: #D32F2F\">accessModes</span><span style=\"color: #D32F2F\">:</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">    - </span><span style=\"color: #22863A\">ReadWriteOnce</span></span>\n\n<span class=\"line\"><span style=\"color: #24292EFF\">  </span><span style=\"color: #D32F2F\">size</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #22863A\">&quot;500Mi&quot;</span></span></code></pre>\n<p>We need to match this up with our volume we created earlier. Now I leave everything the same until we get to the password section and extra vars...</p>\n<pre class=\"shiki\" style=\"background-color: #ffffff\"><code><span class=\"line\"><span style=\"color: #C2C3C5\"># -- Use an existing secret for the admin password.</span></span>\n<span class=\"line\"><span style=\"color: #D32F2F\">admin</span><span style=\"color: #D32F2F\">:</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">  </span><span style=\"color: #C2C3C5\"># -- Specify an existing secret to use as admin password</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">  </span><span style=\"color: #D32F2F\">existingSecret</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #22863A\">&quot;pihole-secret&quot;</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">  </span><span style=\"color: #C2C3C5\"># -- Specify the key inside the secret to use</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">  </span><span style=\"color: #D32F2F\">passwordKey</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #22863A\">&quot;password&quot;</span></span>\n\n<span class=\"line\"><span style=\"color: #C2C3C5\"># -- extraEnvironmentVars is a list of extra enviroment variables to set for pihole to use</span></span>\n<span class=\"line\"><span style=\"color: #D32F2F\">extraEnvVars</span><span style=\"color: #D32F2F\">:</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">  </span><span style=\"color: #D32F2F\">TZ</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #22863A\">&quot;America/Cancun&quot;</span></span></code></pre>\n<p>You can put your password directly into the yaml but I like to use secrets and not have passwords stored in clear text. You can configure yours how you choose but here is how I created my secret:</p>\n<pre class=\"shiki\" style=\"background-color: #ffffff\"><code><span class=\"line\"><span style=\"color: #24292EFF\">kubectl create secret generic pihole-secret \\</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">    --from-literal=</span><span style=\"color: #22863A\">&#39;password=&lt;ADMIN_PASSWORD&gt;&#39;</span><span style=\"color: #24292EFF\"> \\</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">    --namespace pihole</span></span></code></pre>\n<p>As we continue through the values, I set DNS based on my local one as well as cloudflare at 1.1.1.1. Next I enabled cloudflared</p>\n<pre class=\"shiki\" style=\"background-color: #ffffff\"><code><span class=\"line\"><span style=\"color: #D32F2F\">doh</span><span style=\"color: #D32F2F\">:</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">  </span><span style=\"color: #C2C3C5\"># -- set to true to enabled DNS over HTTPs via cloudflared</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">  </span><span style=\"color: #D32F2F\">enabled</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #1976D2\">true</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">  </span><span style=\"color: #D32F2F\">name</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #22863A\">&quot;cloudflared&quot;</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">  </span><span style=\"color: #D32F2F\">repository</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #22863A\">&quot;crazymax/cloudflared&quot;</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">  </span><span style=\"color: #D32F2F\">tag</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #22863A\">latest</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">  </span><span style=\"color: #D32F2F\">pullPolicy</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #22863A\">IfNotPresent</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">  </span><span style=\"color: #C2C3C5\"># -- Here you can pass environment variables to the DoH container, for example:</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">  </span><span style=\"color: #D32F2F\">envVars</span><span style=\"color: #D32F2F\">:</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">    </span><span style=\"color: #D32F2F\">TUNNEL_DNS_UPSTREAM</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #22863A\">&quot;https://1.1.1.2/dns-query,https://1.0.0.2/dns-query&quot;</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">    </span><span style=\"color: #D32F2F\">TZ</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #22863A\">&quot;America/Cancun&quot;</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">  </span><span style=\"color: #C2C3C5\"># -- Probes configuration</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">  </span><span style=\"color: #D32F2F\">probes</span><span style=\"color: #D32F2F\">:</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">    </span><span style=\"color: #C2C3C5\"># -- Configure the healthcheck for the doh container</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">    </span><span style=\"color: #D32F2F\">liveness</span><span style=\"color: #D32F2F\">:</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">      </span><span style=\"color: #C2C3C5\"># -- set to true to enable liveness probe</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">      </span><span style=\"color: #D32F2F\">enabled</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #1976D2\">true</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">      </span><span style=\"color: #C2C3C5\"># -- defines the initial delay for the liveness probe</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">      </span><span style=\"color: #D32F2F\">initialDelaySeconds</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #1976D2\">60</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">      </span><span style=\"color: #C2C3C5\"># -- defines the failure threshold for the liveness probe</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">      </span><span style=\"color: #D32F2F\">failureThreshold</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #1976D2\">10</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">      </span><span style=\"color: #C2C3C5\"># -- defines the timeout in secondes for the liveness probe</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">      </span><span style=\"color: #D32F2F\">timeoutSeconds</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #1976D2\">5</span></span></code></pre>\n<p>From here we have dnsmasq section where I recommend adding in all of our nodes. You can also do this later via the web interface. It's up to you. Both ways work great! Finally the last section</p>\n<pre class=\"shiki\" style=\"background-color: #ffffff\"><code><span class=\"line\"><span style=\"color: #D32F2F\">podDnsConfig</span><span style=\"color: #D32F2F\">:</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">  </span><span style=\"color: #D32F2F\">enabled</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #1976D2\">true</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">  </span><span style=\"color: #D32F2F\">policy</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #22863A\">&quot;None&quot;</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">  </span><span style=\"color: #D32F2F\">nameservers</span><span style=\"color: #D32F2F\">:</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">  - </span><span style=\"color: #1976D2\">127.0.0.1</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">  - </span><span style=\"color: #1976D2\">192.168.1.1</span></span></code></pre>\n<p>Once we have all of these configured, save the file and let's double check out secret in Rancher or via kubectl. Then deploy our PiHole instance!</p>\n<pre class=\"shiki\" style=\"background-color: #ffffff\"><code><span class=\"line\"><span style=\"color: #24292EFF\">kubectl get secrets -n pihole</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">kubectl get pvc -n pihole</span></span></code></pre>\n<p>Alright, we look good, let's deploy!</p>\n<pre class=\"shiki\" style=\"background-color: #ffffff\"><code><span class=\"line\"><span style=\"color: #24292EFF\">helm install pihole mojo2600/pihole \\</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">  --namespace pihole \\</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">  --values pihole.values.yml</span></span></code></pre>\n<p>We can watch this deployment with</p>\n<pre class=\"shiki\" style=\"background-color: #ffffff\"><code><span class=\"line\"><span style=\"color: #24292EFF\">watch kubectl get all -n pihole -o wide</span></span></code></pre>\n<p>Once everything is done we can verify our ingress</p>\n<pre class=\"shiki\" style=\"background-color: #ffffff\"><code><span class=\"line\"><span style=\"color: #24292EFF\">kubectl get ingress -n pihole</span></span></code></pre>\n<p>Now we just add our DNS info like we did for Rancher. We are good to go!</p>\n<p><img class=\"g-image g-image--lazy g-image--loading\" src=\"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 2560 1775' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-d33d4a3d0e85f738ce053d8c87e35c98'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-d33d4a3d0e85f738ce053d8c87e35c98)' width='2560' height='1775' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAsCAYAAADVX77/AAAACXBIWXMAAAsTAAALEwEAmpwYAAANYElEQVR42u1a%2b3McxbVeFyAbA5GxsY0s23rs7LxnZ3ZnZnfnsavVSqu3ZOQXOEBiC9tYBhcGYjAY2xDZQBJDQmKKR9nBJNyQqlTdqpCQVFLcR6VS%2bSGVH/IffTmnZ3e1EorBMje3uL4/fHt6Hj3d5%2bvT55zu3pTrusjn8/B9H0EQoFgswHXz4l7zGUvLsmAYBkyTYSZoXf8rYV4X3EfP81AplzEzM4Pp6WnMMGamqTyFvXv3Yv%2b%2bfdizZw9mZ2eRYgUTAgoIwhDFUkAKe8jlcsg7DsEWH7SyNgxuhIjQqRFN00XZMP81MBtStK3r0HVDgMsCWgJV1ZC1bRSKRYyOjmF8fBwj4xMYJYyMjmJicgrTRAyTMzU1hVQmk4EkSchoJmTThmxkoZgO9GIVejAEPR6FYntQ6Z6WzYtnWbcILyiLspbNQb0erBw0i8v5Lw1%2bn7%2b7HDrB8UtwSxFyfoBcIYQfVui6jEI0QKiiVB4U124pFs8zOvXX05HNG4QSbK%2bEjGoInRmCAAHFhKbmoBgOkWBDyYfQoxEYgzNQnQJkPSFG0iw49JGoUoNEdRTdFpAbMilnIWtZITMNyLoFheoq%2biJkrR1mIhvvS/SdNHWepUQy3ZBZL0S%2bVElkUEVQHUGpMoSoNopoaBzl%2bgRKdC%2bsjaFI93eaOQyRfrWMTIMaC3K4LTHodD8lyzLktIyMq2NH1YLEpk6jYNo02jp1StWJFFsoLzek5ZagugWohSI0Aku9UFosFwNYQQSzFMIu0mgVIhjUabU0AI2gNmCQAlY4CJMR1QRs6qBD77vFEk1Hj0w5QbEh/QLJkk/PCgI5mrqmF9DoUpn67BByjkdTl/wXSZ/66fshCmwtZLkuvWvQfVaedU/JCinfK6En0lF4vgvqoIx8cRBju2aJ5RL6VSKlOYo0RTSyECOOcf9cDduODGPb4SF0H6lj86EB3P9YDV10f8NDAdbuzuOOAx52TIbwKqPYevI1dJ97B10v/gTdL13GtjOX0fncj9Dx9CWse%2bp7WDf/Xdzx7A%2bxZe55%2bETOD44q%2bNVpCb84JeOXz6v4%2bDlZ4KNnenDl2Ca8ffg%2bfPjERrz52E545RqOxwEuDwd4YzjCpWoRbw6H%2bGE9wuuDJZxzNZzNKThPOOebKNI0SjctQKGfXiIh2pnGpx134uSmLXBiHSOTwxiieTVUrWGgPo5oYEj4AJXMUCmHWH8kwsb5Qaw/HOKeo2WSETbR9eYjdO9ggNS0htR%2bE5tnaGQq4%2bh88W10XvwZ7l24hq2v/RxbCOvOX0HqzPtInbyE1NGXkXr6Tdxz7Dy8YgUfnOjGf73cjd%2bf6cIfz%2b3AH85247NX%2bvGLp7bigyPrcOXwelw7shbXjm9EoTyA75Ty%2bCDO4v2qi/fKObxfIZQdXIocLGT7sWD24BWjh8pphF4BfURAYgFEQJpgZRRc3bABx7t2kDMxsGtmFAPDExgem8QgETAwNAqNzEs3cpCjAD1PTWDL/BCmL51E/bV5KKcopOwhpWcIeyys2WUitdfE/VMFZMuj6Dn/Doav/hZdFz5A6pm3kDp1Gann38aaUz9G6vgFrDl6Dqn5BXTOnSbzL%2bPq0yo%2bW5Dx32/V8ed3ZvD78xJ%2bOX87fvzonaT83fjo%2bN348PH1ePfoZvhxBaeqMT498Riu7RnD1ckqPv7WPvz6qaN41dexQIp/z5FwwerDy3aGCCgKnYUFCAdIbOyUNQohBpm8if4shRkKgxo5EJ2U5gigUHRI0/NMxkAfzcH8uYcx86Nn8PC7L2HuyisIF%2baQOmAhNcsg5fdliQgDW3cVaW6Pwvr%2bh9j18We455WfIvXCuzTy7yWj/xwRcey7ZAHniYiLZE1n4ZIP%2bOi0hb9f242/XTuAv16ZxV8u1/DJybW4eoSUPnQnfn5sPX72%2bFq8d3QT/KiMF2pl/Onss/gNKf27Z4/jV9/ei989fQxvDHh4Wd2Oi6S8sAB70QJaTpA9Yk8fkSAp6CMi%2biQdPZKKHXSvu6cf23sZaWzvS6OnNwON8oW1D/lY/0gJqd0m1uxzcPuDeXTQnO940EXHrIO1szncdsDF9ilyPpUx3PXEgjDxO2jOdzzzxiJo3nc8%2bSo6Dp/BbccXcN%2bhU/DJOX7/0A58fKIT147dg2s00h/OfwMfndiIn85vxFsH78XluY34tyc34M25bvIxNTzu5/C62YtXKeS9XjBw0cngApn%2beRrxlxwZZxlUPkvOvkAW0N8koJkH9NEUyJFzUC1bQCGH16/oCSFNZFQhc2SidlSBTl4%2bG5bJ48eLCGPy6g1JkcCm0MNhy4mHYFfqCcoNNMuVkRZy0SCFN47pZcTlCFE5RlyJhYzoOq5EKFcSySjSezkizA8qCAkBxf8SIaA8JRD3yksQhFXYlENkmnlAMyGQKNxNkucPylWElUFKKKrk%2bS2hsCBCSUjop2mQpVDikmIhxVluuBglHeB7HoUxvi6EAyjFgyJRsShEcShVvwQ4zIqQS8iQv/kiyDRNm%2b9zeTkyAk5LqllXJHLpdHqpBaRJSf5QM3GRKFlgAjJtyQxfcy6QpbjKSnG25RKrPkWLfCkWyFHc53uchfFzj4gxc34rh5C/AMoS2NeB0yavDzlL0nKSQaBIxgRIy6cAO7mRqQcQ0HzijsvGyh/n1JYJyFIyxAqL/MCwW2hPmJr3RDrMKe7/AjhqmRlK7jQnSbNtt0FAuhEGG06Q1wI6ZUjtHV8JrIzl0hSgka1QeBSN0Ee/COK9Zsf42s4vuaffILgOZ3TcZ81xk286DdhJG4aeQ%2b8o5SkvTqB7/4AggZ9b%2bRUsgHP1wdFJsZhgK%2bAGVhpRQQD5gDzN9bg28vnR5bDpEBoKtku%2bL5Q1kxAr6tpL62kr1bM/P7I8mjopY9AIG6ojvsnSVChbteh5jp4pDroeHUTqP%2bfQ%2bcIkTClL9z1KmxMCFEVZdIJsAQo7jjZlm%2bbdmksNAtgJOjTHY1qAiA7wKDdGwzTzsDO0XtDzomzRAsuwiHWN6smOeFct%2bFB9n9YcLkwj35L8nOuIenpyn%2bsxuB5fC9koW7RKlSjd7dlVgRIVKT0fwub5EfF9/pbdb6P7m0TAJ49i43cmkJXstinQsgBJeESNnMTU7H4UyQKK5L0DSn2jwfpSB9ZGAH8kqA5DiguCbWadR2DndIw7L83i/m/TajEsYOcU%2bZOiTyNRw33HR9BXD3D7u/vQ8dZuyJ4LaaAExaM1w2wFnWemRH2u1zsSQPY9bN9dwfY9tJDKu1BcV0iVRp6fGdTmXa89gNQfD6Lr4UGsubofqX9/BL3jlJafGMW2h6roeoQI%2bI9D6Dw9ISwsExSEBTRXwUssQCNWWcF2LJ8CbCU2ZWqscI5ygK2HiYQyhZVqCVLgIz1VwZYfPIi%2bh4fRdaCK9a8/gJ6JpEN3XdxFBIS0LpjEvTQiPHqbSG7fOyDm6DoijonYerCGb7w0iT5a3HSenhTvM1Hb5obRQ8/7awG2PF6HNF7GjoN1bDg/g/6xCMoTu6A8uxsSLYTWX5zBpidH0D8e474Lu9HzYA07qJ3emQrsrA%2bpMfWXECAbKzvA9inQJKA1RdTGup9CEkOhay1tQlVozU8rSVUyxTuK3ChrVCZpkolzvqDR4irD%2bwT0vkr1uI7SeJ/fVTOWgGij1ackLHsUfl03pOW8AYXe1WRCplGP2uBvKKKcfFPm/hhOawq0NkQWfYCzYvhb7gw5E%2bQ9ATNHa3HKB4RswKBrw00kPzPI3BK5vNyo2wbDLS6W26SxrI2V2lv%2bXW6rVW70x6D32YHzrlDLBzSZkK9DwHIiOLUtlCkLjGtfOxTKw3A4FV6yGmTcIAH8MY/y9q8bfBo4JuCGpsD/VQKWJEKrJeDrZP5NAng1KC1fDN1SBHhf4RT4fwK%2bpgQsiQK3tAUsXQzdKgSskAjdalGgdTJ0q4bBlg8QZ4OEW88HpD%2b/I3RLTgHeFrrVUmG2gM9ti2fUGyCADy6%2botVgQazQhkTHGIV/gq9sNVjh1WCYWP1qnaDYEyzG4hzfKcQ3gQhZkrzN7vA6nbfbm/CWlm%2b%2brUZ/i2WxzXfDy%2bHle/03Cz6kSBsOSrqBKF%2bAVKjC8CJxPMertXzjjxXNMv9tRl52BrFaSKqxOAXazwW%2brAXcDJJTp8UtLpNg5YpQgyFkQ/IrcVX8jcXjUydBQigsQ7bykIgwyUwgr6r9pP%2bsa9PyVzUFVguuz9tYPKq8PcVKGboJkxyxbzuYHK6jXhkQ/0UIh8fhhFUo/B71zTEsOKaFHMElaPyHrhs4Hmvvf6b9P0I3kgneLPjbfOw2MDwmHJKcDzFT8rG/4GC66GGv72A8mxxf1weq8ChlzZNvmLFU7DclDJkqJkwFk6aMrMkWtEoC%2bF9iq9kPuBnFW423HbbyX9/ioTGUqnWSo%2bKcQfZiWPTehJZGXZcxTJgyJASGjrQ4MXbEVJAbyifyRi3AWLoj9GX3BL8KIpb4A7rm6ZD8xy85Tg/F4WwEO6ohW51EtjyCbFyH7setv%2bo1T4jlm7CAVTnB/wlClh6ueosHqVQWW9u5ZDubj7QW%2b5ZEkVX7gMYfJVn3fwAA686hh3pclwAAAABJRU5ErkJggg==' /%3e%3c/svg%3e\" width=\"2560\" alt=\"pihole\" data-srcset=\"/assets/static/pihole.82a2fbd.3d0118d98ece54f58adb02759e32f03f.png 480w, /assets/static/pihole.cbab2cf.3d0118d98ece54f58adb02759e32f03f.png 1024w, /assets/static/pihole.2665e34.3d0118d98ece54f58adb02759e32f03f.png 1920w, /assets/static/pihole.42db587.3d0118d98ece54f58adb02759e32f03f.png 2560w\" data-sizes=\"(max-width: 2560px) 100vw, 2560px\" data-src=\"/assets/static/pihole.42db587.3d0118d98ece54f58adb02759e32f03f.png\"><noscript><img class=\"g-image g-image--lazy g-image--loaded\" src=\"/assets/static/pihole.42db587.3d0118d98ece54f58adb02759e32f03f.png\" width=\"2560\" alt=\"pihole\"></noscript></p>\n<h3 id=\"unifi-network-application\"><a href=\"#unifi-network-application\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Unifi Network Application</h3>\n<p>This, I know, doesn't apply to everyone. Personally, I use Ubiquiti switches, access points, gateways, and cameras. That means having either this software installed on my workstation, a server, or in k3s how I'm going to. Previously, I've ran this in docker but if it goes down I'm unable to configure any of my devices or manage my network. Our HA k3s cluster seems perfect! </p>\n<p>First things first, let's prep our environment. In the Network project I'm going to create a new namespace called unifi.</p>\n<p><img class=\"g-image g-image--lazy g-image--loading\" src=\"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 2560 786' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-84121778570eb79466f0634e58898836'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-84121778570eb79466f0634e58898836)' width='2560' height='786' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAUCAYAAAA9djs/AAAACXBIWXMAAAsTAAALEwEAmpwYAAAELklEQVR42t1XyY7bRhDVDzgYjTZuzSYpkhIlkaNlRssssT1JDMMTIHAujg/%2bgdz8H7nk5ORvcg6QbyrXa7I51CySYsmA7cNDL6Kqql/X1jXbdsmxZQnb9si0JBmmq0bhdskRwTeLmswuSY6WCu5oRUEypbP5ii4un9NkulBEWEzKt4qaiDISUUqyNyG3NyYvHNJgkFF2MqN%2bkiqPcIRPjrMddgVagX1n/0tDTQZ9EjImW4Rku0BEJs8Np6tGx%2bvtBJtlOD7L8mLyvIjCaKDgylCF0Tbgu03AN5JlYw7X3fb9LvJUCAyGEwr8mI6OWtRoGNQ47uRjgWNe74Y2NVu2IgME9PopIyOXSRWiclixfnBH5HtVr7kLHa9ZdkrT2ZI8thf5aR/Xh32S7axFPZ74PWobLhmWRx2zCvm/YNhsKN8SjK3eLBQ9BFfyKPP5pkSlbwtGp9mMumGyRsynoPQAGG2yu%2bfuXwEbhsOIHeBocBhYiK3PEPtWUZ06Rp6UHSc4TA5wOQcgBPygpwD39XntMkMmSiHDMAUZhijmLhshyj2MFtxRY5%2bsXJWzTabal4//ZyuKKuCFI4p7I4riHGE8VCPcEh9MpnNarq5osbyk%2beKCzi%2beqhH7s9Mll8tnijhFStE/aHzpVUAR0DQ41oOU2m6fWoyOn1LT9Om43lY3jJg7PTun8WROJ%2bNT1Rvg4FhjDqTZVJHYTzIaDMdqxF7Q7T1Kgo7F6u%2bPecahDgx95Vr3AY2mydnboiZGhXyOCoBbRSkbjiblAZGAcOMYg25fIWKvwRrfYq5HZOv8oN17CUiHki5rOilBtpYbdJOKjH2Qy8Y5q7pyAvigzQK69FUJ8LhCICRirhYwyCpbZalGs3T7dffXrfRDtwlDrr6/plevflHfgDBtJOb95ISiKCcSBOzb7emW/s1v74ryF98hoLz9W2AfIYA/Vt1n39vQt496vjp/qubVxkTrqRK2r07IgI7rH14qD6uG30YC4AFIhvgTxl06um3ATcMYeEGdGyjMYaAmwKtUpF27yN30BvTku8a9/LOVALh9MjhROeAQCQmKW22bzvn2f3pxo/aQLzQ5MYdbMhgrfdg7hE7IgKzXv75RIYCwXiPgQfDtGEWSylkMD/L8hCw0M4vlFT17/kKFgPauagf5Sa5fkLi2LuRCx83Pr7nMj1Tz5nrILdwI4TbaD6DVtj7bUxiHg15UIMz37etvmyj3tkECYD/2uFmDjnq9Re2jOrUYGM2OTTVt0D2BG%2bryoUiwD6UD3uInJMKUnO6IbLxOGeqpz3uCn/pYy2RGk9//pNX7DzR//zf5i5e3BNzDV/CWL%2b2Euwf89O7PSMRjRQbgJme8NyU5mKunukxXdPHHP3Tz17/044f/KLx%2bu8EDviaACDzgRPGoQ%2bnDvESQ76vvIjIZFsPmB9VHJPfMvyoe1s8AAAAASUVORK5CYII=' /%3e%3c/svg%3e\" width=\"2560\" alt=\"create unifi namespace\" data-srcset=\"/assets/static/unifi-namespace.82a2fbd.4386cad4cb0ebc90e15afee0a7fdb1fe.png 480w, /assets/static/unifi-namespace.cbab2cf.4386cad4cb0ebc90e15afee0a7fdb1fe.png 1024w, /assets/static/unifi-namespace.2665e34.4386cad4cb0ebc90e15afee0a7fdb1fe.png 1920w, /assets/static/unifi-namespace.42db587.4386cad4cb0ebc90e15afee0a7fdb1fe.png 2560w\" data-sizes=\"(max-width: 2560px) 100vw, 2560px\" data-src=\"/assets/static/unifi-namespace.42db587.4386cad4cb0ebc90e15afee0a7fdb1fe.png\"><noscript><img class=\"g-image g-image--lazy g-image--loaded\" src=\"/assets/static/unifi-namespace.42db587.4386cad4cb0ebc90e15afee0a7fdb1fe.png\" width=\"2560\" alt=\"create unifi namespace\"></noscript></p>\n<p>Once created we can go ahead and begin creating our app. Click on Workload and select StatefulSets then click the Create button.</p>\n<p><img class=\"g-image g-image--lazy g-image--loading\" src=\"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 2560 660' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-d8ff92bb7539d7f6871577e44040c271'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-d8ff92bb7539d7f6871577e44040c271)' width='2560' height='660' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAARCAYAAABtu6qMAAAACXBIWXMAAAsTAAALEwEAmpwYAAADE0lEQVR42uVXy27TUBD1F0CTOIkdv%2b3Edh5OSlpegiK10CJQWSEkNmwqKtiBYMkf8Bkg8VP9mMOc29zGbZo0VaFq1MWRrx17Zu65M2cmRtodItjcRa/YQLvThd0K4LiRunZ7IxTDMYKwA89PFFwvhh%2b0ESc5Wk54Y8E9JO2uipUxjzceqvt2p4cgSmHWffz48x1Gmg0Q9B4glh9D2Sg3rg1Ecabgeom6pyGSQKMkhfc3FYyTG2acjJeHGScZwiiD1/Jg3qng7cc9GMXgHkI/QmWtjlrNgmnaCrbtKyOhsEUSeOJRnCrjJEOTdJNRzgZL9tNiZlsukidvMHr3FcneJxiJbCxN%2b6jXW4oAgmvL8tAfrGN7Zw9bz3bU9enWtmKwbPyml0F57UgmW2YDo8Of2P91hFe/j2Bk%2bQC5wJfTruoMEAKcJYyvAhjrTIkEKZwwhxvlMPq9IQZy0onUR63aPCkDp6QFZWNn02sRMZc5qX9hc%2badyZqlHITT8nVdIcUJFIxMukBT0r1ed9TGawKWQNmQ7gw0oEVynvjwN8sOTn1zEfiu3brIpr/Q79zY3Klw606m4%2bIzY/z%2bmwjCFyT7n2G9OIC9e4DWy0MEzz8IaxmydCAa0UOj4aAqGcJ1LKLItSJsohtcVyoN1Un6/XVk2WldWYSOtN92Oz8lwhr0E0jQzFL6nWfDFNBnLEK9yBdjZLZ7QgDXRrH1Gm7/MerpJszOJhrZfTS7j%2bDJM7Y/f8Ia2bUmnYHscV0Gu4Zl%2bcJ4hGDCtn3mnXnQetNouidoCvT3zsTmeX7LmBebjk/b06VAoTc6cQdJmCiwP1bvVmGu1WA17HNb3mIRjE/qblmhpI9ef6TAXj0oxgpZXkyUO17Cbzm25YRR2zY4GeXdQjBU9VKrMfVaShc0Af8b0znj%2bEpw/rgO30YuTHMWYF3omtWD0LIidlUcn8pshl2Hb6OQdOPG12QSPBa16SS4CsPOVWFQsSlcWnV1BlAgVmXYuVIJsHVk8oeI7eM8AlZt8rs0AUx/otx7SQL7/q0gYGaguGUE/AV6U70gAqhRfAAAAABJRU5ErkJggg==' /%3e%3c/svg%3e\" width=\"2560\" alt=\"stateful set\" data-srcset=\"/assets/static/unifi-stateful-set.82a2fbd.a94b811e458d48df029f40ff01179b31.png 480w, /assets/static/unifi-stateful-set.cbab2cf.a94b811e458d48df029f40ff01179b31.png 1024w, /assets/static/unifi-stateful-set.2665e34.a94b811e458d48df029f40ff01179b31.png 1920w, /assets/static/unifi-stateful-set.42db587.a94b811e458d48df029f40ff01179b31.png 2560w\" data-sizes=\"(max-width: 2560px) 100vw, 2560px\" data-src=\"/assets/static/unifi-stateful-set.42db587.a94b811e458d48df029f40ff01179b31.png\"><noscript><img class=\"g-image g-image--lazy g-image--loaded\" src=\"/assets/static/unifi-stateful-set.42db587.a94b811e458d48df029f40ff01179b31.png\" width=\"2560\" alt=\"stateful set\"></noscript></p>\n<p>Here there is quite a bit to fill out. Here's the data we need to put in:</p>\n<pre class=\"shiki\" style=\"background-color: #ffffff\"><code><span class=\"line\"><span style=\"color: #24292EFF\"> - Name: unifi-controller</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\"> - Container Name: unifi-controller</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\"> - Image: linuxserver/unifi-controller</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\"> - Pull Policy: IfNotPresent</span></span></code></pre>\n<p>We also need to add a bunch of ports.</p>\n<pre class=\"shiki\" style=\"background-color: #ffffff\"><code><span class=\"line\"><span style=\"color: #24292EFF\"> - 3478 UDP</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\"> - 10001 UDP</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\"> - 8080 TCP</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\"> - 8081 TCP</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\"> - 8443 TCP</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\"> - 8843 TCP</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\"> - 8880 TCP</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\"> - 6789 TCP</span></span></code></pre>\n<p>We don't need to name these or create a service just yet. We are going to create our service in a bit. We now need to add some environment variables.</p>\n<pre class=\"shiki\" style=\"background-color: #ffffff\"><code><span class=\"line\"><span style=\"color: #24292EFF\"> - Key Pair: MEM_LIMIT: 1024M</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\"> - Key Pair: PGID: 1000</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\"> - Key Pair: PUID: 1000</span></span></code></pre>\n<p>We also need to ensure we create our pvc in the menus. Once everything is filled out we can click create. This takes a bit and we can monitor progress in the log viewer.</p>\n<h4 id=\"installing-from-cli\"><a href=\"#installing-from-cli\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Installing from CLI</h4>\n<p>This is my prefered method. We need to create 4 files. We could do it all in 1 but I like having 4 in case I need to make updates or changes. I can then just reapply the one. Anyway, first let's create our pvc. </p>\n<pre class=\"shiki\" style=\"background-color: #ffffff\"><code><span class=\"line\"><span style=\"color: #24292EFF\">---</span></span>\n<span class=\"line\"><span style=\"color: #D32F2F\">apiVersion</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #22863A\">v1</span></span>\n<span class=\"line\"><span style=\"color: #D32F2F\">kind</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #22863A\">PersistentVolume</span></span>\n<span class=\"line\"><span style=\"color: #D32F2F\">metadata</span><span style=\"color: #D32F2F\">:</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">  </span><span style=\"color: #D32F2F\">name</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #22863A\">&quot;unifi&quot;</span></span>\n<span class=\"line\"><span style=\"color: #D32F2F\">spec</span><span style=\"color: #D32F2F\">:</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">  </span><span style=\"color: #D32F2F\">storageClassName</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #22863A\">&quot;longhorn&quot;</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">  </span><span style=\"color: #D32F2F\">capacity</span><span style=\"color: #D32F2F\">:</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">    </span><span style=\"color: #D32F2F\">storage</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #22863A\">&quot;2Gi&quot;</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">  </span><span style=\"color: #D32F2F\">accessModes</span><span style=\"color: #D32F2F\">:</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">    - </span><span style=\"color: #22863A\">ReadWriteOnce</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">---</span></span></code></pre>\n<p>Alright, now let's build our service manifest.</p>\n<pre class=\"shiki\" style=\"background-color: #ffffff\"><code><span class=\"line\"><span style=\"color: #D32F2F\">apiVersion</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #22863A\">v1</span></span>\n<span class=\"line\"><span style=\"color: #D32F2F\">kind</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #22863A\">Service</span></span>\n<span class=\"line\"><span style=\"color: #D32F2F\">metadata</span><span style=\"color: #D32F2F\">:</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">  </span><span style=\"color: #D32F2F\">creationTimestamp</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #1976D2\">null</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">  </span><span style=\"color: #D32F2F\">labels</span><span style=\"color: #D32F2F\">:</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">    </span><span style=\"color: #D32F2F\">app</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #22863A\">unifi-controller</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">  </span><span style=\"color: #D32F2F\">name</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #22863A\">unifi-controller</span></span>\n<span class=\"line\"><span style=\"color: #D32F2F\">spec</span><span style=\"color: #D32F2F\">:</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">  </span><span style=\"color: #D32F2F\">ports</span><span style=\"color: #D32F2F\">:</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">    - </span><span style=\"color: #D32F2F\">name</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #22863A\">&quot;3478&quot;</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">      </span><span style=\"color: #D32F2F\">port</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #1976D2\">3478</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">      </span><span style=\"color: #D32F2F\">protocol</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #22863A\">UDP</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">      </span><span style=\"color: #D32F2F\">targetPort</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #1976D2\">3478</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">    - </span><span style=\"color: #D32F2F\">name</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #22863A\">&quot;10001&quot;</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">      </span><span style=\"color: #D32F2F\">port</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #1976D2\">10001</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">      </span><span style=\"color: #D32F2F\">protocol</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #22863A\">UDP</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">      </span><span style=\"color: #D32F2F\">targetPort</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #1976D2\">10001</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">    - </span><span style=\"color: #D32F2F\">name</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #22863A\">&quot;8080&quot;</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">      </span><span style=\"color: #D32F2F\">port</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #1976D2\">8080</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">      </span><span style=\"color: #D32F2F\">targetPort</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #1976D2\">8080</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">    - </span><span style=\"color: #D32F2F\">name</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #22863A\">&quot;8081&quot;</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">      </span><span style=\"color: #D32F2F\">port</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #1976D2\">8081</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">      </span><span style=\"color: #D32F2F\">targetPort</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #1976D2\">8081</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">    - </span><span style=\"color: #D32F2F\">name</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #22863A\">&quot;8443&quot;</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">      </span><span style=\"color: #D32F2F\">port</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #1976D2\">8443</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">      </span><span style=\"color: #D32F2F\">targetPort</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #1976D2\">8443</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">    - </span><span style=\"color: #D32F2F\">name</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #22863A\">&quot;8843&quot;</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">      </span><span style=\"color: #D32F2F\">port</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #1976D2\">8843</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">      </span><span style=\"color: #D32F2F\">targetPort</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #1976D2\">8843</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">    - </span><span style=\"color: #D32F2F\">name</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #22863A\">&quot;8880&quot;</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">      </span><span style=\"color: #D32F2F\">port</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #1976D2\">8880</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">      </span><span style=\"color: #D32F2F\">targetPort</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #1976D2\">8880</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">    - </span><span style=\"color: #D32F2F\">name</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #22863A\">&quot;6789&quot;</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">      </span><span style=\"color: #D32F2F\">port</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #1976D2\">6789</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">      </span><span style=\"color: #D32F2F\">targetPort</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #1976D2\">6789</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">  </span><span style=\"color: #D32F2F\">selector</span><span style=\"color: #D32F2F\">:</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">    </span><span style=\"color: #D32F2F\">app</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #22863A\">unifi-controller</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">  </span><span style=\"color: #D32F2F\">externalIPs</span><span style=\"color: #D32F2F\">:</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">    - </span><span style=\"color: #22863A\">&quot;192.168.1.249&quot;</span></span></code></pre>\n<p>You can set the externalIP to your choosing. Finally, let's build our statefulset deployment. </p>\n<pre class=\"shiki\" style=\"background-color: #ffffff\"><code><span class=\"line\"><span style=\"color: #D32F2F\">apiVersion</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #22863A\">apps/v1</span></span>\n<span class=\"line\"><span style=\"color: #D32F2F\">kind</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #22863A\">StatefulSet</span></span>\n<span class=\"line\"><span style=\"color: #D32F2F\">metadata</span><span style=\"color: #D32F2F\">:</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">  </span><span style=\"color: #D32F2F\">labels</span><span style=\"color: #D32F2F\">:</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">    </span><span style=\"color: #D32F2F\">app</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #22863A\">unifi-controller</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">  </span><span style=\"color: #D32F2F\">name</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #22863A\">unifi-controller</span></span>\n<span class=\"line\"><span style=\"color: #D32F2F\">spec</span><span style=\"color: #D32F2F\">:</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">  </span><span style=\"color: #D32F2F\">replicas</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #1976D2\">1</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">  </span><span style=\"color: #D32F2F\">serviceName</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #22863A\">unifi-controller</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">  </span><span style=\"color: #D32F2F\">selector</span><span style=\"color: #D32F2F\">:</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">    </span><span style=\"color: #D32F2F\">matchLabels</span><span style=\"color: #D32F2F\">:</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">      </span><span style=\"color: #D32F2F\">app</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #22863A\">unifi-controller</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">  </span><span style=\"color: #D32F2F\">template</span><span style=\"color: #D32F2F\">:</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">    </span><span style=\"color: #D32F2F\">metadata</span><span style=\"color: #D32F2F\">:</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">      </span><span style=\"color: #D32F2F\">creationTimestamp</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #1976D2\">null</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">      </span><span style=\"color: #D32F2F\">labels</span><span style=\"color: #D32F2F\">:</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">        </span><span style=\"color: #D32F2F\">app</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #22863A\">unifi-controller</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">    </span><span style=\"color: #D32F2F\">spec</span><span style=\"color: #D32F2F\">:</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">      </span><span style=\"color: #D32F2F\">containers</span><span style=\"color: #D32F2F\">:</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">        - </span><span style=\"color: #D32F2F\">env</span><span style=\"color: #D32F2F\">:</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">            - </span><span style=\"color: #D32F2F\">name</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #22863A\">MEM_LIMIT</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">              </span><span style=\"color: #D32F2F\">value</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #22863A\">1024M</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">            - </span><span style=\"color: #D32F2F\">name</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #22863A\">PGID</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">              </span><span style=\"color: #D32F2F\">value</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #22863A\">&quot;1000&quot;</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">            - </span><span style=\"color: #D32F2F\">name</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #22863A\">PUID</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">              </span><span style=\"color: #D32F2F\">value</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #22863A\">&quot;1000&quot;</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">          </span><span style=\"color: #D32F2F\">image</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #22863A\">linuxserver/unifi-controller</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">          </span><span style=\"color: #D32F2F\">name</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #22863A\">unifi-controller</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">          </span><span style=\"color: #D32F2F\">ports</span><span style=\"color: #D32F2F\">:</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">            - </span><span style=\"color: #D32F2F\">containerPort</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #1976D2\">3478</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">              </span><span style=\"color: #D32F2F\">protocol</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #22863A\">UDP</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">            - </span><span style=\"color: #D32F2F\">containerPort</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #1976D2\">10001</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">              </span><span style=\"color: #D32F2F\">protocol</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #22863A\">UDP</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">            - </span><span style=\"color: #D32F2F\">containerPort</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #1976D2\">8080</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">            - </span><span style=\"color: #D32F2F\">containerPort</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #1976D2\">8081</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">            - </span><span style=\"color: #D32F2F\">containerPort</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #1976D2\">8443</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">            - </span><span style=\"color: #D32F2F\">containerPort</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #1976D2\">8843</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">            - </span><span style=\"color: #D32F2F\">containerPort</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #1976D2\">8880</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">            - </span><span style=\"color: #D32F2F\">containerPort</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #1976D2\">6789</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">          </span><span style=\"color: #D32F2F\">volumeMounts</span><span style=\"color: #D32F2F\">:</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">            - </span><span style=\"color: #D32F2F\">mountPath</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #22863A\">/config</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">              </span><span style=\"color: #D32F2F\">name</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #22863A\">unifi</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">      </span><span style=\"color: #D32F2F\">restartPolicy</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #22863A\">Always</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">      </span><span style=\"color: #D32F2F\">volumes</span><span style=\"color: #D32F2F\">:</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">        - </span><span style=\"color: #D32F2F\">name</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #22863A\">unifi</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">          </span><span style=\"color: #D32F2F\">persistentVolumeClaim</span><span style=\"color: #D32F2F\">:</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">            </span><span style=\"color: #D32F2F\">claimName</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #22863A\">unifi</span></span></code></pre>\n<p>Now that these are all created we can deploy them. If you are like me and have all of these in one folder without other manifests we can apply them with one short command...</p>\n<pre class=\"shiki\" style=\"background-color: #ffffff\"><code><span class=\"line\"><span style=\"color: #24292EFF\">kubectl apply -f </span><span style=\"color: #6F42C1\">.</span><span style=\"color: #24292EFF\"> --namespace unifi</span></span></code></pre>\n<p>If you have a bunch of manifests you need to specify each with -f</p>\n<pre class=\"shiki\" style=\"background-color: #ffffff\"><code><span class=\"line\"><span style=\"color: #24292EFF\">kubectl apply -f file1.yml -f file2.yml -f file3.yml -f file4.yml --namespace unifi</span></span></code></pre>\n<p>We can of course watch the deployment with </p>\n<pre class=\"shiki\" style=\"background-color: #ffffff\"><code><span class=\"line\"><span style=\"color: #24292EFF\">kubectl get all -n unifi -o wide</span></span></code></pre>\n<p>Once everything is deployed we can browse to our externalIP on port 8443 and configure the app. If you want to setup an ingress with a custom name as we did with pihole and rancher you want to specify your ingress IP for external IP. In my case that is 192.168.1.200 but I am fine with it like this. If you want the custom ingress you can either do this in rancher in the ingress section or with a manifest</p>\n<pre class=\"shiki\" style=\"background-color: #ffffff\"><code><span class=\"line\"><span style=\"color: #D32F2F\">apiVersion</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #22863A\">networking.k8s.io/v1beta1</span></span>\n<span class=\"line\"><span style=\"color: #D32F2F\">kind</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #22863A\">Ingress</span></span>\n<span class=\"line\"><span style=\"color: #D32F2F\">metadata</span><span style=\"color: #D32F2F\">:</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">  </span><span style=\"color: #D32F2F\">name</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #22863A\">unifi-controller</span></span>\n<span class=\"line\"><span style=\"color: #D32F2F\">spec</span><span style=\"color: #D32F2F\">:</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">  </span><span style=\"color: #D32F2F\">rules</span><span style=\"color: #D32F2F\">:</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">    - </span><span style=\"color: #D32F2F\">host</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #22863A\">unifi.whateverdomain.something</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">      </span><span style=\"color: #D32F2F\">http</span><span style=\"color: #D32F2F\">:</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">        </span><span style=\"color: #D32F2F\">paths</span><span style=\"color: #D32F2F\">:</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">          - </span><span style=\"color: #D32F2F\">path</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #22863A\">/</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">            </span><span style=\"color: #D32F2F\">backend</span><span style=\"color: #D32F2F\">:</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">              </span><span style=\"color: #D32F2F\">serviceName</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #22863A\">unifi-controller</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">              </span><span style=\"color: #D32F2F\">servicePort</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #1976D2\">8443</span></span></code></pre>\n<h3 id=\"traefik-dashboard\"><a href=\"#traefik-dashboard\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Traefik Dashboard</h3>\n<p>This is a bonus section!! I was having some issues with ingress of my unifi container and I found that it was a certificate thing. To save you some time, you need to add --insecureSkipVerify=true to your traefik deployment. Anyway, let's get started!</p>\n<p>We need to edit the file /var/lib/rancher/k3s/server/manifests/traefik.yaml</p>\n<pre class=\"shiki\" style=\"background-color: #ffffff\"><code><span class=\"line\"><span style=\"color: #24292EFF\">sudo nano /var/lib/rancher/k3s/server/manifests/traefik.yaml</span></span></code></pre>\n<p>From here we need to add the following lines:</p>\n<pre class=\"shiki\" style=\"background-color: #ffffff\"><code><span class=\"line\"><span style=\"color: #24292EFF\">dashboard.enabled: </span><span style=\"color: #22863A\">&quot;true&quot;</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">dashboard.domain: some.domain.homelab</span></span></code></pre>\n<p>In that section is where we would also add our line mentioned before. Save this file and deploy it with kubectl apply and we are good to go.</p>\n<h3 id=\"conclusion\"><a href=\"#conclusion\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Conclusion</h3>\n<p>Our K3S cluster is performing some work for us finally! This is awesome! I encourage you to browse around Longhorn and Rancher to view things and get comfortable. The Traefik dashboard is a great place to learn also! In the next part we will add more services to our cluster and a minecraft server! Happy hacking!</p>\n<p>References:</p>\n<ul>\n<li><a href=\"https://rancher.com/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://rancher.com/</a></li>\n<li><a href=\"https://rancher.com/docs/rancher/v2.5/en/installation/install-rancher-on-k8s/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://rancher.com/docs/rancher/v2.5/en/installation/install-rancher-on-k8s/</a></li>\n<li><a href=\"https://rancher.com/docs/k3s/latest/en/installation/kube-dashboard/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://rancher.com/docs/k3s/latest/en/installation/kube-dashboard/</a></li>\n<li><a href=\"https://rancher.com/docs/k3s/latest/en/backup-restore/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://rancher.com/docs/k3s/latest/en/backup-restore/</a></li>\n<li><a href=\"https://longhorn.io/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://longhorn.io/</a></li>\n<li><a href=\"https://rancher.com/products/longhorn\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://rancher.com/products/longhorn</a></li>\n<li><a href=\"https://metallb.org/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://metallb.org/</a></li>\n<li><a href=\"https://cert-manager.io/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://cert-manager.io/</a></li>\n<li><a href=\"https://storj.io\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://storj.io</a></li>\n</ul>\n","excerpt":"We have made it to a part 3!! Today we are going to get a bunch of things up and running on our cluster. The part we have all been waiting for! We are going to get pihole, and unifi network","description":"k3s cluster on raspberry pis for homelab part 3","timeToRead":12,"author":{"id":"b34rd","title":"b34rd","path":"/author/b34rd/"}}},{"node":{"id":"c8d3ac71ffe82919dd8d47b7d5bb572b","title":"K3S HA Homelab on Raspberry Pi Cluster Pt2","datetime":"2021-11-01 00:00:00","path":"/k3-s-ha-homelab-on-raspberry-pi-cluster-pt2/","content":"<p>If you're here you already finished part 1 and are ready to get into using your cluster! The goal for this part is to get all the remaining tools setup that we need before we start deploying applications and services. The tools we are going to be setting up in this guide are Kubernetes Dashboard, Cert-Manager, MetalLB, Rancher, and Longhorn. We are going to have our persistent storage on our cluster replicate between all nodes and also backup to the cloud, we are going to have the ability to dynamically generate SSL certificates based on application needs, we will be able to manage load balanced services from their own IP address, we will be able to deploy applications as well as manage them from a central web application, and finally we can monitor it all from a few different dashboards.</p>\n<h3 id=\"install-kubernetes-dashboard\"><a href=\"#install-kubernetes-dashboard\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Install Kubernetes Dashboard</h3>\n<p>First let's get the Kubernetes Dashboard out of the way. On our cluster this is incredibly simple to install and get running. First, let's run the following:</p>\n<pre class=\"shiki\" style=\"background-color: #ffffff\"><code><span class=\"line\"><span style=\"color: #24292EFF\">GITHUB_URL=https://github.com/kubernetes/dashboard/releases</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">VERSION_KUBE_DASHBOARD=</span><span style=\"color: #22863A\">$(curl -w &#39;%{url_effective}&#39; -I -L -s -S ${GITHUB_URL}/latest -o /dev/null </span><span style=\"color: #D32F2F\">|</span><span style=\"color: #22863A\"> sed -e &#39;s|.*/||&#39;)</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">sudo k3s kubectl create -f https://raw.githubusercontent.com/kubernetes/dashboard/${VERSION_KUBE_DASHBOARD}/aio/deploy/recommended.yaml</span></span></code></pre>\n<p>From here we need to create our admin user and setup some RBAC rules. First we are going to create a file called dashboard.admin-user.yml.</p>\n<pre class=\"shiki\" style=\"background-color: #ffffff\"><code><span class=\"line\"><span style=\"color: #D32F2F\">apiVersion</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #22863A\">v1</span></span>\n<span class=\"line\"><span style=\"color: #D32F2F\">kind</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #22863A\">ServiceAccount</span></span>\n<span class=\"line\"><span style=\"color: #D32F2F\">metadata</span><span style=\"color: #D32F2F\">:</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">  </span><span style=\"color: #D32F2F\">name</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #22863A\">admin-user</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">  </span><span style=\"color: #D32F2F\">namespace</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #22863A\">kubernetes-dashboard</span></span></code></pre>\n<p>Now we are going to create a file called dashboard.admin-user-role.yml that sets up all the RBAC rules.</p>\n<pre class=\"shiki\" style=\"background-color: #ffffff\"><code><span class=\"line\"><span style=\"color: #D32F2F\">apiVersion</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #22863A\">rbac.authorization.k8s.io/v1</span></span>\n<span class=\"line\"><span style=\"color: #D32F2F\">kind</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #22863A\">ClusterRoleBinding</span></span>\n<span class=\"line\"><span style=\"color: #D32F2F\">metadata</span><span style=\"color: #D32F2F\">:</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">  </span><span style=\"color: #D32F2F\">name</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #22863A\">admin-user</span></span>\n<span class=\"line\"><span style=\"color: #D32F2F\">roleRef</span><span style=\"color: #D32F2F\">:</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">  </span><span style=\"color: #D32F2F\">apiGroup</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #22863A\">rbac.authorization.k8s.io</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">  </span><span style=\"color: #D32F2F\">kind</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #22863A\">ClusterRole</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">  </span><span style=\"color: #D32F2F\">name</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #22863A\">cluster-admin</span></span>\n<span class=\"line\"><span style=\"color: #D32F2F\">subjects</span><span style=\"color: #D32F2F\">:</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">- </span><span style=\"color: #D32F2F\">kind</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #22863A\">ServiceAccount</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">  </span><span style=\"color: #D32F2F\">name</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #22863A\">admin-user</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">  </span><span style=\"color: #D32F2F\">namespace</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #22863A\">kubernetes-dashboard</span></span></code></pre>\n<p>Now that we have both of these done, we need to deploy them</p>\n<pre class=\"shiki\" style=\"background-color: #ffffff\"><code><span class=\"line\"><span style=\"color: #24292EFF\">kubectl deploy -f dashboard.admin-user.yml -f dashboard.admin-user-role.yml</span></span></code></pre>\n<p>Now we need to obtain the bearer token</p>\n<pre class=\"shiki\" style=\"background-color: #ffffff\"><code><span class=\"line\"><span style=\"color: #24292EFF\">kubectl -n kubernetes-dashboard describe secret admin-user-token </span><span style=\"color: #D32F2F\">|</span><span style=\"color: #24292EFF\"> grep </span><span style=\"color: #22863A\">&#39;^token&#39;</span></span></code></pre>\n<p>Next we start a proxy</p>\n<pre class=\"shiki\" style=\"background-color: #ffffff\"><code><span class=\"line\"><span style=\"color: #24292EFF\">kubectl proxy</span></span></code></pre>\n<p>Finally we can open our browser and load the page </p>\n<p><a href=\"http://localhost:8001/api/v1/namespaces/kubernetes-dashboard/services/https:kubernetes-dashboard:/proxy/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">http://localhost:8001/api/v1/namespaces/kubernetes-dashboard/services/https:kubernetes-dashboard:/proxy/</a></p>\n<p>We then login with the admin-user token from above.</p>\n<p>To upgrade the dashboard we execute the following:</p>\n<pre class=\"shiki\" style=\"background-color: #ffffff\"><code><span class=\"line\"><span style=\"color: #24292EFF\">sudo k3s kubectl delete ns kubernetes-dashboard</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">GITHUB_URL=https://github.com/kubernetes/dashboard/releases</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">VERSION_KUBE_DASHBOARD=</span><span style=\"color: #22863A\">$(curl -w &#39;%{url_effective}&#39; -I -L -s -S ${GITHUB_URL}/latest -o /dev/null </span><span style=\"color: #D32F2F\">|</span><span style=\"color: #22863A\"> sed -e &#39;s|.*/||&#39;)</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">sudo k3s kubectl apply -f https://raw.githubusercontent.com/kubernetes/dashboard/${VERSION_KUBE_DASHBOARD}/aio/deploy/recommended.yaml -f dashboard.admin-user.yml -f dashboard.admin-user-role.yml</span></span></code></pre>\n<p>And to remove it completely</p>\n<pre class=\"shiki\" style=\"background-color: #ffffff\"><code><span class=\"line\"><span style=\"color: #24292EFF\">kubectl delete ns kubernetes-dashboard</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">kubectl delete -f dasbhoard.admin-user-role.yml</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">kubectl delete -f dashboard.admin-user.yml</span></span></code></pre>\n<h3 id=\"setting-up-cert-manager\"><a href=\"#setting-up-cert-manager\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Setting Up Cert-Manager</h3>\n<p>Now it's time we get cert-manager running on our cluster. This automates the process of getting SSL certificates. It can be configured to use Let's Encrypt too if you want fully validated certs and not self-signed ones. You can set it up to use your org's CA too if you want. This is honestly a versatile tool that will help out so much in the long run if running public sites is on the agenda.</p>\n<p>Let's add the helm chart repo we need</p>\n<pre class=\"shiki\" style=\"background-color: #ffffff\"><code><span class=\"line\"><span style=\"color: #24292EFF\">helm repo add jetstack https://charts.jetstack.io</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">helm repo update</span></span></code></pre>\n<p>Alright, we now need to install the Custom Resource Definitions. These extend the kubernetes api to use cert-manager.</p>\n<pre class=\"shiki\" style=\"background-color: #ffffff\"><code><span class=\"line\"><span style=\"color: #24292EFF\">kubectl apply --validate=false -f https://github.com/jetstack/cert-manager/releases/download/v1.5.1/cert-manager.crds.yaml</span></span></code></pre>\n<p>Make sure the version of cert-manager you choose matches the definitions you install.</p>\n<p><img class=\"g-image g-image--lazy g-image--loading\" src=\"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 1984 316' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-47ba42bcbc2fee514e559f6e961a0d7d'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-47ba42bcbc2fee514e559f6e961a0d7d)' width='1984' height='316' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAKCAYAAAAEqljUAAAACXBIWXMAAAsTAAALEwEAmpwYAAADV0lEQVR42o2WyZLbMAxE/Sc5TJLTVHnfF0mWZGuzLHn//x9B9Ji0S5MZV82BRYgEAXSjSbszTt9sVr7ZNP1t8%2bsPmxaNnf9svn/Z3B9ZbxxY36tsFNSWHSoLw61dr1c7n8%2bW57kFQWDr9dru97sdj0eL49hGo5FtNhvLsswOh4Mb%2bKdp6uyiKNx3kiS2XC5dDPZYJzZ2GIZWVZVdLheX5/F42H6/f9rkwZdv/MjNTEzF3u12ri5i4MscRZGbyXU6nazjB54l6c6iXWhlXTQgE0uyvfvOi7xJmpofbG3j%2beb7vkusQiiSJCSjAAb2YrFw%2bxAAOdhlWdp0OrXBYPBh9Pv9D2M8Hj/XJ5OJIxObWWewh8OhGzrXXmP0ej23rm%2bIJj9%2b5NDc2W63TeGVxVHcMFhb1dhZmlme/S06jiMrGgB0BbAMCAAchGDDZl3XjlH2YRkiAA5hxGGfhBSyWq2cQrAhCJs1vrHba9gQylmdAwizhud5jiz82JvP5891xel2u5/IZ3SQX3ksXcEAkGyZAQBAJMWauiopAxQbgJAgGSuGzkuugEElrCFX/Jj5VgxdFWRKPZI1udgnLsRDKAN/rgRr7KFKNUg10BQU0VaIxj8FHJ2TgKoY7DYBAo8vPm0CKBRbJLXPMyCATrAuVRAHX76Z8aMWwABE10zN4QxxdM04Q7eZOUc%2b6kAt7%2b/vDrQGYOn4JwKQCYkAQxBAEJAk2BTHujqsjuIDeYBgT93mHLPiAAB/AFA06%2bomtnJIEaiEM/gzQ0b7vVGNUhL%2bfM9ms2d9xIEs1gT6K/COAEmHIpAUydRtBkkphjUSABBfAKg72HoApRKpAF%2bpizuumIolsvVyS0XM3F9JGLIlaXy5IuxDJhjYB7QUzJk26JcEcFD3DKCSLomwVZy6rLdBb0BbfjqjN0KqYNxuN9ct1iV93X2pRk0QKVIl/pCt7gNe%2baUOcBBDbwBq06/AK/COAPcIutc%2b/pIAgmldXSOxCpACBETK%2bV8BFI0CdN3UZQCTgy6yThyK14NIc7j3AFPH9dMKIWoG95yXXvN3wD8J0H16RQCFUJiKZq39K6D/AALdfgT1s4kCRIAUAjgGNeiXgX2A6k8VwKVAYkAY7xYxeFT1oBKPPb6/C57xBxNPgN0zISFtAAAAAElFTkSuQmCC' /%3e%3c/svg%3e\" width=\"1984\" alt=\"cert manager crds\" data-srcset=\"/assets/static/cert-manager-crds.82a2fbd.aa1ec17eb2ab44a65a46b7efb950e5bc.png 480w, /assets/static/cert-manager-crds.cbab2cf.aa1ec17eb2ab44a65a46b7efb950e5bc.png 1024w, /assets/static/cert-manager-crds.6cf1ecb.aa1ec17eb2ab44a65a46b7efb950e5bc.png 1984w\" data-sizes=\"(max-width: 1984px) 100vw, 1984px\" data-src=\"/assets/static/cert-manager-crds.6cf1ecb.aa1ec17eb2ab44a65a46b7efb950e5bc.png\"><noscript><img class=\"g-image g-image--lazy g-image--loaded\" src=\"/assets/static/cert-manager-crds.6cf1ecb.aa1ec17eb2ab44a65a46b7efb950e5bc.png\" width=\"1984\" alt=\"cert manager crds\"></noscript></p>\n<p>Now that we have our repo and crds ready let's deploy cert-manager</p>\n<pre class=\"shiki\" style=\"background-color: #ffffff\"><code><span class=\"line\"><span style=\"color: #24292EFF\">helm install cert-manager jetstack/cert-manager \\</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">  --namespace cert-manager \\</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">  --create-namespace \\</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">  --version v1.5.1</span></span></code></pre>\n<p>I'm going to break this down for you... cert-manager is the chart and we are installing from repo jetstack/cert-manager. The namespace cert-manager is the kubernetes namespace it will be deployed. Since the namespace doesn't exist, we are creating it. The version specification is important. The latest versions of cert-manager have api breaking changes and if you aren't running bleeding edge it is best to stick with 1.5.1, 1.5.3, or 1.5.4. I like 1.5.1 because it is what Rancher recommends.</p>\n<p>After exectuting our command we can watch the status with</p>\n<pre class=\"shiki\" style=\"background-color: #ffffff\"><code><span class=\"line\"><span style=\"color: #24292EFF\">watch kubectl get all -n cert-manager</span></span></code></pre>\n<p>It should look something like this</p>\n<p><img class=\"g-image g-image--lazy g-image--loading\" src=\"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 2112 1284' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-ce5272b05d64c11e58933fa7946b260c'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-ce5272b05d64c11e58933fa7946b260c)' width='2112' height='1284' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAnCAYAAAC/mE48AAAACXBIWXMAAAsTAAALEwEAmpwYAAAMYElEQVR42s2ayWvVyRbH6w95olFREzOZQU3iPEQzqdFEo8YBEVpQcV48EMFZH6LwFGkvLa8VhMadz40bB9CFe6FBRHThQkVca/%2b8v%2brzqfv7xsrPe%2bPQ/eAtDlW/qlNVZz6n6l63Zs0at23bNtff3%2b927tzpzp07544fP%2b5OnDjxt8PJkyfDWT09PW7p0qWut7fXDQ4Ouh07djjo2LJliztz5sx373vq1Cl3%2bPBhd/r06XDGgQMH3NmzZ93Ro0fdkSNHwtiePXvc0eMn3e4D/3TDW7a5oQ3DbllXjwsENTQ0bK6trf1vfX39b83NzTebmpr%2bZ1BXV3ezpqbmZnV1dWinT59%2b084NLXM/en5jY%2bNI3/gJ%2b8yYMSOAxmhr6xt/MzBe6zZv2rSpJIApU6Zcs9avX7/e2wI/a9YsP3PmzL8dWltb/cqVK/3WrVs959Fu3rzZd3d3%2b%2bHhYb9q1SpvhH/3vtC7ceNGv2jRIr9gwYLAB2NAe3t7OHdZ51Jf1zTTH97Y4f/90zz/j8m119rWHnDBTKZNm/Yzh5tJfjApJbZpYosqQktLyyiIx8ZaBxiBiZl/Ymcl5gpJZ2dnMn/%2b/NAaA2X3yJ9X7kzWz5s3LzGGk%2bXLl4ex2bNnJ3Pnzg04HR3tSWNTa7Kxa9aHHava/MSptT//dOSSC/5hAiiYSXqDxMwxNVP01n4BjJupBSsxQQWgz5z6ldYKzNS9mT5nhb65XlhTamt9Y0ODb8gBe2MZMUCHMWb9poBTZ%2bvZv6GhPuzV2Fhay1ipH%2bbSKTV1yeRpdb562tTCv04dc%2b7gwYNu0qRJBYgxSIy4FALLwdSpU/2cOXO8BUy/du1aPzQ05AcGBvzixYt9X1%2bfN40GxiqtByTEwHxgvM5Pry21pX7tCPBdXTPdzzezXr1mwK9bN2TnrvNrBgbN3Bf7Xjuzu5sza2y/2gA18GFra2qml76trauD%2bUY/rbo6baivT2bNbPVVVVVXdu7a7dyFCxecEVOAKINgAdIyLVKkRQu0SF8ajzUBY9KY1tPP7xO0jRBMI6uXtfnB5e1%2b4BtgsKvDr%2b%2bb7zeuXOjX9cwNwPdQ77wA9DVGCx7jG/oWhLH1ffP8nLbWdEZTc9JidJuifjl2zCzgyZMnzjRYQIOWivDRFI2iza6uLm8%2b5FesWGHSX%2beXLVsWgGCD5s13vflzwGtra/MLFy4Mc%2bbf3vwwjK9evZp9vaU7v2TJkiAQBNbS0mzBqcW3tgDNWZtBq8ZKOOC2t832fb09tl%2b/7%2bnuMkvsMLrMArqWhwC3wuhfYPSstLFO%2bx6C3s5Os5AuG1vhe3u6oSld1d%2bfEO%2bMtmvPnz8vBUEz7UKmIQJGKv/O%2bx0AA4rowsnjar2gJTD1GV/WIQtpamrOLCWzlszigtVluLKiz2uaRsUIxmbMyNr8N21pv9Ssl6BLxvn106dPzv3%2b%2b%2b/ONFdAo%2bbbiW2YxiacP1iBpRRwGkbNxWZfTiAIgnksgTgCkLbYizEshpSIBYkprBE8LBTNAaQ25mWlctFyCssBvGHlpONfP3z44NyLFy%2bCADBTM/XEglyKKXMILdKSaTMGQZZyAsG0jDNPcOzo6AjztBKiYkAcRyAAhtiDXI1QcC0xhABwPXBxMfDYn3W0WCB7gcc%2b0FDOEisJAJ4QwMePH517%2bvRpiAFI1jZLjJAUv%2bUwxihc8F8shMOZ45uWTEB8AIdNIYY5GEEICIzYIOL5hln6aNry9IiAWJP5ZtiTb3ARAAzLGiVYrAkczoa22MW%2bSwAvX74cEQDFiR2YsjFIIgQTZB6tQCDaQvtoAI3zDb60hyAgirXMsxZhwQzmbgVLWCNThimCJsywB%2bv5ZhztIsRyzOk81iGQH7YAO6SQMZsYwSmbgkSLptA2TKBVmSrMyCfBEUAUGlcmQAAqduQSCIA5MQajYpz9dS7j4OImMXPqswZagB%2b2gNevXzvTZgHTJQiSKhScxLhcgDFaCiAEhlaxBGrvbH1Yg0aYh0DSJ%2bPECQU2%2bjCLoCQAmCYO0YIPU7IMBJUPrGicM%2bSSeQFUEMaXArhx44Yz5AJSzurnlAPxOzROX8EHHNwA0xWApz642T6BQA6SCcf%2bHqdD%2bTXznBdfYrAaER9nF2UmzgGX/cW0YkWcfcYUwK1bt5xtUkCTXFIM4atpMI7wn3NwiRmY0K1MqTJmknEsABeij0AhSGfAFG7DmGKNiiyUwDma4xzWIwT2j9fGFhMJ4UsBvH371lmaKWDGVIKm0RRC2VRt3KdF6%2bVMjUMhCvPFh8EDXyas2KB7A4CJk%2bYUEMHFBRjHxXALCUwCYA7XUt3AHGsRgNwoHzcqCuDBgwfODi2wKVdKgxQCkTw%2blo0HX%2bMb/0fKaKt0G2sedS%2bAGEABkXhAHIFwtMU46wEYA0fMiom4JlDxJKvjHIQsRqGNvlyP/aGTM79JAFSCNlCAUNUBbAAREoQOAQcBoDEOwmqUhxnD5MGFeAmPFkJhQLWCmKZVWiXagwMj4LAvgEupipTAEQBz0KCCirNZy7iC9zfFgPPnzzu7phYyX%2bYhIVWtr2CmlxcFKsbkGnqRifOw1sZ7KNorboghfStOqLYXDXEMEogmrZFg4rNVLX7VAh4%2bfOjMtwqZX4a7QD7Q6SARk7/ixhE6fxGKtSC3kGkDunHS4hKqH/Q0h3UwF7sV48xngXtUZsmf%2bdUg%2bP79%2bxAEMW0zncTiQYo5Ku2plFWqo8%2bY%2bliEInH8UlROAAgZl8Bk9fYHQ1iWYoLuFwqIzIPPvOKRApzKcM4f61Y6pgU8e/YsxADdBUzKKcJQgFHBo3hAhNYbAL7G94YNG4J/yzXkFnIdmahSlywLHIQdp8q4r/uEXpGUVmVtCnh/%2bS5g%2bbiQVXAhCLIh0kYjHAKTMkMCHOMww%2bHZQ0rI6WgKjYCnVIYglQZZgyYhVu8KytmxHyulysoqMaby%2bS/dBV69ehWuw5STZgWjLECvO8wp38qE%2bcZqYJRsIFzdEBGKrrQiQAJQ8MMCxhKA3CueF5N86yKE8hDqV8rg8gK4fPmys8tKITPXEAPk//gmfYhQmasymTk0JCIhgDm%2blS3yZqliSkQqmscRHjOPqziZfjwuPNaLDrnPd98F7ty542yTAuZEIRRngTgFlfPRPNGxn5aeoz%2bnPWk1DkzqYz16%2bMBKEDprabE01QwIVZcp1Scqg9lD8aXSU11ZAbx584bf6UIpbOVlYhumugTpEqMMIM1qXH1dYsBhcwinZVyWUClNMocfq0DCfXQ3kJvJz/XSxHhWuAU62Idv3A%2bc77KAu3fvOiO8QHAjC/Agkj2OBInGrzwKfHo11kMJMUMBM0unoWWOvojS42hc1QHSeN4FyBDxjyrSru4Eep4HsAbOgz4J5ZsEcP/%2b/SCA7JISnsV1SVGtDqMKYMwhGL0I6fWHTckE4CsgyqSZ04tPXKrCIIQqheZzOPuVGwc/H/Q4Bzp1CftmATx%2b/NgZIQUWGyPhMkQEV96HYG5eeqaCcBhDENlLctA2TCN9fqTUI4ouUZhm/FhCi7uodNWjZh5UMOUFgGJiJvVACp2crbeHbxLApUuXnBUahaxwCTEgfuzAfFkgv1cWEA5aRFOMqTJU/ha%2bMkN8P4iDqLJFpd8E88/t0n4sgDhWjVETfCmA27dvhyyQXWNHHkTiR5E48sc/m5V7LInvB/Ea1fWcAwFoF8CqFB90ldZ1mT77whzWJM3mM4mEFD/SjJUF9LtAEMC7d%2b94Fb6C6XIX4EEEKygHPJflx7IHlNBqLS31hMb5RcbMlgKLq3ZKtYmrUXSZa6TcQAFzvdRch/eINLuWk5K5m6SWpcIe/HIFIwD7CjRWbi7Gsf34yfyzAB49euTs8Cv4uEn8D/Oloh1cNOKKRkTREIumqdA3ARXNx4rGSPg2JooW9AI%2b65i3uFA0rRaNsYBrwi2a1EPLnkZE0aJ3GDNiQt%2b0VjRBhXmLLWFP5gDmzIVGzuBc1rLPj4Dt90cWkP%2bTpqkL/6GxSvCXSr/rxW9%2bsenl3wTz18/8mjxOpd8S86ZbrnD6UcAtiVlXr17FHW/cu3fPuevXr7tx48bNnThx4t4JEybsrKqq2vU1MLyK45Xm/h9g/Pjxu6qrq3cODw/vnzx58uKLFy86Z%2bblLE257du3h39X7d%2b//wtgHNi3b1%2bAvXv3jozFeIwD%2bbWHDh0aweUPGXzT5oF59heecOOzmau0fixgze7du0PW896Hf6SZa7s/AZAtHvXo5LWfAAAAAElFTkSuQmCC' /%3e%3c/svg%3e\" width=\"2112\" alt=\"helm install\" data-srcset=\"/assets/static/helm-cert-manager.82a2fbd.d8be6679d02f90362a5edbef13e2e8dc.png 480w, /assets/static/helm-cert-manager.cbab2cf.d8be6679d02f90362a5edbef13e2e8dc.png 1024w, /assets/static/helm-cert-manager.ae78f0b.d8be6679d02f90362a5edbef13e2e8dc.png 2112w\" data-sizes=\"(max-width: 2112px) 100vw, 2112px\" data-src=\"/assets/static/helm-cert-manager.ae78f0b.d8be6679d02f90362a5edbef13e2e8dc.png\"><noscript><img class=\"g-image g-image--lazy g-image--loaded\" src=\"/assets/static/helm-cert-manager.ae78f0b.d8be6679d02f90362a5edbef13e2e8dc.png\" width=\"2112\" alt=\"helm install\"></noscript></p>\n<p>It's really important that cert-manager is running correctly before we move on. If you have ImagePullErr just wait and you will see k3s grab the container image after a bit. If you have other errors you can check them on the individual parts using</p>\n<pre class=\"shiki\" style=\"background-color: #ffffff\"><code><span class=\"line\"><span style=\"color: #24292EFF\">kubectl logs -p </span><span style=\"color: #D32F2F\">&lt;</span><span style=\"color: #24292EFF\">name of pod</span><span style=\"color: #D32F2F\">&gt;</span><span style=\"color: #24292EFF\"> -n cert-manager</span></span></code></pre>\n<p>Depending on what you see you will need to troubleshoot accordingly. Sometimes the simplest solution is to just remove the namespace, wait for everything to purge, and deploy the helm chart again. To delete a namespace it's just</p>\n<pre class=\"shiki\" style=\"background-color: #ffffff\"><code><span class=\"line\"><span style=\"color: #24292EFF\">kubectl delete namespace </span><span style=\"color: #D32F2F\">&lt;</span><span style=\"color: #24292EFF\">namespace name</span><span style=\"color: #D32F2F\">&gt;</span></span></code></pre>\n<p>That's as much troubleshooting as I'm going to get into here because that is a whole giant rabbit hole itself. Anyway, we should have a working cert-manager to generate self-signed certificates!! Yes!!! </p>\n<p><img class=\"g-image g-image--lazy g-image--loading\" src=\"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 2112 1484' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-61e8bdf96fb8da15574f61118308404c'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-61e8bdf96fb8da15574f61118308404c)' width='2112' height='1484' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAtCAYAAAAeA21aAAAACXBIWXMAAAsTAAALEwEAmpwYAAALYUlEQVR42t2aSW9USRKA82fMAYHVbbxV2S67ynvZLu9LlTfwCgZ7AIE99IDbzaEFB3azCHgajYYLiEFokJAlLiCuiAubxA/q1hu9nPiSF55Hudxg7Aa6D6HMyjX2iIxXZs%2bePebQoUNmbGzMHD161Ny8edNcvHjRXL58edthZWXFHD582ORyOdPb22uGhobM5OSkWVxcNOPj42Z%2bft5cu3bNXLp0adPnnjlzxly5csXtXV5eNtevXzfnz583Z8%2bedWuWlk6aC5dWzImffjYH5g%2bZ6X2zpn8wa8zU1JSpqqqaisfjTyorKx8lk8nV2tra3w3kjtWKiorV8vJy18ZisVW537XMfe79iURirV9dXe3OqampcaBjtPGqxCMBaJ0a37vXmOHhYVNcXHx7bm7Ozs7OWtlgGxoabH19/bZDXV2dlfusSNqK1rn24MGDdnBw0B44cMCOjo5aQXzT54Lv/v37bSaTsR0dHXZ6enptvKmpyfX7enttZU29vTiXtjePtNq/fBe7HeudN04lS0pKboGYqOQvwiVfNviCbEFIpVLrIDq%2b0T5dI0j63d3dvpiBL4T7Ygp%2bW1ubawX5gmd8yp3sb21t9Zubm/2%2bvj433tjY6KfTaddvaWn2q2vr/IODDb8cGWq0RSWxW8N//cmI/S2Y0tJSryJWYWOxCj%2bRqA5EXexGIAyyKZESkpKDXSvq5/qM/9ZeQFTPVsbjVtTfihm4Nh7%2bFjOwYg4fAOvRSu4F6APM6W/W6Dl6lu7lN/249KurKoPd5ZV%2bcVnclpWWeH9fPGrMwdl58/13xV48LoviVX4sVhkI2DUIDwXKyspsOt1qx8b22InJSTs9M2PHxydsd0%2bPzeWGbDabs%2bUQAhJCTCwW/z%2bEY5WCTCJRI0gyX%2bGQ/S3gzvb2divO2qm2%2bCy5c9x2dnY6cxoYGHCMBL%2bYu/NDUGbAfFkX1NQk/AYxiV1FRd7YHvEBp34%2bbMrjxd5wX72dyjX7E0ONwUSuyTrINtvJwRY7PpC249kOO5ltt/uGMnZmSNrhjIPpbNv7Ntfm5qayrbIn7camBlvdPHOuL%2b3EAHPtNpNuEKQSH0gVTdK2ECghSFYlvEkIBPyQGf84fvy4MWcfTZlEpshrGS6zLUPlfnrP7iA9Xmyb%2bipsc67EpjsabF1Tp0127LXNXUg5awcH%2bu3oyIhzLF0iibHREZsVR5bLZW2HOKL%2bvj4ZGxUpdYjkxlx/cmLCTk5OiFNqfL9ezunv77d79%2b51Lb%2bRKJIVXyRaNubmkHZXV5doXtqZGwxLhib4GRAII/FDgmvu9osXL4z54fgJU15W4SWTKdvS3CIOpD/g4sHBrEMExPCkPd1dVpyLbRN1lM02K8C6oaFhp6KsQbWjthrtEwGiBETnCwHz%2bBX26Vrd/7kAA0T6OFs7MjJy%2b%2b3bt8acPHnSiJ14qVQSIvDQAfaGNCAYG6OPRCAcYIxDlHDnAEOHuBEUQOajkL92q0xQDQB3oen269evjTl27JiLAnC5paXFMUCJl9DiYisEo6Y94uxk3hGNZPIlvRl1/Nj6QoRvhwmoBsCAN2/eGHP16lUj0vOwPeKnTAYkJhCMtGEAhPMb4iVmr4XDTXJ/q8hvB6xnwLNnz4w4GW/fvn2EGZKGoMeFtZxTcbEVZwKYBWbAmNpmVPX5rXaejOQJOv8NEF%2bYATdu3DCSMXmhfTsNkAeKIxrA0aEdSB6nSIuGMIZG0IdhyijMBvPBc5PawjRMBlP5Jhnw/PlzXmYeufTMzIwvXn%2bNAcIYRyhEQiy%2bQDWBljn18CrtaF9/f9MacOfOHSP5s4cEhTBy9AA1Dxc54iGcecZgiuTcThPUEf6hfcDTp0%2bdDwil6guhAaqLxMkBUG%2bSEFSaV1U0M9sMQd%2bsBjx58sTIgIe0hWBfCHUmgNRFM9aek0ChWL%2bRdDeK31%2bZMesZcO/ePSMS9pC6DMqzsSXMBN%2bHQtSd39g8DNkuhLcxtm%2bNAa9evTJCqBdmf7ylAxDS56iqO7FfHyvRhwvAnI5pP7o%2beobuiT6CviAT1jPg7t27RqTuYe%2bi9i4TRBvQAB4ihDW0gBbnSGIUPiZcFEBL8B8cSl/36DuCPRpFGMOn0GJijOFftiNEfiID1zPg9OnT1AS90N6prgQgBdEQiNdnszDJlZhYh/dnjZac6DNGn%2bgQbfEd2mcd56lvodWCimqDakw0zc6fK9R%2bIhPWM4AqqhzggRilMEEygHg2QCDAb0BrhcoMWvZBvPZZRwuBjGnkgFit08GQ8D7XZx3rdR9ncKYyW8/VOdbDTFo967M1QFPh8PHjwiBOj4tQadSZCEGihPqyGRNBjcM64toaVB3gN3mD5hCYDHvoa5qtmSQRJ5o9sgbTYY%2baFnu0foCvYq3iwB0w4RPNaD0D7t%2b/b4RYj0sEAecEFVkkACH6JNZnMIhysfZBCgAhCFO7Zz9jzLFWixswFwlC0KArpORcn7Xcx37WsT5M0NY0QPFhLWdu0pGuZ4A%2bh0Mv7cshQdS%2bol69kO1FbVbXaPanhVCNAookYxtFmGib7wf0vGiU2bITfPnypQuDoYemJB7Q14eOShUVxOb0SYzEaDkMCaLGqt5Inj2uciT7NIqwVjNMNQNUPXqHmoJqgZbLtBATaupawWaT4XM9Ax4%2bfGiEEC880JcLAg6GeMb0DQASiiTIMadqq33mMB/Wa/qsTgqmqOPUcIpKA/TVOTKnzpA96vQgXB0ma1nH3JYZQBSQQzyQ1YoQCIAU0qIFES4HYAK/VRIqeQ5VnwByXKhV3EImE02KomsKhcSoyucnV4VKZ5tiwKlTp0w8HvfCBb4cHkSLGPkpa37RM1rg1DX5z%2bMobHd2ty0mIFJ2BRHxunxiCpAqKq0eF5NQj6zhUAseqL9GDS1zs56PGJgHwNms42L3ZekjBdQvyoCFhYW1oijf2IgCKuGoyulFWqbODz1Rb80elXZ%2bVNAPHIVUPD9qRE0hOq4m9Bl1ho3fAkiVVFjsN1C71kKoxm78AU6I31onwC/gE1gHsAc/wRr3PUHW6ftB83%2bNDAD%2bgjNYF/XyjLnvEKHjAyf1ObTMaUFmSxrw4MEDI0h4YTLiEiHN4khgopmdRoGo2kMAY2ouWk4DSS7iDE2gNNGZmZlxDImamkYekh5%2bawhlXJMprVRpiyltiw8gEwwvc2GQvkoKBJEkyHFhlBn0kYJ%2bMwBU%2bprfqxahJZofsI55DYUQSWjjLE2FWadZpWpF1IyiFaktmcDjx4/XNIDv9bwFNLEBMZDhcrXl/A%2bW%2bUhFs7joXNQ/5IfG6HeG/Oww2v9dnODfji%2basrIyL1EjFyWqfQE%2bIb9HUFoHIFIg9kadVD6DogRH57%2bw1/84A/595z%2bmLZ3x%2bnsl88uN%2bp3t3UFXRtS5q9cO9udE/Xrdh9HR4Zz7Kqx1/vbwI6naqmqM2rmGRXyFPnb08fIVy2TrGXDl0YJJdZR67cO1tnu00c%2bMVQftI9W2tT9pM7mUbe9M28a0RIGBKdvRNyp5wKxdWVlxEUDf5JquYuOa5tJnjMtoNYX9ytXhApng9TkTT33v1WViNtVe7td3lgf1PWU2lY7bukyFrW9O2ZpUs000ShLTQJWoyy4v//hBJSc/zS1UL/wK9b9PY8CJxWVTXhrzahMSUhIpv7Y6FdRW1wXSfw81tUGytiZI1lRLP8FTOZDUOUgmZVwO3CyQaGn7paHg5/GlH5dMRUX5LSFIOFT7q8B/P4TkOpBwWHD8jwCiAb%2bGf5D417t374w5cuQIf5D452b%2beLDVf2p8LVCzDStWd1ZXV0UDlpbMjh07GouKin7YtWvX4p8ZhMbFnTt3LuzevfukhP5W/kZLEmTm5ubcX2X4jzD/r/2zwoULF8y5c%2bfc/4oB/qf8P5h8M55C2PFLAAAAAElFTkSuQmCC' /%3e%3c/svg%3e\" width=\"2112\" alt=\"cert-manager installed\" data-srcset=\"/assets/static/cert-manager-installed.82a2fbd.2dd78bf0f4080b3b9bb4d2f53237c6b3.png 480w, /assets/static/cert-manager-installed.cbab2cf.2dd78bf0f4080b3b9bb4d2f53237c6b3.png 1024w, /assets/static/cert-manager-installed.ae78f0b.2dd78bf0f4080b3b9bb4d2f53237c6b3.png 2112w\" data-sizes=\"(max-width: 2112px) 100vw, 2112px\" data-src=\"/assets/static/cert-manager-installed.ae78f0b.2dd78bf0f4080b3b9bb4d2f53237c6b3.png\"><noscript><img class=\"g-image g-image--lazy g-image--loaded\" src=\"/assets/static/cert-manager-installed.ae78f0b.2dd78bf0f4080b3b9bb4d2f53237c6b3.png\" width=\"2112\" alt=\"cert-manager installed\"></noscript></p>\n<p>Here we can move on or we can add the configuration to setup Let's Encrypt certificates.</p>\n<p>Let's go ahead and do that. We can choose whether or not to use them. First, I'm going to create a folder on my workstation called cert-manager so I can store my files. Next, I need to create two yaml files that have configurations for staging and production. </p>\n<p>Staging:</p>\n<pre class=\"shiki\" style=\"background-color: #ffffff\"><code><span class=\"line\"><span style=\"color: #D32F2F\">apiVersion</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #22863A\">cert-manager.io/v1alpha2</span></span>\n<span class=\"line\"><span style=\"color: #D32F2F\">kind</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #22863A\">ClusterIssuer</span></span>\n<span class=\"line\"><span style=\"color: #D32F2F\">metadata</span><span style=\"color: #D32F2F\">:</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">  </span><span style=\"color: #D32F2F\">name</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #22863A\">letsencrypt-staging</span></span>\n<span class=\"line\"><span style=\"color: #D32F2F\">spec</span><span style=\"color: #D32F2F\">:</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">  </span><span style=\"color: #D32F2F\">acme</span><span style=\"color: #D32F2F\">:</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">    </span><span style=\"color: #D32F2F\">email</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #22863A\">&lt;EMAIL&gt;</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">    </span><span style=\"color: #D32F2F\">server</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #22863A\">https://acme-staging-v02.api.letsencrypt.org/directory</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">    </span><span style=\"color: #D32F2F\">privateKeySecretRef</span><span style=\"color: #D32F2F\">:</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">      </span><span style=\"color: #D32F2F\">name</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #22863A\">letsencrypt-staging</span></span></code></pre>\n<p>Production:</p>\n<pre class=\"shiki\" style=\"background-color: #ffffff\"><code><span class=\"line\"><span style=\"color: #D32F2F\">apiVersion</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #22863A\">cert-manager.io/v1alpha2</span></span>\n<span class=\"line\"><span style=\"color: #D32F2F\">kind</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #22863A\">ClusterIssuer</span></span>\n<span class=\"line\"><span style=\"color: #D32F2F\">metadata</span><span style=\"color: #D32F2F\">:</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">  </span><span style=\"color: #D32F2F\">name</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #22863A\">letsencrypt-prod</span></span>\n<span class=\"line\"><span style=\"color: #D32F2F\">spec</span><span style=\"color: #D32F2F\">:</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">  </span><span style=\"color: #D32F2F\">acme</span><span style=\"color: #D32F2F\">:</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">    </span><span style=\"color: #D32F2F\">email</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #22863A\">&lt;EMAIL&gt;</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">    </span><span style=\"color: #D32F2F\">server</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #22863A\">https://acme-v02.api.letsencrypt.org/directory</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">    </span><span style=\"color: #D32F2F\">privateKeySecretRef</span><span style=\"color: #D32F2F\">:</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">      </span><span style=\"color: #D32F2F\">name</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #22863A\">letsencrypt-prod</span></span></code></pre>\n<p>We can then apply them both by browsing to our folder that has them and running:</p>\n<pre class=\"shiki\" style=\"background-color: #ffffff\"><code><span class=\"line\"><span style=\"color: #24292EFF\">kubectl apply -f </span><span style=\"color: #6F42C1\">.</span></span></code></pre>\n<p>Later on when we create ingresses to our cluser we can specify the certificates we want and whether we want staging or production ones.</p>\n<h3 id=\"metallb-load-balancer-configuration\"><a href=\"#metallb-load-balancer-configuration\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>MetalLB Load Balancer Configuration</h3>\n<p>Now that cert-manager is good to go, let's get the next big step done. MetalLB is a load balancer that works really well outside of cloud environments. The load balancer that is part of k3s works great when in the cloud but doesn't do what we need it to do on our cluster. To get started, we need to add another helm repo.</p>\n<pre class=\"shiki\" style=\"background-color: #ffffff\"><code><span class=\"line\"><span style=\"color: #24292EFF\">helm repo add metallb https://metallb.github.io/metallb</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">helm repo update</span></span></code></pre>\n<p>Here we are going to need to grab the custom values yaml file so we can modify it for our use. I like to create folders for each item, browse to folder, and setup my yaml files there. Here's how to grab the values</p>\n<pre class=\"shiki\" style=\"background-color: #ffffff\"><code><span class=\"line\"><span style=\"color: #24292EFF\">helm show values  metallb/metallb </span><span style=\"color: #D32F2F\">&gt;&gt;</span><span style=\"color: #24292EFF\"> metallb.values.yml</span></span></code></pre>\n<p>This is my config:</p>\n<pre class=\"shiki\" style=\"background-color: #ffffff\"><code><span class=\"line\"><span style=\"color: #24292EFF\">---</span></span>\n<span class=\"line\"><span style=\"color: #D32F2F\">configInline</span><span style=\"color: #D32F2F\">:</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">  </span><span style=\"color: #D32F2F\">address-pools</span><span style=\"color: #D32F2F\">:</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">   - </span><span style=\"color: #D32F2F\">name</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #22863A\">default</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">     </span><span style=\"color: #D32F2F\">protocol</span><span style=\"color: #D32F2F\">:</span><span style=\"color: #24292EFF\"> </span><span style=\"color: #22863A\">layer2</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">     </span><span style=\"color: #D32F2F\">addresses</span><span style=\"color: #D32F2F\">:</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">     - </span><span style=\"color: #22863A\">192.168.1.200-192.168.1.220</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">---</span></span></code></pre>\n<p>You can create as many address pools as you like and name them as you see fit. A good example for this is if you want to have services like pihole or unifi to be in their own pool. You could create one called network-services with it's own addresses in this case. I'm just keeping everything in the one spot.</p>\n<p>Let's get MetalLB deployed!</p>\n<pre class=\"shiki\" style=\"background-color: #ffffff\"><code><span class=\"line\"><span style=\"color: #24292EFF\">helm install metallb metallb/metallb \\</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">   -f metallb.values.yml \\</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">  --namespace metallb-system \\</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">  --create-namespace</span></span></code></pre>\n<p>After a minute or so you should have something like this:</p>\n<p><img class=\"g-image g-image--lazy g-image--loading\" src=\"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 2112 1484' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-9faa582d619847725ccb73ae210cef6b'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-9faa582d619847725ccb73ae210cef6b)' width='2112' height='1484' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAtCAYAAAAeA21aAAAACXBIWXMAAAsTAAALEwEAmpwYAAANIElEQVR42tWa2Y/VRRbHz58xRoHel3t7h16hV6C3e7ubxl6xB3pYJtxggAgPZpCw44J4dYTWifg4YjrqAxpNxEziEpfETPxLxlfNvfnVnE/xO3eK290IAyI8nNR%2bquos3zpVv5/s3LlT9u7dK08//bQcPHhQLl%2b%2bLOfOnZMLFy48EDp//ry8/PLLcuzYMRkbG5OJiQnp7%2b%2bX6elp2bdvn%2bzevVt27Nghs7OzMjQ0JNu2bZMXXnhBXnzxRT/2bua4ePGinDx5Ul566SU/5vjx4/LKK6/ImTNn5PTp077P0aNH5Oz5i3L42PPy58W9MrdrQYZHU%2bInbmhomK2vr7%2bh9P7GjRuXW1paHijBs7GxcTmRSHiqqalZTiaTyzrfcl1dna%2bjXFtb66m5ufme52hqairkmYs54WO8qCOta2h6X4m9zk6p0r1GKioqllQT7plnnnE6wLW3t7u2trYHQvDSxbitW7e6PXv2OOY5cOCAW1xcdKp5NzU15et27drl1BJ925YtW1xra%2btdz9HR0eHH9/X1ObUup0otzN3Z2enzQ4ODrr65zZ3bs8Vd3t/t/lSWXEoOLors379fqqqqXlPzdOl0%2bheVUk4H5HQBK2jTpk230W/Vh%2b2bN2/Obd%2b%2b3ZMK3acDAwM5XXBOTd%2bXR0ZGPOmG7si7uE4F7Md3d3fnurq6PD/q4aPCjOfvyjW2tOZ2j7b/sn%2bsw5VUJV8b/8sxkUzmoFRXV2eTyYRTM8w1NTVGai6umNTEnDLy2rQUa2lpaVZt3SpDSJv628YqqZs5NXdPyYSfq0DqAgVSF3Bqnp4Yqwrx/Gw%2b6sIyxHqMN%2bPgw3zkqbN8Y0NDVFlbn6uoqXM11VXZZw8eENm9sCjlZRXZujoW2JBLJusjJWdUV1fvF8nEE7HJYm5T09NufHzMm53PT0xo27S60YJTbbvqmhqX1MkTfpN1hXx9fYMKs3nFxotJccJvXkHaqcW4hYUFp0DthoeHnQKlz4%2bPjzsFUzc/P%2b9dBuElAuGGAkUIyjNqbmrKtauSSktLs9MzMyLHn98ntXUV2fHhNjeT7sxNj3VE0%2blO5ynV6WZGN7upkS1uKtWvabfW9Wq/Pp9Opwfc7Fi/2zXW6%2bbSvW7XeJ%2bbTXV7mvd1Pdr2vzra6bcw0e96ulpdQ6NaVaxJNFqsbcosntQIbUNmldSRNsZWxlizoLA9Jqw7R768vPwNxTyRU%2b/PSVNfSbZrrNp1jydyPVPVUfdUhesYTLjNWrelv91t6hhwrVunXWvPiGvtn7xFPaOupWfM9Q7tdKnUqEunUqqtSTc0NKhaGnKTai2pUa1Pp9zWgQG3c3KHbx/Rtgm1HPVTD4KTk5NO/denlNE2KXVoGCAD2MAoiH6KVW5QQQ0eKZ0XqwRkqccycEPFA1/GOuCJJSm/CNyhb1lZ2ZKWRa78/ap0dnRlh4dHlFk6NzQ4HPX3DyjzYU9M2KcLaGyoL0ia1GtK/V9NSiXf6KlRNWq%2baxrxaTymMUgtT5%2bwzgj%2bhfFxGmo60GphPWjb%2bob8AyuItF%2bONgV%2bTj6RmzdvimosixTn5udA0wjfHlXtKSJ7KeN3vb29vhyfFk7R1k%2biEvUaQxNIHWmjHcbQD38lTz/KaBYNwIcUntZGHWWop6enYA2U4QFf5jGizo4%2b%2btuc9Gf9zMV41s5YXV/EaYFVqQssEYzJu%2b%2b%2bKwpaWQZwJGk%2bgjmDYUhqDJmMCZgQppzXMGYDAB9nLm2WZ/P0oR2BUQdRx4JZCDypYwwCJIUANcoQ/Uk57xlHHn4QbYyHF2Xmt3HUs05cgjbtE3FMghOVlZVL6h4iH3zwgegCs/ibbjinE0T4i0mZzaMJBMDkWASbNk3SziZYHIxJoXjC2wIWW7gtiH4WsLDpUEhWxwbpZ0GNbdyEjKBoI6Vs8xevg7z2iYgNcAmCPz3NRD799FPRzWTxdQUQApPITJXNokXbtLkAAmJhuABCoEw90p%2bZmfGWA%2bFWpAZqjDe%2b1GEZCNcAjLwJHv6syUDP1oSimAuF2JHIeJQAf9Zi7kR/QBErYE6Uq/sgQPIC4BogV65cEa3IwkwlmFOKWIiZPSmTwpSBMEKqTGz%2byrFkxw6BR3EAVQxWIfiRWoATApiBYEhrgaXxNh5hf9YVBFCRlokY2dvSF198IfL111%2bLStyDoPpETjcWoR0EwubQPIIgRRCQWQCmhCAIRhAakiZPf7SI9hBYqD2zJnhQh6bgwXj623EHL7THugx4WRP9IHgxB1bEeCzA5qS/zcV6sEz2ojyjOOSmz9JXX30lcvXqVVEf8RZA3Kza9SBoSG4CMLNk0UjQgJD28PJilw%2bsgnr8j9Tq6Gc%2bDWZgTdSFlx/yFlaHlyrGG26EvEitbPhhuGDj4jki7joITQW09O23397CAN2ExwCt9BiA5MOjBmkiNXzNfJA8AjAhkTdUR0CUAU1DdTbKGKtDgIbulFmUCRWy/jaGfqTwt6OPfgjAANHG0s/G2AlEWfv6UwCLwQK%2b%2beYbkY8%2b%2bogHimy8sZwyLxyDIQiyUSzBTBDm%2bBbt8QniJzfAo97yCIyFkDeTZQ76Y9psiDngT2o4Qx8zfchM2VwTPvAzoZubmfvGmvZt9CUO0L65OF5Y%2bvLLL0Xeeust0cmy8THnQdA0bgsw1EXaTBKCIMwwMQOz4ijNbmwGUmE%2brFsrEiyO7IqB0PitxiME2biPB0EEpkpc%2buGHH0RAQlyAG57euLhvR3bsoAk2z4Aw3LRNhRcNqwvJ2uhn1%2bU/mCJdD27uMeD7778XuXTpkgdBNqwa54jwGGDIC1qbH6FxzAnBIBRMGIvAUiz0xGfNXM16sBy75YUUCuZuhHSn/nZb/A1%2b/jZ4mwAsEJqbm3NKOd1IRB4/BzjYRHisWUAD4eO0WXRmEZpFdAZcIPAjYgUrBXD9%2bnXRRWbROpGgbjSyUBfNh%2bEwZZAbBliAAdDdusAjIISVAnjvvfdETTkbByK810V2wSEIYfPxsVG4AYZgRHo3kz%2byFsB1GBfAnDkG1b%2b9C%2bDndgExJF5rE6vVP0LAd2cBXLt2zR%2bDcbzvI0EuNGgcMMOHsQTAEP/%2bfzb2KJ0CKwTw%2beefewsAA3ABNf8oDE9ZvIWUdtaudvTZmVx8zv8em78PnisF8NNPP4lqPhu/vPjLkN3v7fECPEAAHHsGgJCFuRA4YX3srkAfJjZB3AkoV6sP0zD2uA8hrBTAjRs3%2bB7n4wAVQk5NP%2bK4s6csABHh2AMkYBkGSmzSbnNs3O4PWBRHpD1qcIGxmN1ebyhbzE7eMCd8CDFl2APJA7eAMBRWX8%2bpr0d27ltszgLBASzBQmQWinDisNLXsyk2b3G9PYmZcEb9K3HaB0t24wRrTGh2X7A7Aqk9xdm1%2bj5jipUC%2bPjjj/1lKH4D4K4c2eS2OXsQsYWyKdqxFDZhkaMJza7OZvrFDxfFjxjF9SGmWGph9wN3gcOHD0sikcjGk/BgGBnwhZ/C7J5uHybsjk3f4jt6OPb3oAdqAdlsVnTxWcyV9zI1z8je%2b4o1FX6hCWNv09Ba7fdzEtzrfeGeBcAPBco4i18Cgurr/jpssb09PBiiP6bn/9oC4C%2bNqqqqLGZLIMRliKDHHiHwb7sb/Ja2V9P8IyaElQI4cuSIx4DYZ3kt8ZGggRnWYNo3LAhT83vzeat/bEJhE0D85ZWPBrycFr4AYQEcQbgIKQ8n5DkB7Mjjjwy7HXJcYjGr3f8fCwHwbZBN2%2bMl7mBncHj1DRmvhviPjQUcPXq0IAB%2bP%2bE9ABcIHz0AQ%2bIBwwU0HX7TL/b5e9n8QxbUSgEcOnRIampqfByAAPh4YK%2bspByJtFm8bx9Cw/fB8OeGsD5M16p7yGC5UgBnz54VXVA2/pDAD0URHXlDBw94JOWrqoJbRBtEmT5tbf5jo89TT55XZdpJqSOFB%2bNpp80oDroK6e9NxY%2bi3333HS9C/5Senu7Xbj1obvtVTT4/0D%2bQHx0dyff39efV9PNDw8P5ufn5vOKBp1RqNK8Wku/VdnWZvFpNPpVO5xUY8wqCeeWVV2vJq7v4OrUi308nzStAep6kKpi8Cimvi8vr4h4KqQX8igB0DVd//PFHkWdfT0lDz4Y3O1LVrmOkxnVOVLquHZWudWutlqtdZ0%2bba27r87/INHdtd83dY542dY9omnbtvaP%2b/79XX33VfxgNzd1C5bCu%2bGr7MMmu5vEl653l5WWRk//YJxsqn%2bioSD71bFntU5nyuiczFY1PZMpq1mXKE09mKqvLMyWlFZn15bWZksqkUsLThgql8ppMaUVtZlNra0Y1nVm3bl2mtLQ0U1JS4mn9%2bvWF/Fq0YcOGh0bxmg5WVlYeUdzrPnXqlMjg/EbJXJiQE9cWJHvjsLzxr7/K1X8vyqXrR%2bX1zw7JO9dfl1MXrsjf3rwhZ9%2b5KWfe/kTOKp1%2b%2bzM59eaHcmHpQ/nPzz%2bLc06ee%2b45H1rzjy7YcuLECWES8tT90cQ6%2bHeYdUF62sl/AWdsXBxuAhDzAAAAAElFTkSuQmCC' /%3e%3c/svg%3e\" width=\"2112\" alt=\"metallb installed\" data-srcset=\"/assets/static/metallb-installed.82a2fbd.08ac804a9afe1bed925df3a162b189a9.png 480w, /assets/static/metallb-installed.cbab2cf.08ac804a9afe1bed925df3a162b189a9.png 1024w, /assets/static/metallb-installed.ae78f0b.08ac804a9afe1bed925df3a162b189a9.png 2112w\" data-sizes=\"(max-width: 2112px) 100vw, 2112px\" data-src=\"/assets/static/metallb-installed.ae78f0b.08ac804a9afe1bed925df3a162b189a9.png\"><noscript><img class=\"g-image g-image--lazy g-image--loaded\" src=\"/assets/static/metallb-installed.ae78f0b.08ac804a9afe1bed925df3a162b189a9.png\" width=\"2112\" alt=\"metallb installed\"></noscript></p>\n<h3 id=\"installing-rancher\"><a href=\"#installing-rancher\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Installing Rancher</h3>\n<p>Time for the big one. So far we have been doing everything from the terminal. I like the control and flexibility of it but let's be honest, having a web app that gives us all of these tools as well as some monitoring information will be very nice. Rancher also has the ability to manage multiple clusters and manage storage, backups, etc. It's a really powerful and useful tool. To get it installed, you guessed it, helm repo time!</p>\n<pre class=\"shiki\" style=\"background-color: #ffffff\"><code><span class=\"line\"><span style=\"color: #24292EFF\">helm repo add rancher-latest https://releases.rancher.com/server-charts/latest</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">helm repo update</span></span></code></pre>\n<p>There are actually three branches to this: stable, latest, alpha. If you are planning to use this in a production environment I would recommend stable. You have some options here, if you want to use let's encrypt certificates you can or you can go with self-signed. I'm going with self-signed since this is going to stay internal. Both options are listed below</p>\n<p>Self-Signed Certs:</p>\n<pre class=\"shiki\" style=\"background-color: #ffffff\"><code><span class=\"line\"><span style=\"color: #24292EFF\">helm install rancher rancher-latest/rancher \\</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">  --namespace cattle-system \\</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">  --create-namespace \\</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">  --set hostname=rancher.my.org \\</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">  --set replicas=3</span></span></code></pre>\n<p>Let's Encrypt:</p>\n<pre class=\"shiki\" style=\"background-color: #ffffff\"><code><span class=\"line\"><span style=\"color: #24292EFF\">helm install rancher rancher-latest/rancher \\</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">  --namespace cattle-system \\</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">  --create-namespace \\</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">  --set hostname=rancher.my.org \\</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">  --set replicas=3 \\</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">  --set ingress.tls.source=letsEncrypt \\</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">  --set letsEncrypt.email=me@example.org</span></span></code></pre>\n<p>Let's break this down... first is the rancher image from the repo, the namespace, the hostname we are going to use in our network (adjust to your needs. Mine is rancher.local), the number of replicas, and for let's encrypt we have the ingress tls source. For me, I am only doing 1 replica and self-signed certs. My deployment looks like this:</p>\n<pre class=\"shiki\" style=\"background-color: #ffffff\"><code><span class=\"line\"><span style=\"color: #24292EFF\">helm install rancher rancher-latest/rancher \\</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">  --namespace cattle-system \\</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">  --create-namespace</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">  --set hostname=rancher.homelab \\</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">  --set replicas=1</span></span></code></pre>\n<p><img class=\"g-image g-image--lazy g-image--loading\" src=\"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 2112 2004' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-fc9cd2fa5368156f6c271720ab6da132'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-fc9cd2fa5368156f6c271720ab6da132)' width='2112' height='2004' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAA9CAYAAAAd1W/BAAAACXBIWXMAAAsTAAALEwEAmpwYAAAPn0lEQVR42tWbW29U1xXHzwdJGsCAjcdXbIM9vsz4iufi8R0DQblJCakrSBOFqgqhJYQoEZX6EFWVqlZKpT7AqFWTVOpnadOnPrcv7VsUH87u%2bm2f/2T7%2bIwxKUTwsHT27Ptae933nmh9fT167bXXouXl5ejatWvR3bt3o9u3b0cffvjhY4c7d%2b5Er776alStVqP5%2bfmoVqtFGxsb0ZUrV6K1tbXopZdeij7%2b%2bONHnvejjz6Kbty44b/A22%2b/HX3yySfRrVu3ops3b/q6t966Ft364HZ09d33ohdffi26cOlyNHeuGkXvv/9%2bNDAwcKVQKHzZ19d3b2ho6P7p06efGPT29t7v7u6%2b39XVdf/UqVP3bd37tq6v6%2bnpuf9d1zccWuX%2b/n4/z%2bDgoAfV%2bfX7B%2b8VegfA9cr16z%2bJos8%2b%2byyyjXz5xhtvuM3NTWcD3NmzZ92ZM2ceO4yMjDjjNPfKK6844zr/tVN3xhHu8uXLbmVlxQ0PD3%2bnuS9duuTm5ubc1NSUL4%2bOjvr6YrHo111YmHf9Q6PunfNF95sfldzRzt4v3/zlX6LIORcZ9e%2bZKLhKpfK1UWnHBu7YoLZgm2xBtu6gccD09PSOsf/O0tLSjonAzrlz53ZKpdLOwsLCzszMTNs52q2pMuOZZ2xsbMfw8DjYQe5MTk76fuPjxZ2BoZGdrYUzX19dH3Mnu3vv/cNw9wQwDmgaEVxPTyE2VkqMXdxAFgb6HfVGIDc0BAx54Ddtw8NDvj53bDCHiYDr7elxrGfrut11d3%2bbODhjzT1Af9uT50wBv2nTb/owlnkoM5fGUqdyf19f0tndGx/r6rG1u5rgHv37X/%2bNThw/2ezp6XOFnt640N2bFApMKOjxwESdXV2uVCq7ldVVd35ry21tXXDr6xtudm7eLTWWXaVac12GVAGECnlQcL22mf6BwRbCAn5n6wCIBFubknQXLlywNbecKU43Ozvr6vW6h7xxIYiINpcdbl88NnrWdXR0NP/29692OaBvoLO5Whl152vFeHNpNNmsjTkP1aLbrIy7jcqE26iWrX3KXVwquQt1k7NGuQX83qpN%2bi/tjOF3COerEx5oe9HGzEyOGlHtVPr7WqfJJj2H5AB9PHelp69T1feQkBjEzGNE%2b6PbFYGvosHZo81i46Qr1k/GExsdyfhahxs7d8pNLHe58dKoGx6bdcMzG25yruFqtapbqtfcxvqaW11ZdvPzc65cmnKVxXNuubHk62emy9an7i5snXfra8Ytmxu%2bL33mZmfc2uqKbze5dYuLi/4UTSf4kx0fH/dihTKUmEnUsqD6sN9DIDECxhMTE6z5hZMOmBwvNVca6251eSOuVRpJo77qzs1XPNTrS6ZdZ12jXnVTkxOuWqu5xUrF2L1qyM/7DaPZFxcrrmaITE2VduXNqNxvp7WrN4Z8uY%2b6fk5w98tpAiCh0xXwG67IQzSPGIcBEQCRMovzLQHOzHc1p1dPu8naQFze6EumlntdcaHfFRd73dT0hDszPutGZtZdsbzoTwqzhcmCAKa5PQFMo/uvaXlfx29OF4Di9GUcv03zu3K57M0W/ZBn6gTUwR1sFHMWEuH/ARHALAN7FQH%2bE/UOn2yOlHrd%2bNzpuFQdSRbWxl1pYcxN10ZdebbsRkYnXXG64spzFb9BkBH7UmbDIAQ3YHtBGEKAAPUgwaJhnZkrX0eZL2PMjHmgD1/8EWz4I7L5Q0WA%2bQMCuKhwqrc5NDjiiqMTcb26nGyubRnLL7v11U1/qsj4SqPu5k0UQBakIcSqWQPK9AEJOR2wbsjSUnAPq8tCKAJPlABm/5ts3JCIq7VqUi6X/GktmVIzp8IrqQ3zEqmT6YGdAU4XsaAfLM1JMhcLZhXZw%2bBR%2bz82AuAI0cFYOLYTTkCEE%2bWEQQyZBmm%2bIJh1TjBFOjWZtF0H6duTVp2AOtZUe6j4sk5POD7knLCuHdeF7QaJ7c9bgT1K0JBuYoLM2YgNyQSkpdSQ80aj4U/7/Pnz3iGhDVlnUkSBGAKdwMSMkY6gH1zDHBCvmloOToAy8o8ChINYA8UK8cPx1MtMciiMY3/8Zk4pU/aBOy/lSzvjmF8xgtUntseYOaz9WwIYlZpMbgNiWzjRRpms7k3bVEv5MTmbY1KIQB0bZyMiGu1snA0BlGlnLuaBKFpDRGZ9EEKkUJDoE74oVoDfrKc6%2bito0xjW4BDoC0gp005f65OYeMYQZY8IGIJNNm8nGdvmEjYsxCgzGURgMrQzi7ABFg01NohpA4znN/NKQUpHAIyjHWLRJvY9jAhkxSqvbzsRsHX2i4BttkkIaTIfmyJKxGJ8YXkQZQIIgNyGSk6Kizb9liWgnLfp8Ldk%2bQkrv4OVoLFKE1Y0toztlBICDggAQABOLmWbFitLViESbA2n0C6rQX84CEUqAh60ucds7h6NALbpJgkJQzy2zScoO5CArUFE/rqUDWUQRXFmPbV2yHxPCH43ApiMNjktq/QEQHnoBKV1KSPLUkSwOciLzR/mpz8lRMgngJ1qE1ZHB1hDAtty2iCPZoYgsL5kO1Q%2bh0XqqeYAO%2b0mMmwnjYnwOgDtDOKcNpB32g9D7ilB%2buEEMDPWxF7jBxibJ3CDAh0604aCC%2bX9MAg/MwTAE0xtvrcCis8FoaubZ4dVlmvbLo5/agmAFUDu4QAjQsLJowMU5yMOKEV5dJhHCIYjo3qsA1zDGMpP2ckfTAA75WYq57F5ZbiLXuFRhykE0mDJW4HUrfR95GoKNCbkjCynZAObrJOkvnlcJ64MPb9wjux8YdaJjHduMIQjlCYrYtxF%2bdSh9sfd1SUEZSlGubaACBC6u9TJj2ccppR5IZL60C4XmzaIzW/2JDeaeiVa4E7mZW/0U9JFyRTFFYoPFDdYObFvDIfu4QAzd00iOnQAAQMODqyvWIBJcY4wiyyeXqJ49qcu9SJbERzj5ENINBinFJlCa/oqTaagCGDTCqgA%2bgLUMVapN3mhAMTRHuirNZXASYM9fJwYEd7nCjMYAthECR2YAGvAQICNUKdNKw0GEShzSnwZy4YU7qJb%2bIp4bFwRIgjQJmLoRDkMfnPqzKdgSTH/o4hAGGS1FYHu7u5meusTp0mDfZOHefnsguGG1C/sqzy%2bLIq8wzBJ0q78mC1JvhK0k2mmSQcaE2VuOXlOQIkO6jkhZXpVx%2bkyKexHf76cPHNQr4QKHCWWVUT5VFgBo3gTNiMnaBtLpNDSPGHLAgCyDniF9AmTFbTJe2QOWYpQkfFFIR0U9x/GImRFIOyXF3ofmA8wZDwB7OvNIAgrqyLtKqQZLNMnbS7iCIS4sjf6aj5ZiTDrw6kAlFkvJLjS5mG2h3mk8fmyD/UL59D86fgEHFMFuzcaRJkRC6ApUVZocSk1yrCt6qWlYXMWksanDsUmLQ3rMwesr3SYxER5O%2baS0lTaTc4XXxBQvkGXMcwNUAakrGWVQlDWKbUGiR1ejBLekxMsFAreEyQhYpRNlO8XAcRecpGzLJvN7WdZN5vuUv231%2bvttTl92mWNsyKQrcuZz%2bsAOGKPCECANNSNbaIkq31DrRwimDEx%2b5AO%2b2eJpLawX97GD0Iq3EdoHrVeJh/ozSC3w5mrMRcZmzVTG%2bzDYdg6VYqttDMyJHaVPMpJUT1j%2bMo3kPOjlLgcF77oETkqlBV96g6ROQD2AAvLelBWql37VApc%2bQslY9mjUnd8bV283P2eoE3W0gHmBSaUGRQ%2bQmDTAOIhF5c%2bcmeV0oYY/GYsrMZm%2bMqbY9NyU/nSDwLQT2N1AUMdCKpNbrDqZGmEoAgWpth1F8m6RLrpIe8VAZRgukDM5YE0p78eM%2boqL6hLBibOOkAHOUd5bPxdRSA7b%2bgdhm153qJEIPVh9nqCqazzeiIJvTHJbijD0g3hXV72Xi/vni%2bvj%2bqy5cP0f5S10roEHPc5QkaVZuqZeSUYUliDQ00rAqguew%2bYp5nzkih5mj47V7hW1sVup/DaWQHFAvusgLFEM73yik1GEtllWF7yXE%2bftMjt1f2eHjcoqpPPoKsvQPcE6BApQ5SU9Ir0CW2cnAIpxE9OFWuHUabS9KlGbylaRYm61qNejzq4%2bLXfMXpsjx9gg5qpZvQpMRwFBrKAssO6qCRSC39LT1BHGK0sEmVpZm384sWLfnPMj/NCHf10wcrGFE4zluSsLjalIHUVx1fJF36Hnqk8RClJKUY8QZI%2bEHPf3WBq7nw4zKKwlBIVDGAimR9tKEyWsBhEo03mJ3ztoec0KoeIyeTJ%2boSenu4gWSfP4ToodsiJM9qHw6mctR5KhgnO0JnJc2jy7ufzHj2FCjXbtx1kk6xP6IVITzNFxCvB8IYnm%2bIOb3tCLysby%2bddlbW7MTosPAYitM8HwJJkhVEUsKXifFgWGdfbAL0a0YME6Qhdpqb3C57d6cdi1Os5HWXkVamxdncNT%2bh%2bsX1WGG%2bMfBnBkO7/lBPQy2sUjOJ5hcFKeuoGSYpIoPEKj8NMs2T7e7w7aC8CbEQ6IM/raufFtXvplQ2UDnoRlpccaSdq2f5hpJqnGDN1%2bUqQhEga4PiscPjeL3yWotNnMSU2wqQHbeIIJVGyz1rCBAX99BVHKAgT94TcqBcpYeKFdt1aK8Wu5IhMoJIo%2bDiYwX1PZHghktpkIqVEWVrqmFQBkV51MikyjJ3GF9DjKWV9pT/CGyXa6KNHUcod6updjlDqj7QiTvaix1P058V46ExBCGWXlYdkDcpKuijFbuvz%2biVmvj2OkHXwt8MkRckIsQEgHdTK28u74svpyIbrTRCnlOeKPiRA2Wev88xfu4eVeWY4L/%2bQDYb2iABJ0VR5%2bTdCsJDe%2bgiU9ATyApEnqcweZ1o8NxgiI5QqnFZG6JCPj9u%2b5m5XdxByB12v5/klh72OD%2brbvBUudO8jwODpwcwztMM5L0/hm4DD3Aucbu4%2bJjyzMzw8gh%2bAGHjALwi/3BsgSymhnilICbCzLyc4vzB3n6js0sVL35TKpQfVSvVBrV570GgsP1iq1x/UgaWG/W48MO36wPTFA5vsmQQjwDfpHyb%2b7AnwT/f7aGD6yJ/GljpdsXbKFdeOu%2bLKCXdm/pQbq1ndlGn2s9NusLzmzpYqPqT99NNP9z1%2bflYAa5D%2bZeavLQ440vH8TEfXD64d7Xxuu%2bPU89sdhee2j514wZePHe/YPtpxcvvo8c7tF46d2O7vH9g2W7x95MiR7aNHjz5zYPv%2b4fHjx3/c2dm56AkwcW4ourzdiK7duRC99%2btXop/97tXo53%2b4HP307pvRzd%2b%2bHN24czN658Yvonc%2b%2bFX01o270eeff%2bGJxv9zr1%2b/7uHdd999ZoD9Xr16NXr99dd5Hhj9D5CSdJzZQGP/AAAAAElFTkSuQmCC' /%3e%3c/svg%3e\" width=\"2112\" alt=\"rancher installed\" data-srcset=\"/assets/static/rancher-installed.82a2fbd.c0baa3491464b628e771b94ddfa9c38c.png 480w, /assets/static/rancher-installed.cbab2cf.c0baa3491464b628e771b94ddfa9c38c.png 1024w, /assets/static/rancher-installed.ae78f0b.c0baa3491464b628e771b94ddfa9c38c.png 2112w\" data-sizes=\"(max-width: 2112px) 100vw, 2112px\" data-src=\"/assets/static/rancher-installed.ae78f0b.c0baa3491464b628e771b94ddfa9c38c.png\"><noscript><img class=\"g-image g-image--lazy g-image--loaded\" src=\"/assets/static/rancher-installed.ae78f0b.c0baa3491464b628e771b94ddfa9c38c.png\" width=\"2112\" alt=\"rancher installed\"></noscript></p>\n<p>We need to wait a bit for Rancher to build everything out. We can watch the progress though!</p>\n<pre class=\"shiki\" style=\"background-color: #ffffff\"><code><span class=\"line\"><span style=\"color: #24292EFF\">watch kubectl get all -n cattle-system</span></span></code></pre>\n<p><img class=\"g-image g-image--lazy g-image--loading\" src=\"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 2112 1164' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-14c8bdcbfbd811bacd8480890f5d0c3f'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-14c8bdcbfbd811bacd8480890f5d0c3f)' width='2112' height='1164' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAjCAYAAAAkCQwqAAAACXBIWXMAAAsTAAALEwEAmpwYAAAIXElEQVR42u2ZyW/UyxHHW0r%2bhNwtJ2Cbscdjj8f7Pt73HS94wZjFPHHgwiFSpJwS5/2UCB4IAmfEheWMxHJ84sDpXfhb3tPPmkp92r%2badGZssHmO9AQglbp/3dXVtXyrujy45eVll/z7ndLvvxLCVteSn3JuYWHB1dfX72Sz2Z%2bUfszlcu%2bampr%2bb9TY2PiuoaHhXSaT8cS3rTF%2bjkx0bmlp8WNIao8nePxcx5Zc9sfWXPan2rr0ztTMnHOjo6OusrLyzqVLl2RnZ0dUEWltbRUVeOrU3Nwsc3NzcvnyZdnd3ZWrV6/6O6empmR7e1s0GKLKHvt%2b42tra5PNzU3p7%2b%2bXgYEBuXDhgr%2bL9c7OTs8zNjoitY3NcvtKt9zb7ZE/VKTu/LFvw7mLFy%2b66urq7wcHB2VoaOgXVWBfD5dTLudH9tWbRWpSUm8fzItnc4fKgK%2bjo2O/q6trP5/P76vC%2bz09PX6NUZX1PMabO%2bLObMmdzHt7e70cNdrPWVMH%2bTWbN2Zz%2bzP55l/mBlrkT9Wp7xe2vnNua2vLVVVVRanaWlGKNR0KSlJOGUmn0wcRUs/i3fb2dh%2bFbPYgahA84bl0iRz2oVQq5alW7w3J9o3q6ur8nRZxi7ohVY3zPJxlhJBrZyG7tz6dLlSn0rGSVFWdjbY3151bXFwgBSLdlEx9OlYqKOm8LqGDeX1ahdWmpKe7Sxbm52T5/JKsra7I%2baVFGRkekpnpSZmemvR8nKlP1yZn04GMWmlsyEhzrknSidKfonPnzomiQ2ZnZ2VxcdGnCfO%2bvj4ZHx%2bX4eFhUQR7Pgy3saamxs8ZcQIOUD61rT5WNEtFRUU0MTHp3F//8meXbWyIFsd7ZWt%2bMF6Z7CmsTffL%2bmzek377cWthWC7M9MvG3IAsjXUKPKtTvbI80e3XFkba5fx4l671ef7tpRHPz3nG9dkBlTHk%2bZfGOqS7rUm0EMnhaPtfskgaEog%2bRPQ1DXy%2bgwb2QSYj6LT6wD68ylPQlIjhVXn/un79unMPHz50mjPR6Ni4TM/Mxj29fQUlGR4ZVe%2bOSHtHh4yNT8i8en5waFjyA4PS15%2bXufkF6erukf78gAwpX2tbu/T29Wu0ev3Z0dEx5R/SwpSXyalpySsfZzq7uiXT0Chakb2ixyGMxCAiPjMzo7JHRQ2RiYkJ6pZQv8bGxqS7u9uvgQ4KK2sgBB7GkZGRgq7HIEhl/fDixYv/1gB9khSeDbFeWOBCfZI8NSVzPJ5N1szzB3Sw5ufJfoPKgt9k2B7rzDl/lKEh%2bfuDdXT0eiYyDQlGpidjJtGhZL%2bgkY9x0PT09J03b9449%2bTJE6cVOVpZWRFtimJlLNjhcAznwNIuCy8nKktLSz5XJycnPS9R0ct81FgHkuTjYXIZkaF6%2bOihEzlPBNnniWMPSFsKNJ0AScpf0HOx2usd8OrVK%2bceP37s1CPR/Pw8xYXNAsomkPFwAlZAj4NAC8IweNhHMSLCm4scvskznKJPnudHJjIwxuTbHLkYjAzkci/GIc8qPwbDh1OAPHuGkBBBn3ACwS064PXr185FUeQ0KhGGaLWNlQoYwDeNBRFhjsIYw%2bUIQCmqM8Q%2bl1N0mIeFCr5EtneM1hsv19aYIxejMQh%2b8h2UZUpSCV1wGjKY2zo8x3RCuQNu3rzpFJIRAqmQYQqE%2bWRrXGA9gPFkktxOYOaNSOQVK3QIc6vWOAoe5mag1RcijGPsLoO9OcbqgHV7ofEfcUK5A54/f%2b40qtH6%2bjotZEyeoIQ9HSGhAJEjL4E1BpgxKMRIq0vO23sNtOFFniEDFJmMjY0NP0%2bUKjY6pBI6UUvgO2i4ssWUMIeQnmtra0XHnTgF7t%2b/79SDERfp0xDzVFjRYoTIXVIA71sDAmQxFj6Utcgz5wJ44LWaYIYgg4iZbBxkChqkkYNTMI5z3AEhk2/0IXWQhV4UXnsGS%2bvCJx1w5coVpx1TlFzuEUAEDAVGYcW1aNp6mCa2Hz5l4YsRKhg%2bb/aysG58dmeIyNKiF%2br5WTXg3r17HgFERz1bVgPC3A0NsTw0SFuEiS7G2AvCCAIsFUgTlLTmhcgycp6iiFxDkDm3tD8wOqx3OHENePbsme8DeF/1nY7VgIJVaIoPhYk5BQnjgBnfVGKr1igL1DHWCh6GwQ8f8uz1sLqBwbZmnRr8OAA5VhcMTUc1TsdZ%2b6gD7t6969SQiHxTpWNVpEDDYu8zxqEMUUJh%2bJhby4kDWCfKFjEus3wMEWOowShy2NbCFIDYwwk4yZ67Y77zJy%2bC29vb/B4QJRCPaRfDfC2l0u4vLF4fa2tLIWrPYalRtldsv4Nzp%2bCEcgc8ffrUafQinhKlMgccVgPC0QrgYXOiSIUGQYxUfSJNCtHRra6uegJlrIMi%2bFgDVciyKm%2bp9SudUO6AR48eOYVrxJutisaqRMFgDiNG2HNFrrKHwowobD0%2bigJZlCXvURYokwoo35b8iIJRrOME6kHY5CCPvfCdxxE4i/tIh1NHwK1bt5xeFCXFLVaFChjANwozRwm%2bw4LIaN0eSlPAIOYYZa1xmCIG56PW7W/3EPqscZc58tQdsLOz42pqaqIE9sdKgdIacVgKhHXgqD97S9fNGSHMwzuP8cyd3AG7u7u%2bEUoY/O8Bv7LSlin5ufPPeOZO7oBr164VHaDCY6VTccBvlL454JsDvjngK3dA2W%2bCX4sDktfDI4BepfQZ/EfC9HPihC%2bSeOYVAT/T2KkDbr99%2b/bg/wVSqdQPXzDsiz%2bq0KTRzj948IA2/997e3vObW5uuoqKiuGzZ8/%2b88yZM3/Xce9LpcrKyj11xt9u3LhxW/8CnsR2p322e/nypfvw4YMTka%2bG3r9/zw9B7j%2bgh/mEg/9SDwAAAABJRU5ErkJggg==' /%3e%3c/svg%3e\" width=\"2112\" alt=\"watch rancher\" data-srcset=\"/assets/static/watch-rancher.82a2fbd.e1ac129a92600fbcd4aba138d10d750a.png 480w, /assets/static/watch-rancher.cbab2cf.e1ac129a92600fbcd4aba138d10d750a.png 1024w, /assets/static/watch-rancher.ae78f0b.e1ac129a92600fbcd4aba138d10d750a.png 2112w\" data-sizes=\"(max-width: 2112px) 100vw, 2112px\" data-src=\"/assets/static/watch-rancher.ae78f0b.e1ac129a92600fbcd4aba138d10d750a.png\"><noscript><img class=\"g-image g-image--lazy g-image--loaded\" src=\"/assets/static/watch-rancher.ae78f0b.e1ac129a92600fbcd4aba138d10d750a.png\" width=\"2112\" alt=\"watch rancher\"></noscript></p>\n<p>Remember, you can use the -o wide option also to see which worker nodes are taking on the tasks assigned. Make sure you watch in another terminal tab because we will need the helm output from earlier in a bit. This part can take a while so grab a coffee or a snack.</p>\n<p>Once our kubectl output looks like this we are ready to grab some more info and get everything configured!</p>\n<p><img class=\"g-image g-image--lazy g-image--loading\" src=\"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 2560 848' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-981bc4b5afd145e2cfef9513759e892b'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-981bc4b5afd145e2cfef9513759e892b)' width='2560' height='848' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAVCAYAAAD2KuiaAAAACXBIWXMAAAsTAAALEwEAmpwYAAAGh0lEQVR42uWXWZPaRhDH%2bQKpPCRVfonX3suxdwGBQOIQSNznAnt4t/KWbKry/T9ArJn0b6CxWEMZu/KUPHTN1dPHv4%2bRcufn5z81Go0/KpXKc7lcPop8399Lx96t1WrP9Xr9OQiC7ZzxazK%2bR28Yhs/VatVRqVQSKj8HlfKf3Ub593fvP/yce33yurVaLW2r1bLCZOWCDYIMyTp8QfAJYI50rnfX94Odua4ZxVE7m83sx48f3Qjd3t7axeJGzuTO9m7wgri/0bXRV93YEHxxJ9yuh8OB7fV6ttPprOXXGnbYadq/FqG9%2bPVDnDt9exYVC15ayEPFT4VCMS0W8jtUyOfTfIYkYqkITKMoSiV70na77eaFQmFL8DEWi8XtqHPP81KJTuqVSmnRUxL9xT2EPTLmZQzCWpp0umk7TtJ6o5m2Wu00Tjqp71fS63xhy5%2blfHYt56Lrk9Nf8v4%2bPT1t507f/RJdly5tMXhvveCD8cp5U/CqJl%2bqmkIpMIVyaCrV0EhkjKBqBHkjDpskSUyz2TTiuBEw3Mi5OGbEUSNRcfOrqyu3FkAcCQCOrq%2bvTegXTb8VmG5UNb1W1SQN3yT1suk0faGKI92PZX/UaZjVpGsW446ZDdpmKfPbWd%2bMkrrpORnBV2kQiw9%2byQJ6yfPiXND0ouXj2MYTSc/EM/WWpHIjsbWoZ8Ooayv12LaTrk3i2IqTViJuBQB7c3Pj0iqW/eVyacfjsRVQJJUX7gzibDAYWAHC3eHuunR8udu1s%2bnE1muBbdRrthZW7Xw2sberhZ2OR3YyGtrJeGibjZpd3MzscjG3o2Hf9rqJHfZ7thZQAr6jMKi4%2b0eSqfi%2b8%2bXh/r6TC6phtFreirKZnU7mpt/ri8K5OCWGTMbi2NDVJz1CUn/rxGQycXWIIADAYepOe4k0J8d/f3/vRsDiTr/fdzKoS8AaDId2OBq5Oh4Mhna5Wrlz1ztEXkVkIXs6nW77Enok7Z0OHctHkvCSmdht7gFAOmOEMe12C%2bNJZRe5OE5c1HAI4yHOWGMccwzB2DV/7OZSFusGtWmKyFZezuABEAj5epfmqHsKIIYCNjq5y3rttG%2bJojbib6RdAERYRCfGSOpbu7XU7ZYwbCiR0uhjDGvSnogKiI5Id2Sp0/CxhhcZ7CGbUul2u0429zkfSRagmz1pUlvnFQhdZ8n/PhB2AZCNSFN4tVqxuU5NcYa0IzpEgHPOMBRHWJPSOIgTGD%2bfz1054CSAcI81%2b/AQXSINQE9PT27OEwipDYCKTHj3Of2vAyDdOCIikDhtMAADIZzFEKKnkdIoEkHAYaQ8SFtkMNeIKR%2byUC7d30UYGTgJAPBzD/nwovMQAJpp0EvnvwGMLzOASJLeNAitsSxlFWMw2YHDAIChrDXFFTh1jj1SGgfRA8DoAggM0VLSuteU3zdHHnLQR8Yp0Or8kSDsAiCGR3d3dy79BHmDQUQAJ0hdokItb3qEU64Rx3mijPParLTBoQQZlBO8OI8eHNCmxh10sa9AUHaACD%2bZofLg5QybkIlsgEQWYB/j/IZnFwCJRKSfihJRPnLcHMEaYU3t7OctwhhxjhEFeq7K9AXBQABEFqRRZB8g0KM6lEdLTMFCR/bVgB%2b7NUDZTMnSyyw5%2bAo0IxcRo0%2bYfsMzx1AlhGQFagfHCIwlQhhI1IgiMrTOKQUcJ9IQoGhpIYcIE1W1Ifuvoc4gQ8uQO2ojwGNf9p9DAcYWDdoX3wGeV4puV1IC84V8ba3MfE63vxNHZvb%2bbj3SpeWFcK%2bANkElnFZAmGuz0vceg4kUdzXlkUfk1HD2AYRS4DVAFyMA6hengoIuSgB5%2bnIgj/Hx8dHtqQ7o4eHB7ZN1G32uz30uAf8qmtxIh5917HDaNYNRz46nN7Y3nMq4sJ3%2bxD4%2b/eb%2b3jBakccpANg0z%2b2XnzYzjQhgkBEYxR4yuK%2byIM0SMkn3MFh7AXMySL8ytdGqHYzw6X34AVTnnDNCwmM2mWEEnE7uXeFtVG3lbdjN2yDOm7Ap0Qzb1q/F1q8ntlht2tF43RTp3PvqTFM024henh3q7PvqNVu3O19/L2Tv48/eOXC%2bWwIX55dRuSRCyxK5csU48svyw/CZ5K/JyK%2broUfso83zuTPPrrN8h%2b4fkr1Pz7H8B4hfcbMF4PLyIsp2yP8DAQD/Pa4ELi4uokMp%2bV8l%2bhKvgzTMTu7Vq1c/vHnzpiXU/r/QyclJ%2b%2bzsrH11dfXjP4CZLfRM1GGEAAAAAElFTkSuQmCC' /%3e%3c/svg%3e\" width=\"2560\" alt=\"rancher kubectl output\" data-srcset=\"/assets/static/rancher-complete-deployment.82a2fbd.daf2da1a16ffc22a5212723ca5c87992.png 480w, /assets/static/rancher-complete-deployment.cbab2cf.daf2da1a16ffc22a5212723ca5c87992.png 1024w, /assets/static/rancher-complete-deployment.2665e34.daf2da1a16ffc22a5212723ca5c87992.png 1920w, /assets/static/rancher-complete-deployment.42db587.daf2da1a16ffc22a5212723ca5c87992.png 2560w\" data-sizes=\"(max-width: 2560px) 100vw, 2560px\" data-src=\"/assets/static/rancher-complete-deployment.42db587.daf2da1a16ffc22a5212723ca5c87992.png\"><noscript><img class=\"g-image g-image--lazy g-image--loaded\" src=\"/assets/static/rancher-complete-deployment.42db587.daf2da1a16ffc22a5212723ca5c87992.png\" width=\"2560\" alt=\"rancher kubectl output\"></noscript></p>\n<p>We can check our ingress also with kubectl</p>\n<pre class=\"shiki\" style=\"background-color: #ffffff\"><code><span class=\"line\"><span style=\"color: #24292EFF\">kubectl get ingress -n cattle-system</span></span></code></pre>\n<p>We need to edit the hosts file or create a DNS entry for this ingress. I just added it to the bottom of my /etc/hosts file.  We an just browse to IP but Rancher has some issues when not using fqdn. Make sure you use the name specified when deploying via helm. Open up a browser and open https://&#x3C; dns name of rancher >. You will be greeted with Rancher setup pages.</p>\n<p><img class=\"g-image g-image--lazy g-image--loading\" src=\"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 2560 1508' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-a3578b6dfb49c1ca91be0ce97ad9f0c6'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-a3578b6dfb49c1ca91be0ce97ad9f0c6)' width='2560' height='1508' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAmCAYAAAB0xJ2ZAAAACXBIWXMAAAsTAAALEwEAmpwYAAAJPUlEQVR42tVZ6XLjxhHmK%2bylk5IoXiIBArwp8RJPgRQpXlru5ZQr2dte29mNvNk4sSu2U9m1Y8d5kqQq%2beUnSuVfKm/wpXsAkAAFHqLWVesfX/UcDWD6m%2b6ewYzr9u3buHl6Cpb37t3FYDDAKdVZDodDaJqGdDqNbDaLVCpFSCKXy%2bLw8BD5fF5I7mOddDolJOtlMmkkEgnIsoxI5OKQJQlyOEQypMtlIYUhkUzEY6jXKrg56KPf62LQ7wm4cvkiGZBHvlBEsVgSZRO5XAHJVIaMUBCNJSBJEYQJXI9EVJsMiz5Zl2EZkqzL4F4YexdEMLgHSU1ATRegpPJvATnED8i2cgPlRhclrTOCa219G4zVNcYWzLqJ9Y0dbGx6SHpI7hrwOGB3DLcuN91LYMuLjfUt%2bKN5qNXbiJQGUMqnlwa/Ry72ES70IFngWmhQZOCm2274pindnimELAf%2bzjoR4FOyNPCbkAtdGnjvrSByyOjb4Fpqln5iCAJUg4DRwN8iir2fAQHKmAC5eH7mLgN%2bn0Ih8bMnwNp%2bEZLky3qAGatvS29RApyMnOyfRYSTrmvZRGUti0HTamGuGE4kLJ0EJww6n9icPWDRvqVDYHvHLyQvlVvbPhxki4gn9kdkTBK0OLwLhsBAgGNZKZ0a9eleMs0rXBs8WMuAbWWx/pszO9a7sbKJg4MiTk76KFeOcKS1UChWaCNVQbvdQ/GwCq3Rhj8gib2F7T0GppVZd23NDb9q9wAbEWJvcBOx2h1Eaa%2bgUpnr0zxlFgkuHw2SB%2brzM8KWMkH0yXqboWfWA0He7cUgR%2bJChqUo9sIqwlwmcFtgL6I/F5SN52TjHdLUcnBPwc6OT2yEYvW7wjA2UK0MEa3cElDLQ9EmytQ%2b0jH02CP0TH863wPiyQNozRM0jrtodwaoa23Uj1pU76DZ6qJcbVBbi3Q6Qq9ab6JCbdX6MUoVDZVaYyRrR8fi2UqtKfoZ3MZ1lvwufgd/g59hWRN6en%2bNnk2m8wgw4RwChjHCWJppnnGGabQJ0wOmhcKssiDgmNxWN7gnBsGD4Tobxf2JVJYGlhOS6wyum31WJAkpQ9eE%2bYxV36nMMkp5JBAIEwEHI7dmw3ToMW8Sop4jwG78tBXCWnbF6IOH5SPkKX7LVY1kFblCRcwWzwz3S%2bTmETUpoERTom5tmwrSZShTYOoohh7Xo/GMQYCZA85vhXlvz16gWl3f8ACnmJ%2bVB1yykhDss9ElSmgsmQQmhVEs1cSsKjQ4M94PciXSKwsvUGNpMWgncN9FwERE4/sTBMxe%2b9nl5yW8STKsucHFRvFgM/sFZMmwdCaPfVrS9inLc1ueCFFpYGFKcBybIUps7OLcH09kRPLjpBcyEmCI6lxmotgg07DLEHCRHd%2bsZVCXA7GKmHCxK8eS%2b8LIGA0iFFL0wZNnRKktnaFY59mMsgdwdo/C5wshFk9TxpaREM8mRT1C72J9rvOKYiVgUcwjYFaML7Lz49nX84ceQi6OO2uSsiUkMtxp9qzuPdnvVL8YAZm5BFz0P0D0GxsmsZwaCVQQwEmOsz0vVbzcMcwVgHMBEyQr4wRoTYbTkp8whozn8qwc4YRY4sCRAKct8KI/QHY9YyUxiHBxDHOCY5cP7kVErHMMyxQGXnJ1lknyBg4Rbo%2bQnpkMuY3ripoYSTNZ8kYposRFuGzTVpm3zvPAW2reNAWD0mgZHBlcnGJU0az355I1DoPB2AN495ahuC1QVk9wUqN6lGI4RWEgSSrFf5q2vZQM8yXRn6SYT6f4EDQr2vhZLqtMAhmukNG7u0Gs0HbZ4wkIefXqKq5dW5uLK1dW4N7ynieADTic7gFj462G9mf%2bDJlh4bJla5o9c31XVGqL6jEsK/rMmjqjctSuw%2b/i583tMK8IZttCkPnbKfj9E8ug48yapPRtJzw6eiPCpiXLEQHMOB9EmgeSbgPWvzN73X5OyGeCZpt7iyCkd3lQGGw4/Q1ajSz2bed809zf6ffZ1B3tAxb9R9/c8ukE0QAXweYUzP2eOA9wzzgQMd17fMY3GR6zCJgMC9ciJzpuzx62vWGChI3twCUQpHcF554TOB2IOBmvz6a9bjfa6BfhMrGDNLxqPgE067uBCDycyQnXrq7g6pUbOii5TYdFbwRKcrsh/Uj9AqfCk8aL8/0c/SSVOY57kPJ9W98kCeZxuJOXLOABXngCClbXd3CDL082PIRdIVdWNrByfQ0rN9Z0acHqqnukZ8o1kltEwCIe4Fcn9wFjAxUyWnvYxs1XDTSe0f/LrdaEN7wtAoxkt8GJcCcwxrYuvftN%2bEpDeIun8B2ewkvwUdlfvgVPtKDnDFPfeGaRw1InAkw359luPG7hV99quPelhs6nNXRfVZEdtkSf1QtGK0JxyqapOCMHjG5/TBJs2BGesf/6Rwz%2b%2bV8M//5vDP/xHx1U7v7rf1AevMH69Rv6VdeUQ9WLEiAV%2bojVe7jzeQO/%2bFNDEHByVhckHD3VJvKB837AhsMFPWBacvTTD4XUfQr55BEkgnzyWEip%2bwF2UzWxnC1zXD6XgC8aeO8rDf0XR2h%2bXEPnpRMBTuXzZLiWvRMQB53XV7B69Zoj1lc3HI/PF70XmBUCzSct3P9OQ%2b/XddQfVtH/fQ05MwRK067E%2bo73g5e7GOG9wbbfYb33j1x/2YuR8wQYs0izqVL2P/6ghcGZhtqDOnK3W2JVCOfHECsDeQx7jfCAUk8kT9v%2bofgOX435Jy9HS3oIsKF7B30EMgMio4NYpYN4rY90o4fMsY6URvKkg%2bojDfm7DfHsXrYvEMrqBJmryTtNgFrh6/EeQjl98NFKD/luF61fdvDe8xO8f9bGw89a%2bOTPbTx/08aLbxgtvKDync80HD%2bvovZhCbdeNEm3g8GTDup3u9hv6d7A73xnCfBGcggXhmKg5WEXdz/p4MMv23j5fRuvfmjh1d8IP%2bj1T7/TcfYXHS%2bpfP%2brBir3iYBHFXz8zTF%2bR/q//auO33zbxpMv2rj1rPNuErC2toVQMouTB308/rxFxrXI0GMyrkUzbeC1pfzmeATdA1qCkPt/aOLpH5uizN7BhjP4PS%2b/bwki3zkC%2bI/y%2brUt1PtpvKTZ%2buhrjWa%2bYUBzxDOa7Y%2b%2b1vH89TGFRJMMbeGMjTUMPrMYbxLB%2bD8MFurTxa04nQAAAABJRU5ErkJggg==' /%3e%3c/svg%3e\" width=\"2560\" alt=\"rancher setup\" data-srcset=\"/assets/static/rancher-setup-1.82a2fbd.e98e7a3386c0f665f9ac6d0be06b9d95.png 480w, /assets/static/rancher-setup-1.cbab2cf.e98e7a3386c0f665f9ac6d0be06b9d95.png 1024w, /assets/static/rancher-setup-1.2665e34.e98e7a3386c0f665f9ac6d0be06b9d95.png 1920w, /assets/static/rancher-setup-1.42db587.e98e7a3386c0f665f9ac6d0be06b9d95.png 2560w\" data-sizes=\"(max-width: 2560px) 100vw, 2560px\" data-src=\"/assets/static/rancher-setup-1.42db587.e98e7a3386c0f665f9ac6d0be06b9d95.png\"><noscript><img class=\"g-image g-image--lazy g-image--loaded\" src=\"/assets/static/rancher-setup-1.42db587.e98e7a3386c0f665f9ac6d0be06b9d95.png\" width=\"2560\" alt=\"rancher setup\"></noscript></p>\n<p>From here we can follow the helm installation instructions on the bottom, put in the value, and continue. You will next be prompted to setup a password, then a page where you can establish basic preferences. Let's just go view our cluster. Here we get a lot of options and some great info about the health of our cluster. We can manage deployments, pods, nodes, etc from here. If you look at individual nodes we can see their specific details also.</p>\n<p><img class=\"g-image g-image--lazy g-image--loading\" src=\"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 2560 1270' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-31d291fabc8aca1f699d42e712bcb43e'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-31d291fabc8aca1f699d42e712bcb43e)' width='2560' height='1270' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAgCAYAAACinX6EAAAACXBIWXMAAAsTAAALEwEAmpwYAAAFSklEQVR42t1YaXejOgzlL8yZttmAsGQBshEIZG/a6XQ5b97//zt6ugJTSJvmpO28k/bDjR0jhGzLurK0lm7TVU2nWt2gZsuSFri8alGj2SY8xzja7whtvbmlh8c/tNne0s3tPT0%2b/Uv3D//Q3d0TJenq204821heAMNwyLZ71G53yDBdsuyuwHZ6hGe1uk519oh67hm1vC//c88pjzXZa5qtM0czQ0u3SOvEN9SfrqgfbciLt%2bRx24/WebuhQbojf7alYHYt/UGyk77PGM1vKUiuGbkM9%2b1hSqY/IzM4U/gx2zgXO5uGS5q/eqJwfU8TRrh5EKA/3T7SePWb4uun4hn6EUPJJbd/RA5QMs5kReYgpTZ/5BwB29xwTS7bKQsAV2g0zBeoo23mbWms8p9dvrE3BrfSDZt0/Uxh2GJjKw/s2jSac7Bb03K1I8f1BOl8TbNkRfFswVhSOE35Obv6ICSd40T2zkreW613tN7ckB9MCtY4K2CiHMtwLNsBeya8M0jkf8vskKbzQwQ/AH3dcEtwZMLFcwWjLMvK8wCajWUwTHdP10s8f/cYnnW%2bbmdV33G92bzEAyCY8bxTmUAZ%2b6t6SK5s5DG5st5jcmWdb8mfZKeRLwB%2bOl1fdlElPOUW4xbTJNC2ugIo2JdVfbVDeE%2bNlaHGIJPprH73NVmlE9%2b2nf5B%2bYzCD9u5/31Aw5/dzW8%2bw2MJZuVJ4b/nj2l7/UtixHyxlfjQ6QaVLLEMtVPhNCkM2J8U3kWsQfKFONOQ3ME6COhsNC0ajWOOP2nFzrJO2Aedi%2bVW7HU7/kE7lYcUR%2bAtt6o32qJI4S33UvHgmAsqozGx40egI3qPySn7MJ9jdiqv0gpqOxjBj5%2b19%2bJv6TtFrwb6Go6m1OsPjrrid4Q2CRPheiwEVmSfzj6Ct5jl/TrtT9Wl4Xx/zs3KqkRstOrcflRvmdsR5RXDfERnwQIYSDmjQ7anagLvgZpoFlRtGgxDYQzQEWLM6TqfN0YF1b43kow0iudCh6fqLQfGggXwIErmQjGu6zN1BLLCpyKd823SHxVGD0eRpMk4YqA8UNIp%2bpCxIR3H%2b4q2ev2h0FsUL8TOTndA3d5QFvm4ziwvgF14v5IHxA9zSpcbimPO/%2bUOcDqSdCP5gVpdj/OKdL7lSazfpU/p9IOw2C2HFzHhhX7WuT5ZP%2bTHk6SaB%2bj651HRftp6zjqLPABn//lslCKlfjoKTtadD6Gl%2bsbf1akhZcX1Vjdfz5u/Zy2wlAcEzP%2bDQVikpq0SlYlQs/3tUPEAj6nF5Sh9edmkHz%2buqMUCY84MfW9ItasmXfys08VFo4KfPPbVcFHq%2b3zBs5g5mnwP0dCx8%2buuwceg0XKobjLHGl1qWB7VWAjVX4kVtbzy%2b0U9Ax6O6jeu4JivBEHwP66kKHGBZy3Ho2T9i6LFjts7CqMFc/FM%2bBhAvOj2BpXk5ysBZT3MZzyZyVHXkKAgUVGFBtPukxtE5Hgh9cYpdfqjolYIWch95n3h/wbsBzAf8QCsBnYVuytVGn6YLG8Ew%2blCUuQpZJgterzztbr5pRkCmeBoHEnmKx6A7E3l1RAwbY%2b64zl1hglZ/ZDsYEYu950gJjNPOVXquV9cOHfPwPxgO%2basslaJASiHqV2FB0w5XcywkXbCcSBOtxIrcBHBO/AYxA2UqDCuYgnO1jnzPyYODxgMp9kCIKAh%2bEmqyQJtx6fuZMkewOd/BMzJHSRk%2b1FeEn9ZrX1Zjj5fD4C3Y74oAMkCoBqEc6FqgxCI%2bRIS8o0Jux/BC/gS0fHGTJHWl88AMw%2bIcw9w6T/SPwkUXSmkcgAAAABJRU5ErkJggg==' /%3e%3c/svg%3e\" width=\"2560\" alt=\"rancher cluster health\" data-srcset=\"/assets/static/rancher-cluster-health.82a2fbd.3d5c39c9898bc11dbd08067e98495b61.png 480w, /assets/static/rancher-cluster-health.cbab2cf.3d5c39c9898bc11dbd08067e98495b61.png 1024w, /assets/static/rancher-cluster-health.2665e34.3d5c39c9898bc11dbd08067e98495b61.png 1920w, /assets/static/rancher-cluster-health.42db587.3d5c39c9898bc11dbd08067e98495b61.png 2560w\" data-sizes=\"(max-width: 2560px) 100vw, 2560px\" data-src=\"/assets/static/rancher-cluster-health.42db587.3d5c39c9898bc11dbd08067e98495b61.png\"><noscript><img class=\"g-image g-image--lazy g-image--loaded\" src=\"/assets/static/rancher-cluster-health.42db587.3d5c39c9898bc11dbd08067e98495b61.png\" width=\"2560\" alt=\"rancher cluster health\"></noscript></p>\n<p><img class=\"g-image g-image--lazy g-image--loading\" src=\"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 2560 1205' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-3e841d2953261500be63bc15250c9745'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-3e841d2953261500be63bc15250c9745)' width='2560' height='1205' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAeCAYAAACc7RhZAAAACXBIWXMAAAsTAAALEwEAmpwYAAAKMUlEQVR42s1Z13IbyxHFJ/iaFImwi11gFxsBEJFJohKDqEiJipSlm55u3XLZfrc/wX/hJ3%2bEf8VV/pL2OT07yyUEBpVulf3QNWFnGj3dp8MMai0vEiccihP0JUoGEsW5pNmGJOlQRuNN6UaJeL2etLuhNFu%2btJzO/y2pfO1Az9MCuWFf2l4oLubaXs/0XdN3uinWhlJrB7kE0/sSzR7Izh3Q7l3ZvX1Ptnf2tB8PBhIOU%2bnE0Vcr4GvWc%2b23UMvtSmOtLp3tJ/L4H/%2bWV//8j%2bz//V/y6eyz/PLLn%2bX9%2b%2b/l7OxH%2bfXXv8irN58kmO%2bLm0yk5vs9SaJc8mwoGSzfaLRlfb0l9boj66BG05Nmkz9SFfKi0Fyj6yrjZQez4%2bpaSw4O8E0EK7eabfGyuYw%2b/VXGn/8mG6//KLvbe7J39wDGvA%2bj3pM7dx7KbHNP/HwOFGRAAGARQgFBmIrTSaQFV2h1c8BoIE0vFt%2bP8C0TvxNJDBdJ0oGu5b4e9nFMl8nyDQl7qbpOCmV2urF4UC73doNEgiAFj1j3cn0U93W/bamUOpRPqvarc8vmLxDXwGi3fvedoe9WZPVWU1ZWG9reWmvBqK6uddRAvtQo3Gi8JVvbd%2bX46akcPnsrR8/eaLv/6ESOH5/Ig4fH8vTZqZy8fCsvX72T5y9ey6PjF/Ls%2bWs5fX0m%2bweP5dXph5JevznTb9T84ycvse8dxm/kydNX%2bP6%2b2HuqfX4jz8OjZ8rn6NFzuOADuXf/UNftHzzRb3f29tWK/H5w%2bFTn2FrimHJu4hwHR1iDdUfHJzp/ePS05FsisaAaLUTBnr94Ix8//ihnHz7LB5BtuZFCfvzDTxj/IO/gS2w/fIBPYf2Lk7ewfFZYfqMMoFk%2bgmX7ihr27bc0GykKFufz/hjjsfQHE6DCoIp9zuf9ifLkHvbN3CJNyt%2bsztl%2bH33uX3Q9RcB0tivz%2bW3pD2cIeDsSDrbRbktvdFs62QxwThTSX1KirkFGyyB5GWybravhfNm3a13gmjXV2GSpZjoIIqDWMkKAuTL6IiB%2bcwD7H1GpAKeNQRuKcC%2bS4345dy1VIv9vmeYWs8lvxbPmeF3xolBzvSUvDMWPenCBzMwNEMGjSAsi9sNhpm1vI9P6wAvNfDTOdY1lzoi7tu4o/L62LrispiCMydfC%2bVuLs1oHMWA4nosfJuJ4gbh%2bYCACxbgc27l2V6mc88xcA/7cRDppuoZ0DsKR73i6LfOtO5IjmDVYO6AKu5QoENYs9efisBwHCLiz%2ba5WrEYJ3a9SouHrl/xrYRDL5mgsDqqo9d%2bvqnZvQrQsFcU8znxvc73%2bCBhHqAl253MZppn0/A54r0hj9ZbUV5YTiy/uZYYgMbN0IRsPyrEJqD6KtlR2tnbERxBeY8HGwu0aWesN07IkZs3BGoZyBzB6rYsoP3v7J4kf/yzx0WdYa6opgynoKmJqmcDCe3f3Zb55W3PscGNmBG04Egy2ZAK%2bwcEnCQ%2b/B/%2bfJD6%2bnLLxrgyHU/C5r/n%2bNspy1iZ37x3IAPNqMRQ5vflDmR6cSpb0Ice0SHVXk5F3ItPpDuqJh5r1yJdnqDm9oXTvIZfvn0n04K2kyMXM1dcRc26SmoouToZKRIKWzChJ3Qj5fv%2bjROQL6l1D6ca2pMj15kJmiHmbxMuL8oUl3XxbIighYwV6Q1kvyjvQmoKty8tQCz7s1htwgXUDxRu6wDm82iXEyhrfMcLWV1ZvTHQBC1dD7bJ/gW8dsF9ryPoNoH%2bZvLbVLMBCZh%2bl4i4g5/io33FDYp3sJWNcGDYRmHxpxyMzD59n3x/sSDva0LEHF/L7W%2bLjEsK%2bG2RaY5sLSqiXFNOGlfESukHOViouPt9cA9g6gBVdHz6WoPSMi3JTLyiEdjE2EB/ciHrF5Ub3F3OEtV58lvK6nncpj/0NlLtRZayUDq/cc0HGyLx58OyaBhkMYiyuAxorKw0JER1zLOCV%2bBZuUWukNVLrUuI6XqV5pe73R3oztPNE1ACBiGhaxc2sukf5X8GXlCDgkbjWheUGw4n0wJ9j8uwAxVW%2bq6tNfM90z6KMTWao4vbLTKN3gRgBxeuGgIWvbwCEBl2Dubuu1NXUVm94l/tXUfBQGPL0kGrsvOZvzDlFLqeiSBSGc3Xrn0v5uspT%2bYEXD0zZCGONO%2bDDbxyXKbFI0Ux39SLnV%2beNjKnWFKqAJEcmyGMJ%2bxkKHBQ73Uza6Uz9nHGA/q0%2bnk6v9CtmgY3RHNfrOdqZyQo4IH9jPNnS%2bdl8R9cwhU6mW5qiHFsILeHJ3M2ozbZV8OLBmsUdhBmC/MifkLY83KAvbcQtn3GpkxRlfVehTzmYssnLIAAK6CQRFICSF2WwKgCHb/eQgkJQNER/aF5dLnm9oXAULAf8zdV2pEI3C4uZ%2bmGsiuE3c001rVXOeLIp7eKgytcxvKkAe2i/Y972bFA0vzlW3lS47gW53VRl1mDNd89iPQsre0Xuwg2MAjIgII1R2%2bdQQA/ayzXqe4z%2bmgGmhUKgBD4oOp2lCqAA1CwtwuLFCO2rZTjHw9Pyw42prmNr0LBVtvZwVd60mp23L01VBRh%2bU1W0VQDfOr14rOdwkd2sAqhMrmXgpxuULhDkiSrACyoIKA7N1EckkCG/EbKa0pYggJZmkKKGqwpglcd5vjQbi51XlbQ8haLS3CoC3EUE%2bEsVQB7kX1WAIoDyQ3bHryKgX/5uiQCNAVksQZpAABMDWAeo9cGEB9d4wFjQ3zZxAbnfJRpKBZgYMBiagxCSVjGqgMLiKiz6XEOrGwVsqTssfxwNimrQuICN3lZJnFde4Enl8b7ATNFGPWLQOzYIcM27B3kZ%2bRYU0IELBFlqgiCCBjcaFBjrU6OsGkmOFjqdBQSYgEXr8oD8AT6Y6s1QFTDVb3QDHpxjPqTy4KaE9nX/svhCq7FstdnJuMN5kLSIIm/meGaXtqLYxAD3CwQsxACTBXCby1ODACqAsGcQLAIJ%2b5zXiLpE0IsBaaIHo7XKIFgERnuRMocfl65yVXaxLmCywLIYMNMgaosbBmp1Y8iubluJAXyxpgzZFwqgC1gFwNqEvmYAZTJS2GtgZFDpxEsDIVMSDzooFFBNXSbSbyrR%2bjYVESUt5%2bpnNULe8qIyqYDz3wyLZ/nzrKPIoBsXccxlFigQS17WSKUCIhZCvVBffVjHt6gxwh6HJ/Fvs0bDvVDALD4tEer0vVxTnHnttcUJUxfhyQMbfx%2brIigMC5Trnq2MCwTKi4c3vm4eVvkbJp0aBTS4hw8lflKegX%2bBNYv16gIFGksF5PCJXo5avT/QR4IgGkiYjkoKErO4pCBVqy6SarfyXkAX6Nh5ltuo%2b1mfh8VdQR89wuW8qkRlci150cfNY4n5xmd9G9UvzOO6G6j8kKOX61yn4GUy1VTlq/FpK1SmhvQiE2VaS1%2bgKL8R2Rcdkpnrl0Lr71ToxjyLvVZ54SW/eT7fr5yhIgdfgQqlh8XL0H8BaJm/R%2be4GEAAAAAASUVORK5CYII=' /%3e%3c/svg%3e\" width=\"2560\" alt=\"rancher node health\" data-srcset=\"/assets/static/rancher-node-health.82a2fbd.0b630ec19cf4410853121eae1282f883.png 480w, /assets/static/rancher-node-health.cbab2cf.0b630ec19cf4410853121eae1282f883.png 1024w, /assets/static/rancher-node-health.2665e34.0b630ec19cf4410853121eae1282f883.png 1920w, /assets/static/rancher-node-health.42db587.0b630ec19cf4410853121eae1282f883.png 2560w\" data-sizes=\"(max-width: 2560px) 100vw, 2560px\" data-src=\"/assets/static/rancher-node-health.42db587.0b630ec19cf4410853121eae1282f883.png\"><noscript><img class=\"g-image g-image--lazy g-image--loaded\" src=\"/assets/static/rancher-node-health.42db587.0b630ec19cf4410853121eae1282f883.png\" width=\"2560\" alt=\"rancher node health\"></noscript></p>\n<p>As you look around in Rancher you see you can manage helm repositories, install apps, manage deployments, pods, etc. You can do everything from scale deployments to executing a shell on individual containers. Once you're finished familiarizing yourself we are going to move to the next step.</p>\n<h3 id=\"installing-longhorn\"><a href=\"#installing-longhorn\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Installing Longhorn</h3>\n<p>We are going to install something from Rancher called Longhorn. What is Longhorn? Well, it's is a tool for storage that allows replication between all nodes, handles stateful storage well, does backups to cloud, etc. Really, if you have any persistent volumes, you want to use Longhorn.</p>\n<p><img class=\"g-image g-image--lazy g-image--loading\" src=\"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 2560 1255' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-981d85c772e3ae8e80e150d3f5bdad21'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-981d85c772e3ae8e80e150d3f5bdad21)' width='2560' height='1255' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAfCAYAAABXscv8AAAACXBIWXMAAAsTAAALEwEAmpwYAAAKbElEQVR42rVYWWxc1Rme974gdVEXKNCUhFLaPhT60j70sVKllkpUpVLbl0rQFaGaBGxw1AhURClRlCYQ0RSliSAbIW5ix3FivDtex8vYGdszY3vIOI4941nuvbOPPV//79y54zvjGTIuyZU%2bne0/557/%2b5dz7nXA9uTzJS1bf16h0lOtv7Ls5jus%2bibytrIUfOKJDDzeVWSz61hZ1VT9RiAM/8drCCxFkMnksLgYwsJCCDmRCQZ1zC8EEQoZn6iDo/RFeWRzeRjJPOJJIJHKY2NjoyjMOrG%2bvo5UKlUcq7TpyoqYsNc3UUr61mcDiUQK6/LObCaLpNSzmQzSqTSSyYzaS8xIIaolkMllZf9mXYunPnGPRQLW182N7Duaxw9/v4Gf7AaOnF7Bq/vqUd/wEurq6lBfX4%2bGhgY899xzePrppzEyMqIWJyG1krBRUD6wmocvkIfn4zxm/Hm4F/MQXZDL5%2bDRb8FnrGBWu4nkelrWB2ZFxn/LJCmiQ%2bQh8yBriKFk3kZ%2bA/OhCMYWI%2bh1R9A1HYVT6r5QGLn1jSLxWwgo57m5D%2bidAM60A15/Ev29Hfio/SNcaWvDlStt6OnuxuXWVrS0tIh7hfD/PmJAGAmI1YCobpamenkEMxrWMgaWU1Gsw/SysAaxpikjDqDa4RigxzfD6pZmwLdqYG45juuBuKovWwtXeRyrkSgsrISj8pKouI%2bJiK7BSIk7yRsTEmNGOgM9lVGlkc5iTdPVHPsaNUHmrMVMhLVNcCwYiWEtKgRENISFGbbZz3HKc24oujmHfcGIbW4sJv0xRDSzbs2vBsf80jLs8AWW4b1hwqwvVYUvcBPl87cLvmPh5kqhbq7ns8bK5Ijytr2vvL98rBIcUV2HHRFNE8sX6qq9WZb0Uc7eV4aoXa7sHVHb%2blHdEDdOKGjxuISCofqqzbnTcOjyUgvcQFIyq54wN8PSSCZVWd6XSKdVqRXmbYEowvHS9TbfY64Zl1BLqgyezeWQEtmkrBsvrGvJF%2bfcBTjsm%2bam5v1%2bxYy18bDEEa1ikcOxNYlB/40bqozLcWiBpKSyWaV4WhTi%2bKLIxQpkqPfYiEzIHCpN5TMClmmZT1ikbSJRnexPgSIB3ODq2hpOnTmDf%2bzfj7eOHMF/TpzAkXfewaHDh/HKq6%2bq9j%2bl3tbejtNnz%2bL1N97AeydPKpljx4/jtddfx4GDB9HT14cT772Hw2%2b/jZcaG3GRJ0YkUtVj2E/leZxaBGQEJIfEGkWPuPMkOOyuTWsHhYTrs7MKHp8P4y4Xpq5fx7DTiVmvF3PSF1heVmNjk5NwydiMx4PJqSkcffddtHd0IHDzpmq7ZY3J6WncWFpSa9sJqBRWypOkNGwol6uVCLuMtUYlFAngy%2bkB3WK99s5ONF24gFY5%2bz9sasK7x46hp78fZ8%2bdQ9vVq0oZujqRLJR212cosLT6uXa1zdvb8U/IKZXm63GjEMuGrV55zm0JYMmMTUUvX7mCweFhpThdu6OrS1m2s6cHzokJ3AoGlTzzAePbzNyb9WqwkmOxXsUbKqFcId5FoukconIviRXAtqa8qfKcqgTYhbK876ubN1Sbm%2bVFKyfXLcKyrP2EMAoJkEnSct1iciz0c5xt1u3tSm5abcPWSRBLJOGbHIXr8geY6GiBd7ATc/1XMXnpDAaHhuH2LiAmBtm2B9CK0zMzKt6vDQ1hQuLYu7Bg5gG3Gy6J595r1zA6Po5paQ/KtwDrzAGU7RsYULmDfWPiKRMy79rgIIZGR1WuYA5hv1PG%2bQ7K8aQgGbfbqEUUT44FuYQt/ftl5A/8Cpm6x5B7/jFk638AvPMHuBufxKkTx%2bH2eEtCqiYCWCoCZMPcNJUcHRtTijMRcsMK0mcRQjAZsn9ElCIRVI6Kcq1xGbNAOY4RDCUmSBJmPyFuS4CQ5Z7zIHisEXBdQb7nfeRbDiI/1ASMt2L1qc/j%2bMt/xPDULGIS0jWFgCVAd6c1uVF1CszPq83SA6gQiWF2JzkDkiMmC8RQvru3VxFD%2bREpnQXPIFHXhQiOkSS2FVnSnpmbU2sEw%2bGaCTCk7l8JIXrwGWDP49joO4N8NoP1U/uAhu9j%2baefwfnXXoDLs4CofCeUEGBdgGz1LQTMyqbprnR9dRzSikIALUYr8hjkOBXguFuUoNUtpaig8hapTxa8g17CNbxCKOX7JIy4Hucx8Vq54Hbxb50UXrnjxw78Vgj4LnD0T/Jd3Au88iPg7z9DcN8T%2bODNv2J4mh4QK8kdlUjYQgA3yKNwxGZ5KkML0wOokHJf2TwVYJwz9ml5y9LMH71ymqhQEHnmCnpNv8hxPbYHRIYelpHLz/ZyQBKz/iU4396L4C%2b/gLAg9IvPYu3n9yD07GOIdb2P5Z4PMTU6iFgyVZ3Uah5gxTA3bF2CGMvcNBXn8WjFMGV42aHCVkK0COMY1%2bovJEaSp8YL%2bYLEWSHlW1yseEmq5gHLq0FcbGvH%2b3ufxZndv0HT3t%2bhqfEZnKz7NS7/az9W%2bpqgS2hoC1PQuS5PK5LhcZpIpYte4Ci9NBjKxWmZEeeYbNaFBf/HEsteiVePbNQvhIiLu2dUe1zGmZDmvD7lOezzzC%2boPs6ZFTAM2Mc2w2rO61Vhxm%2bOyUJo8HSo5eZmvzpzX/1jU%2bgadWFweg79k250O13o6B%2bC0zkK3X0Neq%2bQMNEBPRKCnstL34AQcxZ6LKKIKXqA/QWZ9VzxL4z5h2ZDwfpbU%2bFXZ9k/va11c4188a5g3QNS/PgRsF1LCJRfnTVdU2CyY7xrhNwRjGAA%2bnAzNFc39KGL0AbEI5YXTXSfhE7P4M8dMbjDvnAinZKvt1V0dk7h/MVRNDWP4nxzobxYOyjfxPoFszzXNCJ5Zabkxmh9%2b1v1Wj3gtnIkJuCB5myDPnBePOAjRQK9QXd1Qe8/B330MnRDLw0BMhpci%2bJvbzbjreZx/PjJg/jcl5/FA7v24N4ddbj/od14YOce3Pf15/Hgwy%2bo/vulbZXEVykj7a88WIcv7vgL7v3GbhOP7ME9X/ozTpzsl9tkVv0oqfVj5XYkbIHEujbZCX3wgnhAl2n9ax%2baoPuzJBk3fer3no2AhJzHUew/1Iajl1x44qlDuPdrddj5rQY89M16Ve769kvY8ciLqtzF/kfrpd6g6jsfNeUe/o4p88CjL2Ln9xrx0OON2Cm4T4g5dXZQXD5TIGDzG387BFSEdbQxua0GTEuPXRUS/ivWv2Ba3SLBIoAyYnTH5glgeoE/EER7%2bySaW8fR0jaB5svjRVxsZTlRKCvDkmluncCFFmlfmpAwGJej0iOKG/Ilqat33TUCbvlNS49cMmFZ3U4C68TaSukpYMVjPM0PmaTyCt68toXCHPsGzSMuof728n/fdr7Xt00ESQgHTQ/oOV2qtL0kMXJCbPkWIAm0EjcbitwZcC2uaSlf67f6tj3AqhcuQLpvwlRYecH5UusXSHBs90/Lp0W1Y%2b2Ok8CSRx1zwmirzRvOl3iC465spoYr7V1535Y7v2GGhNwV9NkhU%2bne0yXh4Kj5eLnDXnBXybavreqFq3B4VcJiXO4HTUUS/gckxnBC6lVCIgAAAABJRU5ErkJggg==' /%3e%3c/svg%3e\" width=\"2560\" alt=\"what is longhorn\" data-srcset=\"/assets/static/what-is-longhorn.82a2fbd.4c89f1804611d0f5b6e8c0d7691293df.png 480w, /assets/static/what-is-longhorn.cbab2cf.4c89f1804611d0f5b6e8c0d7691293df.png 1024w, /assets/static/what-is-longhorn.2665e34.4c89f1804611d0f5b6e8c0d7691293df.png 1920w, /assets/static/what-is-longhorn.42db587.4c89f1804611d0f5b6e8c0d7691293df.png 2560w\" data-sizes=\"(max-width: 2560px) 100vw, 2560px\" data-src=\"/assets/static/what-is-longhorn.42db587.4c89f1804611d0f5b6e8c0d7691293df.png\"><noscript><img class=\"g-image g-image--lazy g-image--loaded\" src=\"/assets/static/what-is-longhorn.42db587.4c89f1804611d0f5b6e8c0d7691293df.png\" width=\"2560\" alt=\"what is longhorn\"></noscript></p>\n<p>First, we need to make sure we have all the pre-requisites installed. On all of our nodes in the cluser we need to install open-iscsi. This is as simple as just</p>\n<pre class=\"shiki\" style=\"background-color: #ffffff\"><code><span class=\"line\"><span style=\"color: #24292EFF\">sudo apt install open-iscsi</span></span></code></pre>\n<p>We also need to make sure all of our nodes are either in DNS or in host files on each node. Longhorn communicates both on the cluster network and the physical network. Without the DNS names sometimes it can be cranky. To fix that just add all nodes to the /etc/hosts file on each node.</p>\n<p>Now we can install Longhorn with a couple of clicks in Rancher. If we are viewing our cluster details there is an option to Install Monitoring in the right. You can also click Cluster Tools in the bottom left or find Longhorn in the Apps &#x26; Marketplace. Once you find Longhorn click install.</p>\n<p><img class=\"g-image g-image--lazy g-image--loading\" src=\"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 2560 1003' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-4a3e8fea65208ec2a4ef50cd84bf0d28'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-4a3e8fea65208ec2a4ef50cd84bf0d28)' width='2560' height='1003' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAZCAYAAACB6CjhAAAACXBIWXMAAAsTAAALEwEAmpwYAAAH3UlEQVR42rVYWY9cRxXuR3gIYbZebu/7Or1Or7PvYzue2PEgT5yxwEiJYyU8gIUNEciJlMQSiYgh4gGhJAqLoigvkbBAIooiQR5iIh6QEoQAib/AC88f5zt1b0/PpIfpbo9bOqp7q6u%2bOvfUqXO%2bU65iaQYLi6totuZQb3QwO7eE6WIVXl8I/kAUlj8ytHBeIBRX4fNhGQWTEhS8cCSJQDA2MsZhccUTWcSiKcTjGaQz0yiV60im8moA52OGFZ/Mm/rqhMg4fFZEJKxtr4GGFX702LgXX/ryw3B7AiNh9BNXrd7B8y%2b/gp3dPQSkgxam0DDRWFoXHlSCuuMxpBIZnLn2A5x%2b5hbSSTGwYKmhxcgUjhsGNxROYModwOOXLuOnr/8M8wsrqjz7h8Hpp6/r8pUn8R8Av3r/9yiL67dnF9FozqE20xJvmIFHPMHblXDP8xeFO83x1UIJb937AD%2b/9yEWW7NozS5hpt4WzLbi0guOxgkfWIeY3JCHvjKOd997H/xdv34DiWRON8jxqv%2bnVz/hHBrB1WrP48Xbr%2bKJvW/ILuWQyRalzSg4dyspC7E1O5jWoxLXHc2IEln7eV/8gQii8TxuPPUIvnftLPKFWldZ4kR43GQc%2b4jR6xlG0mYdG4/jqajHG8S58xfx3A9fxqLELP6Xz1dE35LqHOvRy%2biWO9Rn62y3jhe41I3EnXjuK9UGCtMVFIs1jQUlCZC1Wkv6quoNbBk0i6WavnM83/lcrjRUHNeqNpaQm27qWCMcU9cAy5ZjTV9D%2bvbHcA1dj/8JfjZXgl8w6fJcpykexT6jQ13HEqNk4xv9nLVqdp/R11mPbThiDOsK2ODqvmJlugdbR9ye/b7D/3VF%2bqcmvZh4eAyWFUJQjBqNSiwJx%2b0x%2b/OOxDjwvxG324/JsQn43JYoG1dvoCc5ug6C108mx6fgnnDrxruCR6SqgaNzKAHvlAeF7avYfO0j5Df3YLm9smvxkSM%2bd9zy%2bhEtzWHt9l00r70CvxjWb6e/%2b9HXkiDd/tYdrLzwHiKFljGAZS86mrJx%2bDwW0gvn0HnmVaQ6p%2bH3BTQbWNZ9GMAXRDhbQ%2bvJl1A6fw1%2b8gCeW4kxgfsyQBTlC8%2bi%2bc1bCKcrcNGiIQHlApZNUuhujA0DiXhAiOTE54d3bEw/nvPDEsgiEmwM8TGL09gD44aTCPJojo/DEg/jUfXR20JJWMGDXjscbkLxfBOTakzXxtYj%2bOXvPsb1557Xc8sgyLPGczYcUZHcLkpz5xlxb1z5Nm6KMGAxSqfSBVV0YBd2xtkGHncHcWPvIj557RYeXVtDKJZBLlcU8jYkbpelJrR1Xdq7gs//C9x5811UKzNYXt0ykdcOjMPmVkusmohncefZF/Hjp1/AjOT%2bufllodmzapjjMBzDOx/ElsH0oQkLb33nKvDpXVw9ewq5chOdzgJarXnFZXAzjPNoIb9wnrs8IF%2bo4NITX8fyyobuEumwpruiSR35QlnFSU9MKZxDT6Ew1dBgTG9URBWWHdvevoCdnV3F5P8mlZq0lZN3YuTy5W5r8Kqavw97H72LVHpWPnh3e1vSY0vXcrAdD2MqN99gvoP9xOOzM5ZjKA4bdfGFBVBHGODS8jrasogDSMUU0J7sPHMOW747Y9PpPCKyU367aNGUZROajCiQtiWl8/KKR0X5bpQ0zyQvvbvPYBjwmx2rCotcWT%2bN1dVNbJ06i7X1U9pubJ7B%2bsZprMs7W6ePLWVFxm/KUWff6tqWjNtCPJYyxZBTYfXy80Hc9At9wQR8sQICkfR%2btWYXQsPgHTgCDHZxwYzltI8ewiOlJK08Y4shVSRlhozVbYJmSFC11lTiQ0JnCJv0tZYkA5TVs1y9AWSUao3BxDMxhfLF63js1/9A6dGn4JMoGwybsnW0dBXT1BqtLGL7F3/Bws03lAfQOKwESc72JdBXDIk7%2bOwRmZI5szffxJnX/6g8Q5kg/yQ4jXFYjq2qSKTERaPFDnKrFxEtNPTda%2b8qrTw0JjOKBNOQ1BTZ5R0kmxua%2b8kw%2b%2bk4rKTap5BdPC/4Objo/g2J0DzLTiTvreEdbn%2bUdMtg2SFlgH5jSAbOaXFZFkeHo7GTu/sZp7efH225fYZYjexNfe4rBJPs1RJdXbuPX8bf/vkv/ETqbJ6PRnNWS1e2LF1JHAZlbwEZy8uQrAS73977DHc//TuaUlrzHNLIvHEiZlbyt5OGjjsKjAMB29AndQtkcM3arp2v7eJPn/wZL93%2bkUZgJzUxSjM69xYdx4rt9lmJ6L/5w8d458N76gWM/swGmj3kPxY0g2J2r9hOoA7oeyNEpTYlPfCWpdUWYtGeV2FapCcwRXL3HK9g1OWOVqpGGJWrEmFZuvIiJZE0OZYkZV4IEHF438jLEKfsNdG5pfPZz6hNfHoI8flelf8Y1aNCqqwHaQDuukkjZkF%2bnFGuYSvWUZd10mVffs00Gggj4LU0Z5PHE08NVTEfR48KhmJHY3Rln9dzvE/iCjPCAzOAuW056Ha97w7FNMEx3PdM%2bbwBhPMNpBYvIJKrH8gCvfl9mHPqYwaJZpCSKjNRX9Ng%2bsAMQPBjy8ijAop4hmd8EuXd7%2bKxd/6N0rmnhQe4lR%2bMeh3OAMVLkFh1GWff%2bCsWvv%2b2MsKT/njbAPH7ulnt3rCK24di2S4BOhFclrmCGYqmDxRIJyn/A9s4AmidR4QxAAAAAElFTkSuQmCC' /%3e%3c/svg%3e\" width=\"2560\" alt=\"install longhorn\" data-srcset=\"/assets/static/install-longhorn.82a2fbd.910801b1babb396de0ab9c5c4ab13c67.png 480w, /assets/static/install-longhorn.cbab2cf.910801b1babb396de0ab9c5c4ab13c67.png 1024w, /assets/static/install-longhorn.2665e34.910801b1babb396de0ab9c5c4ab13c67.png 1920w, /assets/static/install-longhorn.42db587.910801b1babb396de0ab9c5c4ab13c67.png 2560w\" data-sizes=\"(max-width: 2560px) 100vw, 2560px\" data-src=\"/assets/static/install-longhorn.42db587.910801b1babb396de0ab9c5c4ab13c67.png\"><noscript><img class=\"g-image g-image--lazy g-image--loaded\" src=\"/assets/static/install-longhorn.42db587.910801b1babb396de0ab9c5c4ab13c67.png\" width=\"2560\" alt=\"install longhorn\"></noscript></p>\n<p>From here there is basic info and a project selection dropdown. Typically you avoid installing in the system project but because this is something we are integrating into our cluster to manage system storage, I am putting it there. The recommended setting is to create a new project just for Longhorn.</p>\n<p><img class=\"g-image g-image--lazy g-image--loading\" src=\"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 2560 499' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-4ed220240a38dafdb6d1cd78bc99e2a2'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-4ed220240a38dafdb6d1cd78bc99e2a2)' width='2560' height='499' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAMCAYAAADS87vJAAAACXBIWXMAAAsTAAALEwEAmpwYAAACaElEQVR42s2WzXLaQAzH/QKdXtoG4/UXYDBgwIahGIIhJCmEmUx66aUHJi/Q6Sv03Om9D9JX6IP9K8mYOqRphwxucvjN7gqtvCtpJbR5coFvX77iev0ehllBEERoE5WqD0XrVjtEs9UjujJ33DrKhgNDuUehrJtQlRZMwjBs%2baahiiG17cK0qnIHRtt82ODn9x/4fPsJzU6E9foG5xcr9Psx3EoDi/MVzhZLzOaXWK6uUW8EOwdkRh4H7WcbZQtOdAYnnJEDHDlkUWRO8JsdWHYtdUC3O8Dm4y2Gw4kIHKcu2I4nSjy6bkMiz3K%2buGLM7bjPP%2bR3MoAvbNN3vC7MWgBl1UR2rOy6T%2brgas2HnTngRLfw4uVrvHqjJCI6CfWyk44ZubVEzcihcqPak/9BV1H63YGjwwcTJ1Xu/35szKqcg587o7lhgmhxg3C6Qm%2b6RJhQ%2bs/X6J6m80zWo3WPdMLkSnRT/ZRsznui2ZWQrt9t96eyYHwJKxjB7sR7jLfE/4/uBIqyTrP8AbxwAj8cw48mQrN/ups3dvLxbt0aTElnIvzek5tv9eq9WGxl9lhmNkJYjeiJoTP4fSjXh8apV6WK79IbPykplEompbxNxelh9Adk/H5NSiudnlWJqruMZE/QGYuewnaP8cTIGagG8JsYxQni8Qy9cIgwGu7axUHtjIxxwfTq7b/rPZKiCqPGl3Vcb0tdYBn3ykPJt5pjHnLXdotygFvxpefXvLZEkJ1gZFX5GcCZxWO5gBapceTejqYYjRLqj01yQCAfLBfajw%2bLvO93inNA%2bsegKWTC5xL5/D%2b4vEOOyS8bEzAcMZ0OVwAAAABJRU5ErkJggg==' /%3e%3c/svg%3e\" width=\"2560\" alt=\"system project selection\" data-srcset=\"/assets/static/system-project-longhorn.82a2fbd.bb07140aec4714efe53f2b4e81ffb372.png 480w, /assets/static/system-project-longhorn.cbab2cf.bb07140aec4714efe53f2b4e81ffb372.png 1024w, /assets/static/system-project-longhorn.2665e34.bb07140aec4714efe53f2b4e81ffb372.png 1920w, /assets/static/system-project-longhorn.42db587.bb07140aec4714efe53f2b4e81ffb372.png 2560w\" data-sizes=\"(max-width: 2560px) 100vw, 2560px\" data-src=\"/assets/static/system-project-longhorn.42db587.bb07140aec4714efe53f2b4e81ffb372.png\"><noscript><img class=\"g-image g-image--lazy g-image--loaded\" src=\"/assets/static/system-project-longhorn.42db587.bb07140aec4714efe53f2b4e81ffb372.png\" width=\"2560\" alt=\"system project selection\"></noscript></p>\n<p>When we click next there are more options. I'm leaving everything as default. When we click Install we are shown the progress and wait for everything to get setup. This can take a bit of time depending on network and internet connections. Once finished we will be able to click the Longhorn option in Rancher and see all of our data. From here, I go right into configuration. In this page I just go down and make changes based on how I like things to function.</p>\n<p>Here are things I configure</p>\n<ol>\n<li>Concurrent Automatic Engine Upgrade Per Node Limit - 2</li>\n<li>Default Data Locality: best-effort</li>\n<li>Backups: We will come back to these</li>\n<li>Replica Auto Balance: best-effort</li>\n</ol>\n<p>Alright let's click save and then move to backups. I like a lot of redundancy so I'm using <a href=\"https://storj.io\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Storj IO</a> and creating s3 api credentials. Here, let's go over how to do this on their free tier.</p>\n<p>After browsing to site, creating our account, and verifying e-mail we can create our bucket.</p>\n<p><img class=\"g-image g-image--lazy g-image--loading\" src=\"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 2560 1151' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-6c393b8afc52d576282d8aa54f67200b'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-6c393b8afc52d576282d8aa54f67200b)' width='2560' height='1151' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAdCAYAAAAaeWr3AAAACXBIWXMAAAsTAAALEwEAmpwYAAAHtUlEQVR42s1ZSYwjVxk2kAPiBAcQSLnCES455MSFM2fuDFIIiEggiIDDHCBIwAG4gIALSEgoAkazcAA0ShoGZTIzGdKZmfbSbru9l5daXHbti%2bvL//9V5bY9XjrT1gwlfXpVz2/93r8%2bFxQ9Qf20jUqljGq1iunUgmU7mM1m4Md1Pdj0HUUR1SVSx%2b%2b248hvQRAu1MewLBuO60r/JEnruXxW4Me2bdrXFEE4g0vrNpwEv74F6HaCQkedoXrSQKlURLFYxIQaTmkTOQEjVUOz3ZEN88b58TwP3Z6CXn%2bAsTlBHMdZvY92pyf1oRCWjvGsnpwA0zRhGAYmTgxD09AzE1z6M9AdAwXbceH6dKJuKBhPiCHCZOoiDGcLgwExfUZxQkQkaUngNj719wh%2bEIO54Ho/iOb1zwr5/HzyYTQjaY2kDMMISRxJWbh3WMI7h2W0%2bwYaXQ2tno5GR8VQnUAzLBzXujhtDdDsDNHqjtBRNKj6FK7HahBSSXBD%2bebSWYDUbYDtBE8V1oayoHR7GCpdONMJLHNMpQmTxEUf2yTKOu6%2bW8bhUQ233znCnf%2bV8Pb9ImoNBRPLozaWkGSYtrRnGHlp5u%2bWlNxusY3jBktkPW3YWVn43YGKy9eG%2bNH1Pl670ccPryj45T/6dMoW2QIPynAsix%2bq5nwTfarrDQwhiKWC37skGV365vd2T4WS/c4Sk7frKrqAvy173UmF6enYwYbf9wsh4Cu/7%2bIzr57ic5eb%2bPyPW/jkdxt44ScNDNSp6BDrDNuymPQ6IB0PwphswGxuA%2bKFMn%2bP1tTFK988joyXjcm6yguS8cXOzOSdbQnrrrTfB7L5eG%2biAtWehWLLFBw1x3hQ11Fp6hhpUzFwbNHfe1gUb7BqYS/qnhafdLMzqKqOR8XK2jn3%2bcR0qkLAvfsPcExu8KTeQr3RoUnHGIwMIYAXxXGBQiQMhiomkynpr0ns%2bTkNe3NVIgVkHB3ySv3BkOYbQdN0crOm1O3bNcZxRsCNfx6QYXuEw0dVPCjVSY9JnwdnBLjk282JRQtJNz/SjCxQSiTwieLZEyOmMbIYiqQtFu/gBwG5YEtgjCdQaT6eP77APMvzJXJscwLGEw%2bqwVbbhTZ2xOj1Fgjw/ICMoUONKeoLo/m5swgxCRcBE6npYyGW9dwTAkLavD2fkxfKz%2bxC86V9OXKVQyQ1472IESyftHBy2sVR%2bRSVWnuJAA5sHNen07dkUa4XCIu8qAuDFsXSlW7WJqJTt%2bTRHDwfE8Dw/TTUvuh8PIZPh2nRmBOSKDauQkCVNt9oD/CoXAeTwQSIClCwww3YEPIhcDTFlloCnz0hjx4ZnpePndZ5fgr%2b3ubPuY9EsU44j2bXwuH2PAeNKeOmLrcwIn8/oKiP1WBIpy7%2bPZMA3jwbpEq19oSGKEmRJPh/e1gihIA7ZAD59NkIcoTXH5lLRpD11DBMMXgiiufQRba0eYa4nEus7xtnmaNPemlaPiw6qQkFQiYFYtswnqZ26WQU4l7Dw/2mL7ibvR%2b2H8e7hAcdHy5JGYfuhVpTodh/iHqzn0Zwi0ZQkptEwtrB0DhfiEmschDDZZ/6tLtDyib7Ev7mOcBqH476YurT6I3x%2br8e4k837uKvNx/i7/%2bt4vp/jnFjHW4d48qblMK3NHzxFwo%2b/PIJPvW9Bj7%2b7VM8/4MGPvGdU3zo5Ro%2b8o0zPEfguo9%2bq47jgY84JAJY/PnUGbz5ZSMYSeZXrtTR6Q13JjE5AWwodWOKw/eKQkJXGUmWmf%2b%2b2ocJYAlr9qf47esH%2bOPVt3DljSPZ/LV/V6Rch7%2b9UcJxU8OLP%2b/hxZ918OXfKPjSr3r49KsNfOyVOgovnaDw9doyqO65b9ZQ7jMBlA3mOp9jVQI4FO73VbKe3sYTXJUAJoAteY2CqzBMJMLb1jeXgNOeiT9cu4OrB2Vcv1WV8upBZT2ImL/cLIoEvPDTLp7/fgNfeK2Nz15uoXCpisJXCV87eRyXCC/VUMkJyE99Eb3MC7CV5pw5zmLzMMrygB1IXU8ies8BjmBLX/6N%2b7Bl1iku0bKYRDO3wYVKbbjPUc/HzZKDNyspbtdc3K67eIvLFXDd2/Sb7WU2YCMBWRzALjAkNXiytPODpby8GT%2b7yJALlR3g4In7zPimKonJtEdniLcgiSS%2bSO8D1hDAaa1O7LLhO3xYoVyh9dQvMD4Ipvb5wJ6FD0UxyUZZLAEbCTDSiw6y3K3OgHJ7fcnI7e9iIjhnm2Av49lZG8ulJM%2bJ5H2rCizeCeb%2bPffx%2b8B5xprPmexnvLQd2SiyOxwd7rQBPChfKzuOI%2bAb4X2kpK7rkmex5jfNm54g8KWdTQjJb28ck4KpfI35LfX2%2b4Bksw1YJYAXmYMH38d9fRTH4mHy/w82IZZ2Yfa/xO62513fPB3eSoD/%2bN3%2bWXp5ESRL0rCpXfzY3JvHzC86zruGSFRgBwFBJgHtdhv1eh2KopxdZyUXuY2JZcxarTZXgdVrssU/NUqlEnRd39qOb6lYrda1Wc1Jlm6EdhHAz3g8hqZpmE4me7uW4o2Nx8bOf49834OqqvPNbWI%2bjqOd9mTtneDOSJCzwCyjnUlQFO8Bs/mYeSS4FmGajKVXWMk8olzXbh5VhudbAx8uE/A%2b1XHTxxGdTRoAAAAASUVORK5CYII=' /%3e%3c/svg%3e\" width=\"2560\" alt=\"storj dashboard\" data-srcset=\"/assets/static/storj-dashboard.82a2fbd.7b56b5f438e0a95957749969a3802015.png 480w, /assets/static/storj-dashboard.cbab2cf.7b56b5f438e0a95957749969a3802015.png 1024w, /assets/static/storj-dashboard.2665e34.7b56b5f438e0a95957749969a3802015.png 1920w, /assets/static/storj-dashboard.42db587.7b56b5f438e0a95957749969a3802015.png 2560w\" data-sizes=\"(max-width: 2560px) 100vw, 2560px\" data-src=\"/assets/static/storj-dashboard.42db587.7b56b5f438e0a95957749969a3802015.png\"><noscript><img class=\"g-image g-image--lazy g-image--loaded\" src=\"/assets/static/storj-dashboard.42db587.7b56b5f438e0a95957749969a3802015.png\" width=\"2560\" alt=\"storj dashboard\"></noscript></p>\n<p>From here we need to select Access</p>\n<p><img class=\"g-image g-image--lazy g-image--loading\" src=\"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 2560 534' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-fddfc4a2bac38277ac522e86d6d1b3ce'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-fddfc4a2bac38277ac522e86d6d1b3ce)' width='2560' height='534' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAANCAYAAAAZr2hsAAAACXBIWXMAAAsTAAALEwEAmpwYAAADWUlEQVR42s1XyY7TQBDNZ8AXcOA7%2bABA8AX8AnADDQJu3DixSRyBAyAGkBAHJAQChlmA2TJJHMeJE8fxbsdLu%2b1HdSdhAsMyzBDA0ku5Haeq6/Wr6k5FNxworS40fYBu34UYC9vp2fD8GBkrCOXYFmB5iTTliIYZhjH7LxEN2Xh%2bGdyQwQl2Ihwy%2bX1FJPr67RI2ay30TF8mLghoESF%2bkKCmdLBeVVGta1jdVLCyWoOqGUj%2bYxJEcpxlWG4xHL1e4sTNEsdvlDhGOHmrxJGrJa485yjonYpI1rRDSt6DMfAlelIBDvwwQVs3ZfJ1IqLR1LGx1UKnayFOcknA30AYEabsbt7P0gzVLsP5eY6LTzkuPBlB3J99UODeYo48IwLUjomXb5ZkYgvL63i3tIaG2pWEuFQCOS8xfYmReJZm%2bV9BxriMJ8D5KLZ4tpvf5iynCROKsZ0AOT0alYksgU1aYbXdJ7nr2Gp0qB9Y0EkFrj9ESRlHUQRFaVJJROBFMaZh1tcoRpIk0Ds6DKMPTWtLm6bpV%2b/8zENBH%2bUU5Jiei34mCZg0PSF90wrQJ0yaoVCAyDcjqdi2TazycciSnG0HF/ezgLgYY/D9AGEYwnM9shHyPN9XbOk3H/WwSlPr49rtu3j/oYoXr5awWqUaN1y0qQeIXYAX04kWREjxxUlRCmny2ZAw9jmd6HQcEbeQasT%2bCDBMF7ZpwncoYVrlwHURBx4sy4HjxVI2CUnOo1WoUxlUaw1qhiq26g00W5q0PZLl9ET%2bSAGM/eQ0UdOy0DcHUgmW7WBg2RIpKfN34%2b4gYKVu4/K8gbmHPVx6RPZBD6fv6Hi8aCIeiiZYfNfJZAXE/bcr8ce6wC58/W68HQQ8Wxng0DkVB84oODyn4iDZyqkazt/vgqcJmOy%2bXLIdUB3ajit7wvccz6IHiNhxHNO2m8jmJ%2byQxhEtTppm%2by%2bBds/FWsvHapOs6uGTYuMjodGhk2AQy64pEh5SQL3bQ62h0D4b7Yn9vZVALkkX8DwfDjVCCRoHQbhnvywvtrfB9c06WloXDUWjWhM15tJhaLQLcD6R9%2bxX/Eer9auE9ra7TBRAp7qFlQ1s1DR8WKtDo7FujE6CQgHixBcnTGJy1JyM/xniMfbhY/SfIcNn6giU1bBjKA4AAAAASUVORK5CYII=' /%3e%3c/svg%3e\" width=\"2560\" alt=\"stoj access page\" data-srcset=\"/assets/static/access-page.82a2fbd.22eceec6db608fd2ca5c137996f0fd45.png 480w, /assets/static/access-page.cbab2cf.22eceec6db608fd2ca5c137996f0fd45.png 1024w, /assets/static/access-page.2665e34.22eceec6db608fd2ca5c137996f0fd45.png 1920w, /assets/static/access-page.42db587.22eceec6db608fd2ca5c137996f0fd45.png 2560w\" data-sizes=\"(max-width: 2560px) 100vw, 2560px\" data-src=\"/assets/static/access-page.42db587.22eceec6db608fd2ca5c137996f0fd45.png\"><noscript><img class=\"g-image g-image--lazy g-image--loaded\" src=\"/assets/static/access-page.42db587.22eceec6db608fd2ca5c137996f0fd45.png\" width=\"2560\" alt=\"stoj access page\"></noscript></p>\n<p>Click Create Access Grant. On the following screen create a name for the access grant and click next.</p>\n<p><img class=\"g-image g-image--lazy g-image--loading\" src=\"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 1500 932' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-c9728a2f5a5e6b30e4e50ce7181ae591'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-c9728a2f5a5e6b30e4e50ce7181ae591)' width='1500' height='932' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAoCAYAAABOzvzpAAAACXBIWXMAAAsTAAALEwEAmpwYAAAG2ElEQVR42t1aW1McRRTmPaWPlpY%2bmActrVJ/jA/66Is/wKpUHjRlGWNC9D0FJhhJApKiEpIYCyGSEIJcEmAJgYT7bdkL7I29sbszs7P72efM9jIMs8vssmBgq77qnr5Nn6/POX26Z%2buejb6Azx/CituP1bX1ikH9vP4AAsGQY2wEDDgpt2u31zhO372%2bEUSd1xeEngMyig5FzVUM6pfL48j%2b6mgFSZDkloKtlCpSA5R3Auqnqlnk83lHyOVyJSdTrq6SH41j9%2b6sru9ICXWra36oWr4oUCajQRGgfCqt7Qlqp2k6v1gOas7bCd/U1IT6%2bnrcv38fV65cQXt7O8bGxtDS0oKGhgZ0dXWhra0Ns7Oz3O7evXvo7OxEd3c3bt%2b%2bze2Hh4dx8%2bZNbn/nzh3cvXsXly5dgsvlsiVBzqlvaBz%2bQLj4XCSAVp2ED0QV%2bCMK552Q4IQAORlJQH9/Py5fvozm5mZcvXoVra2t6Ovrw9zcHAt1/fp1NDY2wu12s8DXrl1joTs6OrgPEdjb24uenh7ue%2bvWLU5v3LjBY1gJkO/VRer1B5FIpnYTEE8qoiSL9mcxNPVHOU9ldmovBbcjwJy%2bbj/zvGR%2bFwGtwzE0PN4kvpBW89Cy4HoJ8hdmzSilAZlMBuPj43j58iUGBgbg8XgYMzMzGBkZYVWdnp7mdHl5mVduamoKCwsLjNHRUbx69YpBbebn53k8eibNmJiYwNDQEPchU1laWuLxBgcH4fP5uC29Z3JykscKBAI7NKOkBvwhCPi1T2iArmBmbhnzCytYWfVgccmNpWU3PN71shogB89msywwTYYmHQwGsbGxgbW1NZ7wysoKvF4v19PkpODUJxwOcxsiJhQKcR8SkEiiMupLgtG4NCaN7ff7iwRFo1Eei0ij8Yn0SCSya462GlAkIKdi1DWJkdFxTE5N4/nEFMZcE5iZXTARoB5ZEyhLQGPBBBRNrKSQjcyAZKS83DGqcYLmZ7utyuq47J7NDrXcuNa8dV4lCdj2AVnEEgrv82bs5QQrWX07sippXy7vOBDa3gaNgGbRl8DMWgyayCdLBD%2b1IuC1iATNBKQyYtWjcUQ3Y5xPlYgDnJjAkSQgLYQOR%2bIIhmOclypvt/rlNKBcNOgEh%2blIbQkICQJIOJ%2bImtY3wvD6ApwPBCOGpuwRCO1XgMPUopIEUF4edgiJZMaxE5QCbEZjwq%2bojLQIjDRNQzQWR0wgo9C4W/xMoMApnc5w/LAf7XGiWba7QCkCqvUBujhxDY%2bMYfzFFAafjuLRkwG4nr8QwdUCRlzP0fngET8vLq%2bgq6cX/YNP8WRgGKtuz4FpQdk4QBIQ2UwwCZKAancBuf8aGqDx6jPECtMqqyKfFYEFEaWJQEOWG2W5GkMvHoj21AAiwKwB1ThBGXOnM8ougeiZzuMSXKbrO%2bqJsFqD5mLnYMuaAIFufCTszKKcCWiFFY3F42zvW1sp1gJFoeM2OdM0l1E%2bmdziNlR3ED9FaGJFBJBwwVC0gE0uozqnGkAEkPAkMN2/rXl98Pj8iMcThbu5oNhZ6F7Rw07QK%2brcHq84CEWYuFr7AEVoQcUaQOZAW18gSAREKyRAmEB62wRkbG5Wd53L8kUbNfLCb5BPqDFSYoexJYDuBA/CBPjujew9azg4CeuzHYx%2btUSWibd1glYC9usEj9xx2I6AWm2DrxscaYDZBMpdhB6bw1A5Aqx3ATIcPlbH4VIEkHAbgTD86yE%2bEMlDEZmI2Rkeaw0oZ/fH2gQo%2bCl3GHKyDR5JAkigWDwlIrOtHdtdpbtA7XcCmNLqYcypBAFm4axqXu2nsRrt3vz1OUtRYg5VIVtIJQHmqe0gwC7IqZQAa2q%2bzq4GxlC1IdNuTXYRUClKH4fzInxW%2bRCyE2oxPi8eVzUjtbZNZ1S%2bqp8PAue68rj4D1BvwYUHwPkH26m1nvr88Dfw52Th0/leGlArAuiAQ0LZ/eTliNQQvfC9flc70l1oaBsDTpzK450zwFvfmfAt8O73wHsCb58x0h31AtTnxCngi98PnYBckYDil5tC3dzCErofPkbP436%2bHnvY9y/fDVjHUOlTlCCgYwI4eTaPzy4Cn9Qb%2bFTkP/wJ%2bPw3sfLdwDcdwFctwMcXttsQqM/Js8DXbf%2bjBmyv7vaH03giKZDgSxC6DLHTAFVqgAt483SeV5tW1Axa9Q/OAR%2bdB97/wdAEcz31eeM08GXzIRPAPiCjQCE/YAHfERaOqsYRWN/dTqX5GJ/rFkO0ynn83GPYtBVm%2b7fW/SL6/NgF/DVVggD6p1ctCbD7PlD96S1/8LvA8qrPCIRqrAG1iAql8LRq%2bj7iAEKuRBzwHzXbnWuAtXWDAAAAAElFTkSuQmCC' /%3e%3c/svg%3e\" width=\"1500\" alt=\"access-grant\" data-srcset=\"/assets/static/access-grant-name.82a2fbd.83fc4c90070f1e193705234915088d5d.png 480w, /assets/static/access-grant-name.cbab2cf.83fc4c90070f1e193705234915088d5d.png 1024w, /assets/static/access-grant-name.71307f6.83fc4c90070f1e193705234915088d5d.png 1500w\" data-sizes=\"(max-width: 1500px) 100vw, 1500px\" data-src=\"/assets/static/access-grant-name.71307f6.83fc4c90070f1e193705234915088d5d.png\"><noscript><img class=\"g-image g-image--lazy g-image--loaded\" src=\"/assets/static/access-grant-name.71307f6.83fc4c90070f1e193705234915088d5d.png\" width=\"1500\" alt=\"access-grant\"></noscript></p>\n<p>Now we specify the permissions we want Longhorn to have, we need to give it everything for the bucket. We also need to ensure we specify our bucket in the dropdown. Then click continue in browser.</p>\n<p><img class=\"g-image g-image--lazy g-image--loading\" src=\"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 1708 1004' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-aa78f52a4725aa0f3be2420e87c3f869'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-aa78f52a4725aa0f3be2420e87c3f869)' width='1708' height='1004' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAmCAYAAAB0xJ2ZAAAACXBIWXMAAAsTAAALEwEAmpwYAAAHg0lEQVR42t1Z2W8bRRzuI/wDIPHGA/chIXFI/BXwxC0hJMRbkHhBIFRKGxJIgTbqW0FqaYugiCJRoE2bNGniNEnbJE2aprFju/ER3/ft9dr7Mb/ZXXd3vbZ3HYciVvo0uzO7c3zzO2f3rNx04oYNyO9v4NbtTTg3PdhwuRk8Mpxu/XNHuHG7%2bb4eLfXONveWx7o7JmF9YxO%2bQBDHT/2KPaII2EWN4f9wXVm4jj2FYhW9QGAsSJKERqPBQffxRBK1Wk1XbwZqp/fy%2bTx/Fhmr9Xq9iVgshmqVjSEIvCyVSvx9Qajxe3qHvuk0hvmYIrL5AutT4ARMzcxhT6lcQ7EkgEoVxmcjqF0UG7wT6phAVygc4YOo9cZ2KmnydC0vL2NgYAAnT57E0aNHceTIERw6dAinT5/G4OAghoaGeBvV0zO1HT58GCMjIxgdHcXw8DCcTifvi/rUjmG81LpCsQTH1RU2/zJ/vuxgBKiLpTKdKfCyHboRYFy42STUi3Z2e3sbwWAQoVAIgUAAPp8PkUiEt1FdPB7n8Pv9vI3epfeozev1olKpmI7RbmxZ2mTpkQmY1xMQiSZ5Wa6IHGY7b0aA2U5rB1efE4kEXyAtKp1O84Vms1nkcjleFotFpFIpfk/qUSgU%2bDfaNlo0tWlJikajKJfLbSXAWK9KYQsBsXial7l8GdlciZcqrEiAGQnaOtrFa9euYW5uDjMzM1yEHQ4H1tbWuEosLi5yrKys8DaXy8VLatvc3MTq6ipvm5%2bfx8bGBm9fWlriIELNJNJsLm0JiMZSvEwks%2bw%2byYxahoPq84WKTICiDkYJ6HZZfW8nVyc7oL06SEBKpwJGNeikAp0mZdyB3YJVolUCpmc1BBRYGYqmezKCdnbmXsLoiS5cmpYJKFdqSOcFjI4nkSnQQgWdzzdzk2Y2oE4%2bV3nW%2bl%2b1tKsK/Vab5jwVAiamHDIBFUZAKifgk98TvKzVJB7tMY/BURWkrhJgRxK6qUejod85kQc%2bJqhbgPJuw0QCmiqgErD3jwSXBK/Xx2PuW%2bsuBif8gVBHCVA7P7a6gfmtAPweN1zMapOVJmtNlpyseLdAxewSKAJUok4tOfV6g22S2BWq768KQgsBTSOoEvC5QsD2dgROlxe3WdKwzkjw%2ba0R8KfTi/VoHIlIGG63hy98a2uLk0BlpxghFIkyI5zg8Ae3EY7GmO8vybvHFpHJFVgYW0Se1eUKRVSUcLbbVWLxAS1YUEL0jgR8fEZRAVGvAkKtswpI8g2opiH1pgKUmExOz%2bL8%2bCT%2bGhvn8N7x8TbayWgihY1NHzxbQayuu5FMZS0RkMnmeORX00hRCwFltqgM2/ljDhaFkREs2TOCDWXVeyfnMMbS5C2XE5enpzE7O8sDHork2gUp3VSgKtR0uydpjCwtzNQ2NCHyuZEtqFSq7VVAXVQmldb5ejMX2MkLZJlYMmFBiYWtFLpSKJvJZJoDmuUNpkbQZKFG3e6%2beBnq%2b9o5tCUgokSC7TLAbgQshOO4Qykxi9cTyWRzICsxeq9BzU7cYNtQmMLfSDSBcCTBQ2LKEktlsW0kqBrBg1cWMeXZQjTgx1UW81PS0i1La2ZqXYIXo2T0IxBqS4CaEOULZZ4DkB3oFgo3OuyWlXC53UXiSxZfVA5LyCbYAX1PBymq17BEgF0VUBc/MreECacHrrWbmF9YwAIDZXqdsjS1LhgKM7VJIcrcIIEOV1T3pR5m0GmO3YtOf3g/Qq07AST67YygFRtwlcUPAeZ28szwhcJhnvtTPm%2bFADqdOXfxEv6%2bMMFdIN2nM1ke8PBUOhiByxuwre/pdIaTQJJgdIP8SMyqBFg5ENkNFaCdMxrTXvS%2baqICF9VkyEgA6b0K2RZULEmAFUPWyQg2mkmUpEukBI1OCzahtQWWbQBFWeQB6ISI6uj%2bLgG9HYj0elZwT9yg9kBEezDSy4FIP053dus8oO2ZoP1TYXXSci7wX4R2jm0J0Mb93YxhqxH87/8JUueo8wL9%2bTGiZF5l5q5SQCAN%2bG0imNGD%2blBhbLPTL31Pc8qWWyWgxQ1qRd2OBCiuGh%2beAR7eBzz3NfDssD08egB4fBB4jJWP7AeeGJTx1JDcRnUEarfTL82F5jTwm7L7DRMJsIvWdFju/P2fgYc%2bA578Up6oVbx2DHid4d1TwDsn5PtXvwdeYfjgF%2bDtE3L9mz%2by%2bh/s9U1zoTm995M8R3E3CFAl4C02wfs/kgd88FPreJrt8ovfAM8fBF5gePk7efeeGZbrqO2lb2XQjj5go2%2bay31sTm8c30UC1FOgsyzs/%2bI8ywkmgK/GrULC4AX6Tmpi3zkJ%2b8ckHGDYr6mj8sCY/I3V/mkuNKezckrC59p3AnbuBaRdeteiF9gpAc2OG4qIKWV3SKjV5Y/9KREOTwXXfVVMucpYDlRxc1vAWkjGjLuCYFoOZ0X2jWhxDO2cTL2AFbdnlQBJsou7EVq8UGeLr7BFV7Hor/L7G4wEd7wGd6yGJVYXy9d1Y9qFMRLUucGdqkA/wt5/62%2bRLhLshwTsRCe1MTrPAtWyoXnW/BDpRwKmEjA%2bOYN/AHS8Pdjds5InAAAAAElFTkSuQmCC' /%3e%3c/svg%3e\" width=\"1708\" alt=\"grant permissions\" data-srcset=\"/assets/static/grant-permissions.82a2fbd.7fbb86d337c593dc00219c2798f449cb.png 480w, /assets/static/grant-permissions.cbab2cf.7fbb86d337c593dc00219c2798f449cb.png 1024w, /assets/static/grant-permissions.fae756c.7fbb86d337c593dc00219c2798f449cb.png 1708w\" data-sizes=\"(max-width: 1708px) 100vw, 1708px\" data-src=\"/assets/static/grant-permissions.fae756c.7fbb86d337c593dc00219c2798f449cb.png\"><noscript><img class=\"g-image g-image--lazy g-image--loaded\" src=\"/assets/static/grant-permissions.fae756c.7fbb86d337c593dc00219c2798f449cb.png\" width=\"1708\" alt=\"grant permissions\"></noscript></p>\n<p>Now we will be asked for a passphrase. I highly recommend a sentence that you can easily remember. Something like \"Longhorn is going to be backing up to this bucket\". Once you have this click next.</p>\n<p><img class=\"g-image g-image--lazy g-image--loading\" src=\"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 1616 928' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-4d98977c02f0affd2941e01573031742'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-4d98977c02f0affd2941e01573031742)' width='1616' height='928' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAlCAYAAADyUO83AAAACXBIWXMAAAsTAAALEwEAmpwYAAAGf0lEQVR42tVaSW9bVRTOf2ABUkEIkJiK2LNj2MGONVtGFSrBJgQiqDJQtapaJYsiFXWRTaGFlB2qRBBIoZBmnpzRcex4tp/tZ/tNHvJxz7Gf%2b/zyPOTlJaRX%2bvTufO/57rnnnnvtnuBeDIlUFrGEhHgi0zViAolkBjk5DzlvgUgfyKsjJzdDtsWtsOc71WvV1mls%2bxyKRQXReAI9RcWAplegaWXx7RYVqKK%2bblTwKAddN9CTy6tQ1BKIiMOC2u3v7zehWq0KzUjx15pPQZZlqKqKcrnM5RRyuZxYjWJjUmZ%2bpVJBXqyYGTKZDLLZbJMApVKJYQ/2OVmRLyhiDjrXUxQVPbKFAPqasKftoHJVKzWEM7808eBeuCmfBKYwNjaG8%2bfP4/r16%2bjr68ONGzdw8%2bZNDAwM4PLlyxgZGcH4%2bDj6%2b/sxODiIixcvore3l%2buMjo5y3qVLl3D16lUMDw/j3Llz3ObatWsYGhrivHv37jWItM7BjP8zuwL/boTjRTsBhEy20BC%2b1ao7E/CQBCsh1sETiQSWl5ext7fHX7/fj2Qyia2tLaysrMDn8zHu3r2LpaUlBINBzM7OYnt7G5IkIZ1OY35%2bHpubm5iYmMDk5CQikQi3WVxc5D5isdiBca1fwxBaU18QRbUQYAoVi6fbrr6VHCcNcBrYHj/u4DSWU57qREBcnAad9n0rArqJn4Twdttjn4uZVloRQPGkOBrDkQQfdZQXiSaRluSmreGkAe1WhAwWqerq6iqrP6k%2bqW8oFOL0xsYG1tfXOW9tbY3jgUAA4XCY46lUiusQKJ9A24HKqE9qZxrRbubTVgPsNqBQ1DtqQKcByUDSfiaQwGQTdnd3OW0KPTc31xCe7ADV29nZYQGJAEpTfjQaZeKoLpWRvaC4aXC7mU/TKeBEgBsbcJh9SRpAxoyEfvDgAWZmZjhNK3z//n02lmQEFxYWuGxqaorJmJ6eZgNIaSKqm7EcCXDSAFJ5d6dAZ8atvgIFWlGCoih85pM/QH6BYRisnrqucx6VFwoFrqNpGpeZPgWVmX3aj74jb4FWq%2b9GAw67SsfZV0cjaO55K6xacVQCnKzyUWA/bTwhIJXOIRpLNZBIWjXDOLIG/J%2bhLQHRuHQkG9Bpdf5PH6GtDSjWhcqkJU88QTZMlm%2b1ar0wmUZr34LqiZHhqAGqQK5g4NcZCXLBWQPaE%2bDNxE/KWzxAgCaEScs6Pr%2bdhCQbfO93owHkiGxs%2bRGOxhixeAL%2bwC62/DuIi2vy2sYWAsEQ3xgDuyHsBILC44xie2dXXMRynhrHdgbzwBaoEWDgy/EkMnlxChRU0FuBXEe%2boHVlA8jbI4HXN7cEEduYW1zG4ooPS6s%2bzidCVtc2OH9qZg6b235OT88t8DvCSd0VWmpA7y9JZAtl4VZu4PeJPxmTf/%2bL6Zn5hxrQ5i5QG8BZpTttE7IFBj9ylBmGR6j1dXCuSisNkAQRutgC%2bYLeWPlu/YCy0ABNN8RWqPDAtCVMkHZQeXPcrFdBRRhCyqswqnVUjgwysDQnijdvAe0gAV/cqdkAlc56F54gCUJWnzqnvU77m1Sb9ncwFBY3Skn4GBLvf7IRVIe2xV5YXG7CES4n%2b0BpWiGvgkl628sQWf%2b/ViXki%2b79AFpB3SjxYLrw6ekFhqBquoDGqqhRXBBEXxKSNEATfj%2blKU6PlYRS/e2QNaHqEpXaHUF30ADbm2BNqKwHfgALTXuvXEc9bqp7I%2b6UZ2tHhHkBWpRqu1PA7gk63QcI3bwInXY3uKsXISkj8x0gnkjzPSASTSCbK3Z8ETrOM9xrP0A5zIuQl7fBU30Zavcq7OV7wKkjwFzlnKy4vg2aHAh/RlhgcmxOEfbRmF9LArz4Zei0K4LVG3XUAKf93i0BpvChDLAcBXwxYNUlqO1avAafJc9NPytiLoH0ITWgE1ppQEn4Gu/%2bADx7AXhlGHh5yB1eEnhO9PHMt8CLg8BZl/2cFXN4fgB4fQTIqQ/vHMdGgMjCO98DT38jhBATf2HgcCBhSei3RR8f/QS8Nwa8OSoIrRPhpj8i8rUrgFQ8IQLeEGw/1gs81Q%2bc%2bfqQEG2e%2bKpGHq3aW6O1laS8My76e1K0ebwPePU7IH0SBNDnyh/Ahz8Cn/0MfHrHBUS7T24DH9wC3r9Vi7vti9p9LDTpwm%2b1xamdUhYC6LrrBQGwvQM8CqcAX4cz2SL/3cVLDaieUthPgaKi4D/teFMvS4/lgwAAAABJRU5ErkJggg==' /%3e%3c/svg%3e\" width=\"1616\" alt=\"passphrase\" data-srcset=\"/assets/static/storj-passphrase.82a2fbd.1b9f08ac6328407d78fbfc688aba3cba.png 480w, /assets/static/storj-passphrase.cbab2cf.1b9f08ac6328407d78fbfc688aba3cba.png 1024w, /assets/static/storj-passphrase.dbbb15e.1b9f08ac6328407d78fbfc688aba3cba.png 1616w\" data-sizes=\"(max-width: 1616px) 100vw, 1616px\" data-src=\"/assets/static/storj-passphrase.dbbb15e.1b9f08ac6328407d78fbfc688aba3cba.png\"><noscript><img class=\"g-image g-image--lazy g-image--loaded\" src=\"/assets/static/storj-passphrase.dbbb15e.1b9f08ac6328407d78fbfc688aba3cba.png\" width=\"1616\" alt=\"passphrase\"></noscript></p>\n<p>Now we have our key! After saving this click Generate S3 Gateway Credentials.</p>\n<p><img class=\"g-image g-image--lazy g-image--loading\" src=\"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 1616 930' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-e006fa122ee7e87adb40ce07cae3e60d'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-e006fa122ee7e87adb40ce07cae3e60d)' width='1616' height='930' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAlCAYAAADyUO83AAAACXBIWXMAAAsTAAALEwEAmpwYAAAKGklEQVR42tVa2W9cVxn3n4BAiKXqA4hNgHhFPMEDiEdoQUXwwhsSDyBBELQFmpCS5YGSJgISUUNS2iRtSiuaJmmaOLFje7zb8Tb2eOyx42X27c5y79y524/vO2fuzPX4ztgzbVMY6afvLN/Zfvc733fOsXs2NmNIpfOIJ7NIJHMdIZnKQSkUUSh6QPk9ZT5QCgWp1wTFI/3q/erq6eJBxpVjl1UVW9tR9JTKOiq6Ba1ikjwopL5O8v/5xyT05AsqVM2gTLVjcDvbduA4Ddi2TZaRFtJb3ox0Og3L2kugplWErFQqUGmCfr9cLodSqVTPs65pmiLdbkxGoVimj6cLXbaaHsVDAEsXzflmcL1Gkjt1B%2bafRQvfJNNiArzl3nSBTPDkyZM4fPgwTpw4gTNnzuDUqVM4fvw4jh49inPnzuHixYs4dOgQLl26hLNnz4o6xuXLl9Hb24tjx46JtqdPn8aRI0cEKc3jNY/Lv8DEPLaiSX8CGLl8qb74Vl%2b9FQF7FuvzBSCsxMLW1iZCy8sCq6urCIfDCAYXEVlbo/QKkskEQqEQloJBLC8tCSwsLGBjYwOJeByRSASLi4uiHbc3DKOtBYhxCdWqUbeWQrG0l4B4IgP2C%2b2%2bfDsLEAN%2bQHva2bfO2ZUr%2bhGQoGjABLTb9/tZgKNrcEo5ibICu5SHRWmWIl3MwSxkd6MoZb3OT6dW79eex2kJGtPRVbFs7zxbEsAynVGwQ3uFQx2XRWMpZLKFXbq%2bFmDocDJRoFqRaZosqmXA1ACdHJdBjs3SpHTLGZyulqSOqUoY5YaOUSvjPKdFXmvoMNlEoi%2bYgPQ2zae6a65tLaAbHyCkVoRTUWENvgrz5WdgWzbGRscRGB7F6koYszOzGBoMCLm0uITpqRmMjoxjZTmE4EIQ4VAYU5PTAgvzC7hPeiMjY5ifWxBly8FlUT41OUP9TiC4SD4iuIRKqUiE0HyquiTeBeUp3MDJJShd2TVXxc8JegnoygdoJSKgDKfvAuzeX1KBjbnpGfTduoMxWsjw4DBuXL%2bJvtucH8VbV6/j5tu3EBgKYGR4BKOBUQwODIr6t67eEOVc/9qVN3D1zWu4QpL74n5u3%2brD0L0h3L3TTwaQpYWSI6RFC5h6I01f3snF9xDg6wTZ5N%2bVBdBeg5JCSa2gWNagFwuwySIMtQSroooJmZTmLSJAeUuT5awHsyoXYhtCj/0J522WpG9p5cbCSEf04Vii/ypZQTGbgarkUc7noBVYZmGzVfgQsO8WaPX12xJAXx/FDHY2NzExOoYZMtvw0jLuk6kvzs1jbWVFWMLM1DSC8/P1rx4ks16nkBah%2bhCZ9PTkFEapbm7mPibGxkWedcIUNrk959ky2BK21tfr7TnPfY/T2FMTkxgnXV2lOeUTnRHAKJYq9bTXKva1gEIapXweia0tSpLzjMeQ2N4Sk1con4zuIE9xfufBA8RJR0klkYpGESedGJ0PmITo5gPkEgmxqBiRGSUkd7axSfGf0xp95UpBISspC8sRllJ1UbMuN91iC7SNAuzxY/F0HW65tIBqewsoZbG5uYX52XmshFaEc2M5SdaQjMUQWY1gI7JOzmyRDjpL2FzfIGe2JBwd58Oku0h127RQ1lkNr5KTlGWsw7rcD5s%2bL05sG6MBpwaZrjnBfLLzLdCVD%2bDwRyGHwxJtQEGGSKuU1pRGvlyrFzq1POu4Uq2Vq4qnLt%2bQHN6UtEShDbiedZMPJBmdEtBRFKidAjkS2MXGwcd7AHLTTjm/K%2b246VJ%2bj47T1I%2bsUzpAXobnpo/1HkcB/4tIN8fW9/W47DkJFt7rKOCmb1CcZty9RzH/nT6MjE3i2s3buHn7Ll6nWD5JhxvRhm%2bMNcs5KNpddvarb7aAfe8C3gjQTIovATWWM9kcYomkeBfYicWF5LJ4MiXy/DLD%2bhadEvnafCCIW%2bTuxXoX3arOSwo6uQtwFOC7AN8BOArw1jhIGOSJWrW3gHbmb4kHEwgSDMMUCzDJW3Pesh0B7sukfJWuunq1Kq68Ol1n1QqNX5FSI1R0OjQZUpa1Rn1dh8p1vSrG2NcCYglpAdyxd9/7ST8CeBE82TydA5LJJDKZDBIUz7PZrEgz%2bPGCX4R2dnaEXpX043THL/KbnaKIujSdF2J0NuC8YcqXo6UE8O2/AT%2b8APzoReDxXuD7/wC%2bcQa4HgQuTwPf%2bTvwxHngB%2belzmMvAD95BUgVDHEs9/oqXwLyWbYAXTKp%2bS%2b%2bLQE0Wf66K6EQBvr7EQwGEQgEMHjvHsbHxzE8PEzngUkMDg5iamoKAwMDmJubE48dI6R3j/RYf3Z2VjyIDA0NIULnBOoZA6tAz8%2bAr5wAvkcL//FLkpCenwJ/ugM8PwB8/bRc%2bHdfkCQ88U8iiRBJ8SPIbgJ4K9YJ4MWWaFGvjmWRLehicd2cAyxhAYYYyN27/GMz5zrDNMUXd19l5BYwBGlcJve89A9OjdAKmS9sEzHFxnN3LJy6a%2bPMgI2zQ4RBG8du2liM2hhctXHyFtX120LneSEt9I7YUMp0KHLs%2bpvAnicxJqBISr%2b4kkI0q9MkTfHy24yDvAjxYnnfVl1JhPDCuVxI0yXCaJQZZq2dhNsHSyaBy2y%2bJMH0h2O2roN8BmsbBVwCnn4jhUSOrKGkCkeYV0pCZnMF8V7Y7kGk4QjfH5BRoMqn3yZwmWlLGJY/av6vdRRwCXjy9RQ5DBORyAYCIxMYG5%2bivTqLoeFRLIfWxN8EWhPg%2bvj/XbR0gl4LiPEW0E0qM0XdQbeAexDsCwHnx4CXJ4GXJjoHt3txHPjXRPd9ePu6QHN5O4j6/NoS8KvXJAF6pTsnyOb2rb8CH/o18MjvgU/8tkP8Dvg4yU//AXj0GeBjT8uyjvup4RFq%2b5Enga8%2bR3co%2bSRYPw/sOgqrtQXOb6kolKtd3wbJd%2bKxXrmALx8HvnisM3CbzxylMEd9PHUV%2bPm/ZTj7/LPAl7rs77PU3zf/sg8B7uLM6rv7yxBbAMfmD/9GfkG2gk7xSfpqnzoCfOGPwOeelWn%2bkt309Sjho08BX/sz3aT3I0Cc/31OfwclwN1j/WG5f1%2bhk9nlKS8cj3SayiUu1eTFSYf2r8RF33bOnra7yyV4DuwLbi3v9QG%2bFnBQtD4HHPQi3MpTo039flEGPv00X4ffRwLcxVt2Iy7vhiNjuek/Qa7Tqc6wnHrc9v5albs/7t9sMbZlPyQLaPdzj8UriSrenCtjYEXDxEYF1xfK6Kc0l98JqZjb0UWe0%2b8EVdwNaRhe07AcryIQqWBoVcO1Bdme8Z/Zsmjr90faVo8iHwgB9YErNtbTBjazBuKKibWUTOdUCzt5E3mSWzkTDzIGNggR0g3RAhXNQpTqt3OyDeuwfjhpIFOyuiOAn74fFgGd6HX73NWJXrFURk8ila8fbx%2bWBTi1v9XX/6vEk7ebyuymeqdJz5vu1AKyuTz%2bCwBm3oYsDsrIAAAAAElFTkSuQmCC' /%3e%3c/svg%3e\" width=\"1616\" alt=\"grant key\" data-srcset=\"/assets/static/access-grant-key.82a2fbd.4bad576a0dfa583c8de8b8cd17683c7d.png 480w, /assets/static/access-grant-key.cbab2cf.4bad576a0dfa583c8de8b8cd17683c7d.png 1024w, /assets/static/access-grant-key.dbbb15e.4bad576a0dfa583c8de8b8cd17683c7d.png 1616w\" data-sizes=\"(max-width: 1616px) 100vw, 1616px\" data-src=\"/assets/static/access-grant-key.dbbb15e.4bad576a0dfa583c8de8b8cd17683c7d.png\"><noscript><img class=\"g-image g-image--lazy g-image--loaded\" src=\"/assets/static/access-grant-key.dbbb15e.4bad576a0dfa583c8de8b8cd17683c7d.png\" width=\"1616\" alt=\"grant key\"></noscript></p>\n<p>Finally we have our S3 info! Let's save all of this and head back over to Rancher.</p>\n<p><img class=\"g-image g-image--lazy g-image--loading\" src=\"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 1614 1538' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-74826bd154ad1875b108c902c8c5ac86'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-74826bd154ad1875b108c902c8c5ac86)' width='1614' height='1538' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAA9CAYAAAAd1W/BAAAACXBIWXMAAAsTAAALEwEAmpwYAAAMZklEQVR42s1b6Y9bVxXPP8DHCoFAIBYhhBBICBCVEMsHBAgVUEECFSFVIEDiU1X40ChdQqI0tGlKW2izN5O9SbO0STv7vi%2bZ1eMZz%2baZycxkVu/Le8/2%2b3HOeb72G48n8XPsZCwdnbu9%2b%2b499%2bzvetewywMjAYQjGqIxwxFEojqSqRT4Z5qmQG75fj/7Mymai0GV7TgX7M8W8o58a2O8yz0%2bTQQwS0KA3EUVSohCN1LKZ1R51%2bjY1CYC8KYYVLkYDlhcWkY8Hi9ooaqfT3piYgKTk5NYXl6G1%2buF3%2b/H0tISQqEQAoEAgsEgwuEwksmkYw5Qv9V1PwKhcJYD7ASwb/h%2bm78XAdbWNogAmiMCMN63b5/A1atXsXfvXuzZswcHDx7EgQMHsHv3buzfvx/PPvsspqamMkRzKgL9wx5Mzy5az%2bcSgDfl84cRDMU2cYMdnIqAkxPiE/b5fDAMQ05/dXVV2tbW1oQDGI%2bNjSEajRY1/31FIBZPYGXVB38gIuXtTr1cSrCcOmDT2mxtWwiwukYyEozK5hiHwnHhCMYMTqzAg0Iqlca2esYqlOA9eTlAEYA3u7C4guWVdeGKpbtrgu1ccD8R2Im/3PXlJYASgXxQiAjwiSWTqR0FiptyiXBPAjhVgmpiTU8UZEUeFqi1FESAtfWAiMC9CaAXTIBIdKtvsRW2a7/XuMLmdkyA7UQgmrYKhYhALgeoxShFysDvU1j5IHaw99mfi0Qtc22fR43h51Td7tnehwDTeZUg19kn4LIC9fLtlGB%2bDtAR15ISb9h/qfQaGJGIyhjdMAU0w8z05f54Hl6n%2biVtvhA/m0hm5yyQA/ITgE3f3WXLAlh4I2MGCyUAz8kb7esbxKFDh3Hx0hWcPHka5y9cwrXrH%2bCdI8fx9jtH0djYiiNHj%2bPw62/g%2bo0PcfToCRw7for6j%2bHylas4daoCZ85ewMWLl1FX3yT10xVnZb63/vs2TtCcx0%2b8S8%2bcpPK7eOXV11BVXZcJ8hwTYDsr4FQEGHgR0zNztNjLuPTeFVyiRZ%2b/8B6qa%2bpRcea8bLCpuQ3VtODLV66hp7cfNz64KZu8fuMmPfM%2bzp6zNn/o0Ovo7OolgrXgw5sfS997l9%2bnec7hyvvXUUNznq44J0SurWsUjnggApRGCepUT2VYWoFiVeYQJhLXVVmxNdftosJ9vCnG3G7axETNqcYXLQKFWQHnSpDFhwnBsq50gsg7takyt3NdN5DVB1TntaiNq7GqTxE4%2b6yZET91WEVzQDRmQbEikDv%2bdv8QvLMLIhIjrjG43RPwTMxgcMiFUbcHs3OLmJqexfDIGFyucYx7pqg%2bh/k7SxQETcozg0Oj0j5EeJSeX98ISn2W5uW5eR5W3nanrWgrwITgssK5ExZKAAaeu7d3AP0DI2jv6BboHxgmogyjq7sPvX0Dgptb2tHdcxsdnT3UNihtk5NeIRI/zzrANepBW1uXjONNMx4ecct8XGaiPDABQmHLCtjBnjQpxg9g9mVWVfOwuDFxVRjO7/b5QhR/bMgYRXwGNVYFaYqoHK/ws2p%2b1gP5XPZHYgVyx/M7mACLSyuorKxBHWlqtgZs2pgT%2bNQHB13CBa2tnaitbRDO4FP96ONqsRZt7d2ob2iWsdXV9aiqqhWrMDTszrwjH6c6UoKltAL5iKY8OUVU9jmYMHYFq5QlgxqXexgqcZMvUHMQCzwcK5DPN883Jt8z28G95i6aAKUIh/MRwO6j20GN247gTmC7fOYDxQJKCW2QcuL2YqyA8tEZkmlsUBs7K9wXDMXht81dSngAKxCXOIDrLBasmZkITgigNHNjaxduVTWgvqkDlbXNqG/uwIeVdbh%2bqwbjE170DHlwrao1rQf0kucBHpkIKFM17V0Af4Bxe2Yw4p7EGOHJmXl09w1jYmoOd1cD8MwsIBo1thWVcES34c0Q2qZetBIsZUbICocTwu4KEkkSiYQpfrtukAurGSQS1unH4noasyUwpM44GtPS3KFlwArPNRiaJt8hNMIaYUOnvcTiW/yWexIgGNZodQmcavWhayoCM0GmKk%2biojhPME4bNiTfn0olJbPLX3e4zTRVmYhE7zcMXfo1jcxkLCZ91ncAM/0hZGuW4OUa4M8Xgb9eAv5C8IczFILPUYxBc4SjTgiQSuCVqg00uPnTEQUYuimBiQpCirECzIp8ggMDA2hubkZLSws5MNXo6uoiZ6cNt27dIoenFu3tHdLH0NnZiYaGBgpva2hct5S5va6uDh0dHUKY9Euh09ofP2zi%2b/8x8ctjJp4%2bZ%2bKTu02828nsFqdDdEiAwzXraJ2IIRLwU5AxI8EJByQz3nlRgrk%2bdqEcwN8K%2bZRjMXJv/b40u8axsUFubygkJ63ruoxhTuF6ksrMJVzmTTPwGOSktk92AntuAQdrgTeagJcqAdcSRYbxIjhAESBMixwlhcVBhnJHFxaXMyGoEz%2bAPbZwlGVS5fRISUUtGWb9wPKu2iNpWed6xC7rrBvS%2biGSnsuaL46UYUFCjwvbczlOxHKuA4gAr5IINLpDIgLEuZbtTmXzdsXEAipIEVEyskkNFbtnEqHbWoB04nObdl67gpDCEX2Lh1mQEjza5EPHRIRWbMhk%2bbw2J34Ac0xnzwBa2im8HXCh5/aw%2bAENLZ0YpLh/acWHq5UtmFtYJYKkSvo9wbkfQIM2ghRuhvW8dwWcmkGVEebUe0NLF9q7%2b9HVN4Te/hF0dA%2bgur4VK2sBdA2MYZl8AdYvrDSdent82kFaczCSLYejDjlAnXCsBPcD8qXFLREw5ZR1PSllI5ES%2bdZlvCY5CCXbCuxtoUhMQLWrviTJvmlkAQnLhDrSAaW8IZJLAF5kqa655Pud6QGe/wjYS9r/pY%2bt8vhySqxMwVaglJekcv0Arvf29qK%2bvl5sfF9fn2D2Cxobm9DW1kY%2bQav4BtzG5aamJvIP6gRXVVUTVIm/0NPTI3M1NDYiQKY6Ttz0%2bGHgh2%2baeOKoiacqTDz2nCM/YKqsBLCwhoDfL7c92AdYT9/4EDYNh8XT43tAoVAQ8/PzUo9EwnI/aHZ2FgsLd%2bRZvjESSY/n53Xduoazrxp4%2bjzwzDXgReKAP10AurwpJArzBMtNAJXxMcTmM3A/Q7bNsGICamO9oPq5zHGDarP38XgVK%2bia5SuwbxEIW34EO14F6oDyc4DK4WtaSvIAUiaQ1Fc6vWV97GQbbmEL4lIP2j6O2vsER7RN5jpi8xkK/C5QPgKocHjEPQHX2CRGKSRmU%2biid7rIy1xe9aGlZwRjU3dK7gM48APKTwB2fq7frEZdUwea2rpxs7IeH1U3wju3RARwYXRinuQ5VZQPkPED0j6AKrPoFegHlFcEVL5PZX01yfRadfW9n82kfIIPWcA6Q5UzoD7TSz8B%2bQA8jiGhUXRoxMgHsDBDNBrb5Aw9Uh0QjsTKetmp3mNFhKe7gVOdpuA7Poogo/HMLZJHSgDW1G73qMT0Q0NDch3W5XJJbH/79m0MDg6ij/D4uEdugbrdbiqPi73v7%2b/PYM4peDweMY0qH2CQlfjBGxb89G0TT57gfABwriclHuGO8QPC4RCmp6cxNzcn9tw7M4OxMTfZ%2bkWx87Ner9wPXlxchG9jg8asSN8MjWN/YHFhgcYtyD1ivk1q//39CvDEMcv%2b//MG8LMjQO24KWHxjiAA%2b%2bwGBQOcA7RygpwGMyWvwXV1DyAlYTfnC1PWGLkYabXJuEw%2bkT%2bHW5kmTdfhp%2bDnzgbBuo65NR13/YbkEnaEH2C/H8D5f2XTg7a64NDm/i1jcn2CiJbxCSSxEstCLJY/fH9kBCj7PcDMdbwsFHVPsJQEKNamlxNSD4sAnOO38voJcXV3BNBaHgIHWNeVTNOm2HYIqD1n11kGAqjNb74PtnMg%2b1%2bBMotAVDexGDCxFCQIFAn07F2C5ZCFH2QeXstaJHuprmwikEhlP1V9dT/wvcPAdw45h%2b8SfPtV4Jv/Br7%2bMuGDVltRc70GfOsV4MdvAb5oxoEsLwHYG3vsOeArRIQv/csZfJngcy8CP3oT%2bN1p4FfHgZ/8D/jiXudzqfm%2b8BLwtQPASmjzPeWyEeCZq8An/gF8nl782ecdwgvAp/YA36BT//k7wC%2bOcL4P%2bEy6r5j5Pr3HIsZyuQmgrrhWUDT2azq5P54FnqpwDvx19/d0%2br85CTxJ8NtT1FZR/FzMSX%2b7BIS1fCJQ8n%2bO7ui/DG1Z367h0YkS/nc4%2b5KdBPY15RLh/y6WEhd7jS8aAAAAAElFTkSuQmCC' /%3e%3c/svg%3e\" width=\"1614\" alt=\"s3 gatway creds\" data-srcset=\"/assets/static/s3-gateway.82a2fbd.dd484e9bb8ffff7de3bb17f87caa2a84.png 480w, /assets/static/s3-gateway.cbab2cf.dd484e9bb8ffff7de3bb17f87caa2a84.png 1024w, /assets/static/s3-gateway.c64c277.dd484e9bb8ffff7de3bb17f87caa2a84.png 1614w\" data-sizes=\"(max-width: 1614px) 100vw, 1614px\" data-src=\"/assets/static/s3-gateway.c64c277.dd484e9bb8ffff7de3bb17f87caa2a84.png\"><noscript><img class=\"g-image g-image--lazy g-image--loaded\" src=\"/assets/static/s3-gateway.c64c277.dd484e9bb8ffff7de3bb17f87caa2a84.png\" width=\"1614\" alt=\"s3 gatway creds\"></noscript></p>\n<p>Now, I have shared all of these credentials with you for demonstration. They were immediately deleted. Back to Rancher. Here we will go into our cluster and where it has Namespaces on the top we need to drop down and go into our longhorn-system namespace.</p>\n<p><img class=\"g-image g-image--lazy g-image--loading\" src=\"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 2560 1132' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-e44d96535e84307e1cf7210dba80d196'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-e44d96535e84307e1cf7210dba80d196)' width='2560' height='1132' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAcCAYAAADRJblSAAAACXBIWXMAAAsTAAALEwEAmpwYAAAHRUlEQVR42s1Zy24cRRSdHwDk5zx6umem393Vj3l7HDuy8yLEQkKRQEFEBHZBygpWIEKQEBJEYoPEF7BAPBZIyQLxB/zV5Z7bXTPj8dhxnNjJ4qi6elxdXafOufd2uZJnPfLSMTmTA%2brmferYATWMNhnNDpmdkFQ%2bpigdCpwgo2Y7ENh%2bShb/Xq%2bb1OC/xZjXAXjveqNFrhdTq%2b2RaTmkkh71BxNqd3xyfEUbGxbd/eYOPfztC6o4TkBtO6RGO6Rmkx/SaMsD6jWT7LBLydZVUqN9UuOijYHhHqmtaxQzwnzCk9jUNF8vYLFWy51eY2NNyyWjWqf1N96ibODS1ff2qRJFGfl%2bTGurm7S6WqW1tRqjzqjKjmdMQDK%2bQikvNulOmM0BqbRAwqpIspGwrNl/HYBFN5o2GaYjfVEHlFFtkHr/c9r56lfK7/9MrWBMFdeNKIpSMnnQ5qbB8mjQ2joTwGTYflYsfHSFksFlilVvKWTCkoBXLf9a3aLNapNq61Wqrm2wolvFb/yOtc0aZfe%2bpeuP/6FLj/6ggNUsBHheREGgKAxTGbAKFYAAKGD7htggLaF4x1XSFwXErIY0H4nfYJuTCFj87WWTpb0Pv4/Hu5QefErp7QdkuglvbmdqDaPO5GzWBTbbQggIgoTiOCNcwwLrrIB1toDtJaT6uxT3d6SNopwiP6KYLQOEXkh52mcrDIR5A7I7RpaLFjkPy9TqLdrff5s%2bvHOPbnz/N13/5T9qZzvUMtvUZJsKAc2CCJPjA8ZUsOthmIj8AU3A2soGBfklmnzwgEa37zM%2bo9G7n1D35keU37zL4PbWx5TtHpBhtIrAeQygKqtVxIl6vbjXNDsnjjkrhFiownSpxhCFNGZKscqFG%2bUGVLKsTxazs7KyWew8wHFg9c0VSvZv062f/qWDx0/pxg9P6J0fn9DOo79o6%2bGfNPn6d9r%2b7in1735J1dUNHlPEj0XgeSDWY5uACPRxH8TXONPo/svCdA28kRtazevFbwjuUDneA32QwBYIOQso%2bUNkAf2AVc4KLYel3rtUoLtNMac8WEVx5lDcxryIPB/yvQHbqMvolejOYdYPw55g8fromLNDP1eerRH0jrxbFPUlLVaw%2bDjOyXFCYWZqAW5xr9cdySK73TElCH6JToEDCYa9/oQ8LorieEhKjY4Ffo%2bigQB9tM8acx7AnECSjNkOHlUgA6TAdpv90rCmBEABCIK97WuUD3aFAFUuWgMpEAQUvrKF0aNwZCLPU%2bQHKe9IKn8f8LXjxhwLnGPGvXxgLseJyGZYbV%2bCYQWyBxADDlmAg2DHyzgFXqNouM%2bl8IhCln7ImUAjCDPKmRg8EBNgoRZajZYn91vcKiYr4YyRcdpsdwJW1UiegZc6Mu48gHfhuXzOeJjXQkkPAqZBo8RMAVUuH0Mabu3R1s51Gk24nVxm7E0x2d4TAiCnRJXtEij%2bTUsviobS1xY4bsx5IY4LG6TJVmGBRQLmiUDagGxTFD28gznHg67EhEEZF4ZcTPAHhqsksPhBfgT6vsdq0tB938/PFOiWzXMayFie0%2bMKF0FSguBJBEi%2bRuHQ4RgRelQ3LKoZXPY6XDHaihpuRqbffUaB0hapRRxok7RH3V7x7ZAxgZBjlVOh1AfPk%2bfPWChhrMcFHOY1LHe5BRYJQMBq2R51fP6a4mLG5OBheRzIUGKyl80ymDwLCH6YGF9muh/yN4jNmcbh3KyBPkrr%2bXsFivu6kDnLFyLG6fmapyVAonjHpbbPL24xkxYHEzeVGhsVIDKHcYpdQY0OAvChgp0AAQiKscrL4DgUqKQrNkuzQXmPvzeyvqgHFsRnbf2MKsC8WDyIPL0CEMUdj%2bwoLL77W6wA9pGogD0l1yADUsfOLOyOHKwwidjtWHXFAjiowDUWhgVVa5bMVSvLZHxXzPc1iu%2bNzpnPCBpGRxbvce3T5AB4agIs22UL%2bAUByKl2TCZXiTgxMjuRtPJAjQUC0GJSKAAvoPuAPrS4KEABIL15JgW0QADnbI7gRRxIZ9eiikzuGXML1y2CIOSMWgJ9KAB%2bhCz1353nAYlWolS9zxMDhAAoIAimCpAA6ABq1rpla8dLLQDPw99QgQ6CIOBFJP28AVC/B%2bZ9LgssElAsXBU2ONQuI8CeSh4q8AM1JQBSvDgCihYbIAS8uAWywxYoW8kOJ1ggmrMApHjhFijnfSELyI4jENrR3PUMy4KgXyrAK4MgduJiFVAQMK1FNAHFKXCN9EfR7GR4QQGhJsArd7wMgrzjhxTgLCcAwQ/5PlxQwEUTEOkgWGafCk5GcGJjyHGVJWcCVS5WoAI5QjpiAXeOgGQuGxTtvAWMBQuguJkRkL8aCyxmARCARSeI0OXhCM4HQIAepCvBaRaYBsElYFss2wFIrwiCySsKggtZQBOAA0PsOM4DtBWOWsAVCzS1BZDzdd7X1yVEAUt2AKUwqkBIH/dgBxRFF/kPFRCAklqKsZKA/wHCSMy%2bADNVeQAAAABJRU5ErkJggg==' /%3e%3c/svg%3e\" width=\"2560\" alt=\"select longhorn namespace\" data-srcset=\"/assets/static/select-longhorn-namespace.82a2fbd.383c4c3f810b1788acd8d0d5aaf57b63.png 480w, /assets/static/select-longhorn-namespace.cbab2cf.383c4c3f810b1788acd8d0d5aaf57b63.png 1024w, /assets/static/select-longhorn-namespace.2665e34.383c4c3f810b1788acd8d0d5aaf57b63.png 1920w, /assets/static/select-longhorn-namespace.42db587.383c4c3f810b1788acd8d0d5aaf57b63.png 2560w\" data-sizes=\"(max-width: 2560px) 100vw, 2560px\" data-src=\"/assets/static/select-longhorn-namespace.42db587.383c4c3f810b1788acd8d0d5aaf57b63.png\"><noscript><img class=\"g-image g-image--lazy g-image--loaded\" src=\"/assets/static/select-longhorn-namespace.42db587.383c4c3f810b1788acd8d0d5aaf57b63.png\" width=\"2560\" alt=\"select longhorn namespace\"></noscript></p>\n<p>Once here we will go into Storage and Secrets.</p>\n<p><img class=\"g-image g-image--lazy g-image--loading\" src=\"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 460 702' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-ca45c70fbe76da6ccf1db383eac1884c'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-ca45c70fbe76da6ccf1db383eac1884c)' width='460' height='702' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAABiCAYAAADgDdXjAAAACXBIWXMAAAsTAAALEwEAmpwYAAASxElEQVR42u2c2XNUSXaHNU/NKqGlSqrSLpU2NrGIVYi1oWkWIQFCSCwCxCJAIEACJMQulmkYNrvbPT3tGYfH4XGEx0s4HHbEPPnNEXb4dTwP8%2bA/wQ8OPx/nd26d0q1SlZZoLcXgisi4N/PmzZt58uQ5vzznZGUUFpXLp5wyfsjL4cKyKd2nPQEm6mzic8vHyosrvBQtG/M8nQng72yqlGzQ4cJSKSyJaD6UH5ZQMCThcIkjRGVce0U%2bwiQj7HjPZ50Diksqx6SxnavQAZev3SmRLS0SCuRLecPnUrF%2bjxKkZOk6qdrVoeVF7v1gfpHkFxRrW0XF5bEB2/eC%2bcWaZpsIcQQIhUulrLxa7g4Oy4uXX8nTkRfy/PmP5dHjEalbWi/5oZLRl90MF%2bTkSs2%2bbln34G%2bk/sJrafrZb136T2kY/EtZ1fu1rOp55wgQlDw3%2bMYt26Vh3WbJWhJQYuQFCpUgDJayjZu2yoYNWyQQLJw7DoAApWVVcvbcBbl27YZcuXJdrvb2yaWeq1JVvUwK/ASAAwoKpax%2bixvoW9n4/Ddu8L%2bTpu9%2bK5vf/aus7vupVG1vk6JwsWRlB%2bXYsU7p6Dwtp06fk/37D8kXew9I54ku2bCxyV1P6zcPNh%2bW7Jz8OO6YEwJcv35Thu8/ksGhYbl374HcvjMkNbUr4gjglwHBBfNkeec92frz30vT97%2bThqFfSUF2ji6R4tKIZGfnyz436LfvPuggh1ybHz58rd86cLBVXv74lXLars/3Sk5uaG4JwBLoH7grT58%2bl4ePnsjjJyNKjNq6lQkcECWCW%2b%2bhQIGs7H4p2/78v2TrL34v6x//Q1QbVLjBVLpBFejg2o%2bflN7eG3Ly1BnpOtPtuOGsXLx0RQZuDyqXNTZud0sjPDcE8Et3CJGYUqo0N0AEXe2Bi9L4/t%2bk8Y/%2bXerdkggXFCkBwj7isr4ZHGs/ECxSDuCeZ8gFrnMqBKeKA/zlLIWiymVSHFmhs6/qkec%2bFVqk5aP3NuCp9CGtkOAY1OeWSDhUnBIzTLW9j4IAqVPZx7EXGA/5fQopo6pqmXyKKVK1VFV7RtBJ5k8vOSSaF5Ly8hrJyHU6mpTjEJj/mu3QG5W452rlXsqPe5a8Tnonxlfi9iAZNoACdLMDISTyISfRFy7M1kEtWpQdN1DqLFy4RJ8tXpyj18zMXKWu1Um35J8sb6IdARxKzWAw8%2bdnyecOqX355UHp67slu3d/Ke3tnbJq1TopdZVq3Vrp7Dzl8g1aZ%2bvWnVJfv1aKnBSlDg3zzimH8CAMbabb4PMd0GKiyHOvHAABKCBTWlopIyPP5caNfnn06KleOzpOyc2bA9Lff0cuXrwsz569lH37mmVo6L6cPXteiXL16nVX/4k%2bP3PmvBIATkgnAjDwQgfM6CN9ZoK8MUc8GUCH4YIHDx7Jxo1b5LbD5sx0V1e3e%2bmKcseOHbvl1q3b0tzcKpccfu/qOifnz/foxgkCnXO7uWPHOtxyyUkrDjDWz8rKk2XL6p0GqJMlbvsNUUpKIqMywChlgowXyt3GyNa8Pcfaw5Vn1APqki8D1zvWSkcZYH1CTjF444AxBEi8UjlReto6smc05L/6309HIliKI8B0djpdtUBiGpcAqQYxmXLjlKnk04oAgcDUZtnkw2QE31SE43QSJllbSWUA6xrhZ/ep1rpfKCL1uQcs8cwvRO0dE64IIa5Wj6shTvuOyZjpXpJcDejFEcAezJuXKQcPtsjRo8dlwYIsiURqtTMVFZ60B/QwqA0bGlWf8qy%2bvkFxwGefLVIVWVe3IgYy1q7doOqTgYEqgZ3kQZzkt23bpXVQwdSprKzVfoTDpWNg%2bHQQgbaZJCZhjBYwijx%2bPKJGUKy2ly/3Sm9vnw6WQQKMqHfixGnp7r6oAwIFvnnzTjHAy5evZPv2z2Vg4K5alMEQDx8%2bluPHTyi67Om5KoODw%2b79Lm0Tgu3cuUfbBWvwTd4BeFVW1sQ4cLrWe3FxhaLbQ4cO6yTQfqlBYTD/5s3b5MqVawpnMYh6A3iigz937qLcuTMk69dvVgK8fv1GCbR0ab0b4Emte%2bRIuwNGlxQtAozq6lbKixdfaT3aAUBBKPIQgDqnTp1VFDky8kI5AqJA9OLi8hgXTFeCewFzcDD3cUDIYCHEgP07O0/r7Gza1KQDDIWKZeXKtcquFRU1yvqwLOzK0pg3b7FSmEFDlPLyKgVIJADTihWr9b0qtweHCLTLMqitXe7Q2SrXkQpZt26Tgim%2bM93sb20B09m8xS0Be%2bgHMrAHFckbeuJK3p4ZnCRBGN6HslbfhJy9awKWMttBWn3KWJ/%2b786EJkgqBFN9KFFl%2bfOJz5Kpxam2lXidbnwwIRIcT2fOBEqca8SYlANsG5vYuVQdN7bivR%2b6A5xJgowLhPwyACHhBzp%2bNvXLCH/inQULlsTW8ngIMBlqnCmWT0aAlDLA9CR7/DVr1qsmQECZMCO/fPlqlehZWQEtN%2bHW3n5CVRsqElxAuYf0CmKID8HGeyY8veuogJxu9JcKCSJo%2bXYcAaAInUAd3b17z%2bGBrWrtARECXrCgYCQ5ffqcqsTm5sMOTByRCxd6FAyBE1Bfg4P3VH1SD8QH6Ni16wuXP6uWok2btsrJk12qBq1trpjSMLkZBJ%2b59V6pqh1zHio4BoQM0wNhDx8%2bJu/efXBg5oXOKgNqaNioZTx78%2ba9EuP%2b/UcKWmgAJAfRsCIBpBjgq1dv5MCBFgeOjimhrl7tU3CFxQkiY0WCSBAT4DSTg/cTAW7F0hUDQqUJS6Cl5YhyQmPjNmXpmpplumYALoAbiMGsrl69XlEV70FVOKOmZrmanHgXjM/MYkQF4vIu7ZWVRbQ%2by4xZ2LJlu9oYAVIzZVH2LwHklW3exghBKMKGCOrYWrEdmu30KKMRlgzw2YQgmyEDOnyAesgN6s2fnxl71wRtZmae1gVFmhl%2bNqxBEwIhU2f%2bionS25LNmN0nPvfX87fh/4ZtnWcDF0waCM2FjW4uQNG4HPAx2PSmjQB%2bFrR16984TJQ%2bFiOojSklBzD7e/bsUwmNwcAEHgLQBB/3JJCf3SczdKarSdwDZHnx22EyPEBlYZxAvWGVQZ21th5VQ0Vra5uqP1QYag0gtHfvAc1Pt%2bFiJj1DqO%2blS1cqKh3jGYIDADuAHCw7uL06Ok7KN998qwMF0b19%2b0EtQ1h0Xr9%2bq%2batj2EJMEmoXCxbgCGzX5SWJliEGOSOHXsULbEc2tqOq50PYyfEwb4Hl0CclpajCmSm03Y3k1zAoM0gYwQoKU0AQiwFfzJANApgcpUgbHoM4KS7DEiGM3JzU6jBVJLe/8wzLeeltB2kMxF%2bEBBKJNLHov4m7RpLZQlKNCYmspQRw69nzb02k%2ba1acUBiQMjfsaP39ngIAMSARJR4KZXTZ1iCKHMXz5blp%2bJ2N%2bzTgcn5gDs%2bba7M8HH3t7M5AaK2EIjEG3319S0Q0HU8uWrFFcYsqQt6s%2bk5WcyvgGsWhhvzJw/hgBeBEipnDlz2am9E7Jx4zYHHtZJd/clJQogCfWHmsTFRKgMoAmwhJrEw4PVB/caKvSLL/ZrXbxGgCoIORvGj1RcQD/wbDEZlKUgQJlcuNAnt28/klOnLuoMA3zw6nC9cOGy%2bvwYKIMHNOH6woKEGQyghHurra1Dy7EEAUCGhx/q%2b3PBAWbxAtvg%2bjPnS9IlwFqtrKzTcNKKilqdMWYOCAwxMGUBJ7H%2bsG%2bAMNj8QJAsAa/hCjWT4W88c6Zbj8tQH%2bA0F5jBvkf/sHKZsTalEDSrr6E8z/TtrWc2QibkyENNYCZ%2bQbO1GagCLGH6Mouwsd5sckGiVThpkNREXiG/8yMYHAuUzM%2bXaEXiHRN8c4kfEtX0lHDARFacZHhgMvWnghOmw3o0KZOYfzBz6dJKxilTDdyaaFzjAiHPWxOMiwC3eB5/zI%2bxty0Bf1yhuccNB3iu8mBcjJC9m5inLVs%2b9o4RxR%2bHNBlc4R%2bXGUTG5QA%2bvHr1BhVsVEL/o%2b5QcYAcnoMVEG6AChwlFhOEdrA27Dn%2bAU9z1KsaskgNgiMgDOqJb9E2KJJ%2b8By1iuEFfwL11qzZINXVS7Vdi2znfjJC1dY/Pgg015hQ2VF9yYDL5fr1QenrG3Lqq0sjQdD7eIDw6uD9wa2FBwj7AGEuxAz19PRqOfFB2Au4Hxi4oxgAxwkuNPCBF4Ddr%2b9DHNolrgiMwHOITSzRj370WQxg4V0Cb3CSlXgj%2bkDC%2bzRRbLLtYCEg9g6%2bH1ODpUmAEFQFBXZ19Uhzc7s6RBkUIS58HAcq5jHO%2beIOgwjECKHvARkGiOgcnQYNNjXtlAcPHjtUeED9jpcuXdVk8UKHD7fpQAnS4op/8ejRdnWdnTx5Rt1wJAgBsqQMwtOWRX2NJwOYccZBH801xqGP5AESEMLWcDT8BaJAaYvzsVihcpc4eVVdvUyKHfjhI5zFgfVZJiSewbL5%2bcWax/XmHVepVqcoS6woerCSa7UDKvShoWGT7jWYJdqgHnk7hxiJ1MVw/bgCkGtU7/NunsqSkI7Nswg5tk9MeTQaTeRzsh14yHMAKStXsjJztIx7UvaSPC3j6j33ynknhw1VZvQ%2bmjIXZ8fez2L3uMSrxzNri%2beLFmZp3t8%2byd9uNgIt2seJUp6bcd6ze9oqcQTNyAtXyNhUGZcChZVaztW7r4zdp0zhJPfhJM%2bS1Pfaj0zcbrRfk00B33hyCsqlNLJcMsLNN2SiVBhN4T%2bY1CcFzTclcvCKZBQevitx6chdKTo6KMVtQ1LsruSDhwakoOW2luvzI4NxiTIr1/toO2PanssU7WM4mg%2b5vkZa%2bxwHtN4WS4XRa%2b7%2bG5K597pk73OUcoOvP/tUak8%2bkJx9NyS/uV8CB29F003JcynYfEvyD/VL3oGbEmoZiLWTbol%2bFh25o/0LOSJEWq7DAa4gmvLdYKs778uv/%2bU/pP/rv5Y9/e9leddjef7Lf5LV3SPSeOUrJQbXjT0v9bru4nNpHvxaOp587%2b5fSFXHfY8IvnbnOjFoJqft4Xey9vwznbxwIgGoFHAUYoD2%2b%2b//%2bV%2bpaL8nxx//TJ45Ijz/5T/Lkz/7Rzk09I1cfPUX0vvuV1o%2b9N3fyelnv5C7P/1bJVqu%2b5hSOk0IEHRcy0TSdyZKCcASSOQAZo4BD3//9/L6r34j/d/8WiIdw3Ji5Ody4umfSuvwn8ieW%2b/lyP1vZe/AByUWVN127Sdy4O4fy%2bHhb2X3rXdpR4CQk19lx4a0/9uv/0SXcYwA4dYBsVToUqilXxbtvirzd12RxXt6Nc%2bayXHygDoFjkvCLV69/Ni9S04G8DzoZILKgJbRduc62bjynGwLaP/cOFwfI4euOQ5oG5a4dOy%2blBx/IKXHH%2bqVPOXF7d61iHw0%2be%2btXlH0mnbJ9YsxWP9Cxx5I5Ei/ZBRsapVPLm1ulaC7VjS1OijsIKGmbAcrs6P3KdJEzz%2bWxDiyM7OlpKgsuhnCrocxNDtf7zlfHwh4Z%2b0DvuRtjnzPAqNn8gOx88Lh9E2B0eRthqpGI0XZ8bFDY9cUswBHT1h4Ft0cDTc1q/ColTgrFkqTjt5idn6jlqd8n1XLFyJD57Ho4OxgsIS/rFy5Ri0zHGUhQpR9PbZ/ztxwBAYrD3WwDVCPaNLpPu01nY4RtuK6vXaTaLHCsf8PgACYnnAdccXwgAEDAwiWHDw8WHz4Fyiz2GDlefv2vb6DJYd6NJ6OMUPmGcKKZGE9cf8fAEtjdBgaGlafHqYjLC5YcvAI4fMj4Hnv3v062/jX4BYcptj6KMO8Var/GxZMy%2bAIZrzICT1mP84zlOr/P8zKS2XMWywBKzPL6uLFuTFqYr1N19Pjo4dC8mMW5pSHppJ13gThZM4Cp3us0LihspOJsv6DPD4/kTtrskflP/pY4WT%2bvmSsbrJhMkfkx%2bOc2fYQj8sBftfTqDs5J%2bbqNuFHOeZoJD5ubws%2bNAFpp0Lt1CiC0n%2bi1H%2bCdDbPCSRy7phYYf4XCHUHJiCqg2AIYmqwpfOMYy%2boSvQpUSA4KrDrU6b%2bgEidXqmLHwDQQZ427DgNvgQSeQ5IT2TTn%2b7/ETI/Y9z/CNmpMQKbGDjeHkAQwAbQQBkeFQZ87dpNHRSnwu2vc%2bywlHfK/EKsDGyASw3vD64zECNhttwTLrN%2bfaNyx2ycTzCnCJ4qAFxcrLCfAw4ebFUYjBORAChcUAyUWSYPAGLmvP8M6oz5CRms%2bfdwj/F/AJcvX1O/H9FinD6jXXyLOEh5H8cn%2b4iZ/tMlf7Q4J9PhvqT/I2QRHRycsnsco/5oD9a%2bX7DB6lDR8DV5/nHC%2b%2beJGs3bfw3BORzDt/pEmsy2EITTx5wXSNQCdhjKYoX86DAx7/nvAzFoaXnTFH6fv%2bVZh3Pxn0PeJE8RB8yFeprTWOFPKf0/AaIE%2bD86HJXOSaI2zgAAAABJRU5ErkJggg==' /%3e%3c/svg%3e\" width=\"460\" alt=\"secrets storage\" data-srcset=\"/assets/static/storage-secrets.8041d15.6d57d9ae0109ddbe6b577773aa734f3b.png 460w\" data-sizes=\"(max-width: 460px) 100vw, 460px\" data-src=\"/assets/static/storage-secrets.8041d15.6d57d9ae0109ddbe6b577773aa734f3b.png\"><noscript><img class=\"g-image g-image--lazy g-image--loaded\" src=\"/assets/static/storage-secrets.8041d15.6d57d9ae0109ddbe6b577773aa734f3b.png\" width=\"460\" alt=\"secrets storage\"></noscript></p>\n<p>Once here we need to create an Opaque Secret for our S3 bucket. So, we click create, then select Opaque. From here name this something like storj-s3 or s3-storj or whatever you'd like. Just make sure it is all lowercase and no spaces. We need to create a few key value pairs. They are honestly pretty simple. </p>\n<ol>\n<li>AWS_ACCESS_KEY_ID</li>\n<li>AWS_SECRET_ACCESS_KEY</li>\n<li>AWS_ENDPOINTS</li>\n</ol>\n<p>We just put the corresponding value from storj.io s3 credentials we generated and click save. Once saved go back to All Namespaces up top and then click Longhorn on the left. We then need to go to our Longhorn General Settings page and scroll down to backups. Here we need to input our s3 backup target and our secret we just created. The backup target goes like this:</p>\n<pre class=\"shiki\" style=\"background-color: #ffffff\"><code><span class=\"line\"><span style=\"color: #24292EFF\">s3://</span><span style=\"color: #D32F2F\">&lt;</span><span style=\"color: #24292EFF\">bucket</span><span style=\"color: #D32F2F\">&gt;</span><span style=\"color: #24292EFF\">@region/</span></span></code></pre>\n<p>It will look something like mine</p>\n<p><img class=\"g-image g-image--lazy g-image--loading\" src=\"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 2014 510' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-a57bb538ce705b8e9a883771eb6f47dd'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-a57bb538ce705b8e9a883771eb6f47dd)' width='2014' height='510' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAQCAYAAACm53kpAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB/klEQVR42t1XW6%2bCMAz2//8%2bjUYxXqLAuIieKLAB9vTrGF5yfPIBDktqu65bQq%2bfk6Zp6Ha7dVQUBV2vVyGtNWHd7/fR0qSua1qv1%2bR5Hs3nczoej7RcLmk6nVKWZTT2NYEXsJAJVVUJd1HHgoOMMaJ3fEwkDsCH%2b75PSina7/eSEeDIhu12S7vdjoIg6DJiVCWAH9Q96h3RhlecDIJzHG%2bYw955768Hn8/ebdh1L2eDyIC6biT6URRTnJ7olJ3JDxVFcSpynKQsJ3S%2b/FDC57ABV1EiZ4rvhSAVi02gIkpPmdxXfA%2b22IMHeJfvBGHEDq1fSq3XHmCjzZHnGkedl2Up3HDUy1JbmQmZobWRbJC96NgeemP1VZs5Ytf2D2MquVvgXbaBbdN%2b%2bCBKoK/Vd/QlA1AH6AF5nne9wMnIBHCLEfJOhh42iPR/b4qCA4ABVqsVzWYzOhwOtFgsREb3x0TAHueQgRE2m43IcMJQIvlVD/jUxR/d%2bzVln7HDaHAAoo25j3mPNB87BO5KAN0YNS0dvDIf5/s3hPnfZdKAMIDFAY3FAZjnSZpRdr6IDAwA7mY9sICb7bCBHpQ4XMB6YIAHjrAYwN0DFvCDUOye4fYgxqBDfY/ZrmV2W7J7N%2bt1x61t2Z45Mu2Ze6ts5z90eTtZ3nvJIP4M9YUB%2bs6AXwL0x5JURRrAAAAAAElFTkSuQmCC' /%3e%3c/svg%3e\" width=\"2014\" alt=\"longhorn backup\" data-srcset=\"/assets/static/longhorn-backup-config.82a2fbd.938d530bfe0c0b329085af8dcf567148.png 480w, /assets/static/longhorn-backup-config.cbab2cf.938d530bfe0c0b329085af8dcf567148.png 1024w, /assets/static/longhorn-backup-config.1857dc9.938d530bfe0c0b329085af8dcf567148.png 2014w\" data-sizes=\"(max-width: 2014px) 100vw, 2014px\" data-src=\"/assets/static/longhorn-backup-config.1857dc9.938d530bfe0c0b329085af8dcf567148.png\"><noscript><img class=\"g-image g-image--lazy g-image--loaded\" src=\"/assets/static/longhorn-backup-config.1857dc9.938d530bfe0c0b329085af8dcf567148.png\" width=\"2014\" alt=\"longhorn backup\"></noscript></p>\n<p>Click save and go to backup tab. It will take it a second or so to load and if all is well, we will have a blank list of backups!</p>\n<p>Alright, whew... That was A LOT. I think this is a great stopping point as we have everything configured and are finally ready to get some applications and services installed. </p>\n<h3 id=\"conclusion-and-optional-things\"><a href=\"#conclusion-and-optional-things\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Conclusion and optional things</h3>\n<p>Well, we accomplished a LOT!! We now have a fully HA cluster with cloud decentralized backups of our persistant data. That data is also replicated between all nodes in our cluster. There are a few other things to consider before moving on to installing apps. The HA embedded db snapshots can be backed up to the cloud also. We can create another bucket for those in storj or use another system if we want. If you want to go ahead and create some here's what you do...</p>\n<pre class=\"shiki\" style=\"background-color: #ffffff\"><code><span class=\"line\"><span style=\"color: #24292EFF\">sudo k3s etcd-snapshot \\</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">  --s3 \\</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">  --s3-bucket=</span><span style=\"color: #D32F2F\">&lt;</span><span style=\"color: #24292EFF\">S3-BUCKET-NAME</span><span style=\"color: #D32F2F\">&gt;</span><span style=\"color: #24292EFF\"> \\</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">  --s3-access-key=</span><span style=\"color: #D32F2F\">&lt;</span><span style=\"color: #24292EFF\">S3-ACCESS-KEY</span><span style=\"color: #D32F2F\">&gt;</span><span style=\"color: #24292EFF\"> \\</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">  --s3-secret-key=</span><span style=\"color: #D32F2F\">&lt;</span><span style=\"color: #24292EFF\">S3-SECRET-KEY</span><span style=\"color: #D32F2F\">&gt;</span><span style=\"color: #24292EFF\"> \\</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">  --s3-region=</span><span style=\"color: #D32F2F\">&lt;</span><span style=\"color: #24292EFF\">S3-REGION</span><span style=\"color: #D32F2F\">&gt;</span><span style=\"color: #24292EFF\"> \\</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">  --s3-endpoint=</span><span style=\"color: #D32F2F\">&lt;</span><span style=\"color: #24292EFF\">S3-ENDPOINT</span><span style=\"color: #D32F2F\">&gt;</span></span></code></pre>\n<p>If we need to restore from one of these:</p>\n<pre class=\"shiki\" style=\"background-color: #ffffff\"><code><span class=\"line\"><span style=\"color: #24292EFF\">sudo k3s server \\</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">  --cluster-init \\</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">  --cluster-reset \\</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">  --etcd-s3 \\</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">  --cluster-reset-restore-path=</span><span style=\"color: #D32F2F\">&lt;</span><span style=\"color: #24292EFF\">SNAPSHOT-NAME</span><span style=\"color: #D32F2F\">&gt;</span><span style=\"color: #24292EFF\"> \\</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">  --etcd-s3-bucket=</span><span style=\"color: #D32F2F\">&lt;</span><span style=\"color: #24292EFF\">S3-BUCKET-NAME</span><span style=\"color: #D32F2F\">&gt;</span><span style=\"color: #24292EFF\"> \\</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">  --etcd-s3-access-key=</span><span style=\"color: #D32F2F\">&lt;</span><span style=\"color: #24292EFF\">S3-ACCESS-KEY</span><span style=\"color: #D32F2F\">&gt;</span><span style=\"color: #24292EFF\"> \\</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">  --etcd-s3-secret-key=</span><span style=\"color: #D32F2F\">&lt;</span><span style=\"color: #24292EFF\">S3-SECRET-KEY</span><span style=\"color: #D32F2F\">&gt;</span><span style=\"color: #24292EFF\"> \\</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">  --etcd-s3-region=</span><span style=\"color: #D32F2F\">&lt;</span><span style=\"color: #24292EFF\">S3-REGION</span><span style=\"color: #D32F2F\">&gt;</span><span style=\"color: #24292EFF\"> \\</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">  --etcd-s3-endpoint=</span><span style=\"color: #D32F2F\">&lt;</span><span style=\"color: #24292EFF\">S3-ENDPOINT</span><span style=\"color: #D32F2F\">&gt;</span></span></code></pre>\n<p>If we want to delete a specific snapshot:</p>\n<pre class=\"shiki\" style=\"background-color: #ffffff\"><code><span class=\"line\"><span style=\"color: #24292EFF\">sudo k3s etcd-snapshot delete          \\</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">  --s3                            \\</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">  --s3-bucket=</span><span style=\"color: #D32F2F\">&lt;</span><span style=\"color: #24292EFF\">S3-BUCKET-NAME</span><span style=\"color: #D32F2F\">&gt;</span><span style=\"color: #24292EFF\">    \\</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">  --s3-access-key=</span><span style=\"color: #D32F2F\">&lt;</span><span style=\"color: #24292EFF\">S3-ACCESS-KEY</span><span style=\"color: #D32F2F\">&gt;</span><span style=\"color: #24292EFF\"> \\</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">  --s3-secret-key=</span><span style=\"color: #D32F2F\">&lt;</span><span style=\"color: #24292EFF\">S3-SECRET-KEY</span><span style=\"color: #D32F2F\">&gt;</span><span style=\"color: #24292EFF\"> \\</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">  --s3-region=</span><span style=\"color: #D32F2F\">&lt;</span><span style=\"color: #24292EFF\">S3-REGION</span><span style=\"color: #D32F2F\">&gt;</span><span style=\"color: #24292EFF\"> \\</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">  --s3-endpoint=</span><span style=\"color: #D32F2F\">&lt;</span><span style=\"color: #24292EFF\">S3-ENDPOINT</span><span style=\"color: #D32F2F\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">  </span><span style=\"color: #D32F2F\">&lt;</span><span style=\"color: #24292EFF\">SNAPSHOT-NAME</span><span style=\"color: #D32F2F\">&gt;</span></span></code></pre>\n<p>Finally, if we want to prune our snapshots and only keep a certain amount:</p>\n<pre class=\"shiki\" style=\"background-color: #ffffff\"><code><span class=\"line\"><span style=\"color: #24292EFF\">sudo k3s etcd-snapshot prune --snapshot-retention 10</span></span></code></pre>\n<p>We covered a LOT during this part and I hope it wasn't a dive into the deep end without knowing how to swim kind of thing. If there are any questions please don't hesitate to ask and as always, happy hacking!!</p>\n<p>References:</p>\n<ul>\n<li><a href=\"https://rancher.com/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://rancher.com/</a></li>\n<li><a href=\"https://rancher.com/docs/rancher/v2.5/en/installation/install-rancher-on-k8s/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://rancher.com/docs/rancher/v2.5/en/installation/install-rancher-on-k8s/</a></li>\n<li><a href=\"https://rancher.com/docs/k3s/latest/en/installation/kube-dashboard/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://rancher.com/docs/k3s/latest/en/installation/kube-dashboard/</a></li>\n<li><a href=\"https://rancher.com/docs/k3s/latest/en/backup-restore/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://rancher.com/docs/k3s/latest/en/backup-restore/</a></li>\n<li><a href=\"https://longhorn.io/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://longhorn.io/</a></li>\n<li><a href=\"https://rancher.com/products/longhorn\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://rancher.com/products/longhorn</a></li>\n<li><a href=\"https://metallb.org/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://metallb.org/</a></li>\n<li><a href=\"https://cert-manager.io/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://cert-manager.io/</a></li>\n<li><a href=\"https://storj.io\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://storj.io</a></li>\n</ul>\n","excerpt":"If you're here you already finished part 1 and are ready to get into using your cluster! The goal for this part is to get all the remaining tools setup that we need before we start deploying","description":"k3s cluster on raspberry pis for homelab part 2","timeToRead":14,"author":{"id":"b34rd","title":"b34rd","path":"/author/b34rd/"}}}]}}},"context":{}}