{"hash":"7eea66335e3101fb2bdf96a4df7b72a3d5630259","data":{"post":{"title":"K3S HA Homelab on Raspberry Pi Cluster Pt1","path":"/k3-s-ha-homelab-on-raspberry-pi-cluster-pt1/","slug":"k3s-homelab-pi-pt1","datetime":"2021-10-28 00:00:00","content":"<p>Let's setup K3S HA Kubernetes on Raspberry Pi Cluster for your Homelab! It sounds intense but really, it's pretty awesome!</p>\n<p><img class=\"g-image g-image--lazy g-image--loading\" src=\"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 1204 625' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-b2aeda43cdddafd736499118c21a574f'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-b2aeda43cdddafd736499118c21a574f)' width='1204' height='625' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAhCAYAAABpwa0hAAAACXBIWXMAAAsTAAALEwEAmpwYAAAGTUlEQVR42t1Za2wUVRQGkRYo2NI33T623Tmzy6sFChXKqy2FECwgEqMW4YeGCoboD7FKy8NuC9TyCPGBwRgTIoECUYkUpSCKAQ2iIQWVQqLII0FaUGih0ALh89y5u93ZdunObvuD7Y%2bT6c6cOzPfd797znenPZIsKvwLQmKKihQixJhUjEgnnDhGuHdTwa1rhKZ/Cbf/ezTj5lUFuEP44aCCHl0F/uQvBLQofHPxEMUR3ZIAd/Bpowg1DvCN9RK8mP1uqADyOPOBBt5PAnTgVRf4U78GHng/CPAMXlvzzYEH3kcC2oCPd6z544E58z4S0H7muwN4gwR4lr0GvjmwwRsmwNuadxIgfnsL4Q18zRVHr/lXnROg%2bDQRXggwDv5uA9/onpe4Lx6m4M51A7kiWhy5LQZy78pcJwldQIAHk%2bNhzQurKyxv7UnC6lLCuncJ6yusqCin1ljP5zZUEMrshMpthH/Ok/v1ChkiR4wXsaaM8PFHhLqLhM0fENauduZasWGdjY827biBf5evIWzaKO/bcsO4AqS6JAGHD7gR4MHkPKTgCXmK81V7CH0GqIiIURDc34SwKAXhMSqiBlnRL8yK/gMJQf1VzHmGNLIi%2bNrAaHFd1cY93ldFL46QMBXR/My%2bT6gYM5bw5x%2bEYSNIGx8dZ0O/0ET06hPD%2bbHasc8AE0Ij5XufriHcvyX3H0bACxyCgAe3CT8dbiWgPfiOTI5GAC%2bJ6n3iBRUMTR2O5/LzMWR4Kt9DYYCJmDbdjLxZKpNCmL%2bAcPY34mWlItnxDEFKQQFh8WJCTq5ssaYkVfv7XC0hcwIhIdnKuXGYnpeHJa%2b/hoJFi/DqkiV44cV5/L6E4UzS2VNMwE3vBLiWiYKGOlbAA8L2rRoBvoHXE3Bgn4onIpIwOWcKmpqakJU7DeHRJqSPfQq7KyewfJPRO0TF/PmSAEG2mZ83ZSqhukqqQgD4ZAth3HjSVJCVQ/iLCRibqSI2gTCJ771j5y6cv3ABp0/X4uKlS9hfXY24RAVDUglnDBCgBy8wifrxzV6CYmUC2vV5A96%2bLQETs7Jxpa6OX3YqkpUoHDxYheWr7AiLjGKFDEb%2bPEmAeJZQwNHvSVOAbaicxfK1PBufEd9LRfYUqYBx4608PgHfHjqEsjXlSB05GhOycjBidAYrw4J4s8rK806AJ/BCuWaFFcck9vDH5LQjIDsb9fX1yJyUi71fxuOtwgzEJ6cxWAURsaok4JRUgJDuqDGkAdiymdB8g/DhewSLlWc83l0BcYkqaPAQbN9RicbGRjRwfP7FHh0BaocEeAK/f68AT9pyS1aYAG8Fz3Mbaa%2bAurp6TQGqLYpnrQrFK%2bwIjWAFmDwo4DvCzNlSAYJ4UdG3bXUpQBDwZCZhEBMQY0rggjiKl9lUpKVnoPDtIhw5ehSDEixccx6ugI7BE78H174UJmDkaNfHDKMOz1MNuH79Bh9zWbYmlupcrgE5KLWbERRida8BigT/9VeE4z8Sjh2RLW9ytiioLgWIJRAenYTKnTtRe%2bYMjv18HDU1J1G5azdmzJzVoQL05sjjzJOcDI0AreD5aG9dBIiXtvD6TMPCVwowLC2N64kFkdwFZs42Y%2b6zsgssaO0C1NoFxLmlbxAKCwkz8hxdwOzqAuMnqjzLKXhp4cuspuVYWvgmlhUX4fl5%2bbxUTBqZqSPVdl3AGHgOi4MAMdj5Gcuot9f7gCCu8gO5//fuF8eSVxgw%2b4JYK/d09gKhxOdVPD1HVnzhAcIiVa0uiHGPBavoGSz7fyR7g2D2BukZ0geIAif8QVCICT2Dojk3lo8x7DfiebwNA8JFmyQ3H/Dwgtdm5i06AiRzvm1sxBhB3O8nCMVFBHuJcHw2lLxDKFklo7REusCiZYStnxIu/02u63wstcvrIkSunc%2btKCa8v4lw5QJh43rCyuXiuhVlpTbt/iJKS6za%2bFUr2Sly7bh8jp1gg%2bK94OnAJ%2bkV4M9mwpkvHqx5di/x4LbO33sL576h2UBuc9u9gAHwGnAdAf5sJ/WkieXgLZzyNJKr3w0azfUJfFcT8CiEkTXvtunrLAGPQvg1892FgE6BD3QCOg0%2bkAnQf/nxG3ygEuCLyfH6v45AI6BLZB/YCnB4jmtdAD5QFaDZb/b8YhfZKfBtCPgfuMTy8ZaB8aIAAAAASUVORK5CYII=' /%3e%3c/svg%3e\" width=\"1204\" alt=\"alt text\" data-srcset=\"/assets/static/k3s-cover.82a2fbd.cb1388a99569702c785a8a15490f5774.png 480w, /assets/static/k3s-cover.940ff3d.cb1388a99569702c785a8a15490f5774.png 1204w\" data-sizes=\"(max-width: 1204px) 100vw, 1204px\" data-src=\"/assets/static/k3s-cover.940ff3d.cb1388a99569702c785a8a15490f5774.png\"><noscript><img class=\"g-image g-image--lazy g-image--loaded\" src=\"/assets/static/k3s-cover.940ff3d.cb1388a99569702c785a8a15490f5774.png\" width=\"1204\" alt=\"alt text\"></noscript></p>\n<h3 id=\"what-is-k3s-and-why-use-it\"><a href=\"#what-is-k3s-and-why-use-it\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>What is k3s and why use it?</h3>\n<p>There are a few diferent versions of Kubernetes that we can choose from. There's k8s, minik8s, k3s, etc. Why k3s? </p>\n<p>K3s is a highly available, certified Kubernetes distribution designed for production workloads in unattended, resource-constrained, remote locations or inside IoT appliances. K3s is packaged as a single &#x3C;50MB binary that reduces the dependencies and steps needed to install, run and auto-update a production Kubernetes cluster. Both ARM64 and ARMv7 are supported with binaries and multiarch images available for both. K3s works great from something as small as a Raspberry Pi to an AWS a1.4xlarge 32GiB server.</p>\n<p><img src=\"https://k3s.io/img/how-it-works-k3s-revised.svg\" alt=\"alt text\" title=\"How k3s works\"></p>\n<h3 id=\"why-k3s-over-docker-docker-swarm-virtualization-or-just-bare-metal\"><a href=\"#why-k3s-over-docker-docker-swarm-virtualization-or-just-bare-metal\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Why k3s over docker, docker-swarm, virtualization, or just bare metal?</h3>\n<p>Well, these are all great questions and honestly each application, server, and use needs to be considered to answer that question fully. For a homelab, home network, or even a small business k3s on a raspberry pi cluster can more than adequately serve your internal and even some of your external needs without any trouble. If  you are like me and are constantly tinkering or improvoing, k3s will be a HUGE help as the redundancy after a breaking configuration change will save you time and complaining kids/co-workers. In the examples I'm giving during these guides, kubernetes and k3s are perfect for the use cases and workloads. </p>\n<p>The key differences between all of these is how you want to implement and provide services. I like load balancing, automations, redundancies, and a comprehensive management plane. That's why k3s is my choice. Also, docker is super awesome so why not take it to the extreme?</p>\n<p><img src=\"https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fblog.docker.com%2Fwp-content%2Fuploads%2Fswarm_kubernetes.png&#x26;f=1&#x26;nofb=1\" alt=\"docker swarm vs k3s\"></p>\n<h3 id=\"lets-get-our-pis-ready\"><a href=\"#lets-get-our-pis-ready\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Lets get our Pis ready!</h3>\n<p>Ready to begin, awesome! Here's the items we need to get together:</p>\n<ul>\n<li>3 or more Raspberry Pi 4s</li>\n<li>Network access for these devices</li>\n<li>SD Cards or USB SSD (highly recommend SSD option)</li>\n<li>A workstation to image from and manage your cluster from</li>\n</ul>\n<p><img src=\"https://res.cloudinary.com/practicaldev/image/fetch/s--R_6GjYc2--/c_imagga_scale,f_auto,fl_progressive,h_500,q_auto,w_1000/https://thepracticaldev.s3.amazonaws.com/i/4u997yxv9f60ubx951nd.jpg\" alt=\"Rasbperry pi cluster\"></p>\n<p>I'm using 6 Raspberry Pi 4s. I have an UCTRONICS rack for 4 that will be wall mounted and two in metal cases that will also be wall mounted. They are all powered via POE hats from UCTRONICS also.</p>\n<p>Now that we've gathered up all of our hardware let's think for a moment how we are going to set this up. Firstly, we need at minimum 3 Raspberry Pi 4s because we are building an HA cluster on the embedded etcd datastore. You can use less if you want to spin up another server for mariaDB, PostgreSQL, or another datastore option. I'm trying to keep everything on the cluster and what isn't we can easily share between workstations. For the etcd embedded datastore Rancher recommends an odd number of master nodes in the cluster. I've tested this with two and it just doesn't function correctly so please, use 3, 5, 7, 9 or whatever odd number of them you'd prefer. You can actually just start with one and add another master later if you only have two Raspberry Pis. Now, how are we connecting them? You can use wifi or ethernet if you want. The important thing is to ensure you have static IP addresses assigned and ssh enabled. We also need to use a 64 bit OS. You can use Ubuntu Server or Raspbian 64. There are slight configuration differences between the two and for this guide I will be using Raspbian 64bit. So, let's go grab that...</p>\n<p><a href=\"https://downloads.raspberrypi.org/raspios_arm64/images/raspios_arm64-2020-05-28/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://downloads.raspberrypi.org/raspios_arm64/images/raspios_arm64-2020-05-28/</a></p>\n<p>This is the latest image as of writing. You can check in the images folder to see if there is a newer version also if you choose. This version is the Lite version of the 64 bit OS. Once downloaded extract the zip and then we will go into Raspberry Pi Imager. This is super easy because we can image our SD cards or USB drives with ssh enabled, our public keys, and wifi. We will still need to mount the drive after imaging to setup static IP address, hostname, and some cmdline options.</p>\n<p><img src=\"https://assets.raspberrypi.com/static/md-bfd602be71b2c1099b91877aed3b41f0.png\" alt=\"Rasbperry Pi Imager\"></p>\n<p>Under Operating System we will select Custom OS and then select the image we downloaded. Then select your SD Card or your USB drive. Before clicking write press [CTRL] + [Shift] + [X]. This will display the advanced menu. Here we can enable ssh, select our public key, enable wifi (if using it), set TZ, and make a few other changes. We can also check the box to make this the default for all images going forward. Once we are happy with everything click save, then click write.</p>\n<p><img class=\"g-image g-image--lazy g-image--loading\" src=\"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 1400 950' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-6fe4e1c58f76cf606a5cca1b63d4dfc8'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-6fe4e1c58f76cf606a5cca1b63d4dfc8)' width='1400' height='950' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAArCAYAAADIWo5HAAAACXBIWXMAAAsTAAALEwEAmpwYAAAKuUlEQVR42tVZa1CU1xnemU47baPSyWhtYtAfndW2CmoQ0NAqeGm5CKJ0aEpanUmMSlOlVTppZ%2bpEazCdtL/6IzXNRG0dO2ljsIm3AFJhuQSQm9xUBOS2XASW28Iuu9%2bet%2b9zdj/8WFBkL2m7M%2b%2bc73K%2b857nOe95L2d1QUFBAaGhocfCwsJOsmT4UsLDwzNCQkIyVq5cmREcHJzBujJWrVolW9yr1%2bpzPFu9erW8R7tu3TqfzAPjYOz1PJ%2bgtaEZS/SrT64OCTsW/vyqAB0rW8ETJX8IE0ubNm2ixMREio6Opvj4eCkxMTEUGxtLu3btou3bt8t7tOizbds2iouLk21ERAQxAI/141sIxomJ/gGtCQmjH0eH08Vfb6a4yFAKWBa8Qrd8%2bXI9s21nUTSt17JmzRqFV1WJjIxUDh48qKSnpyuHDx9WUlNTlQMHDih79uxRkpOTlX379ilpaWnK8ePHld27dytJSUnK/v37lb179yobNmxQeIHkWHPRy6utMAEKk6iw9cnrHQnxyjdXrFJS40Ps/e8lKEmRQXbdgm/pdVFRUXpeCYHVcLVSdu7cKYVXz2PB9zt27BC8oiIhIUHw6gteedlC8JxXXl6jv3qttvjWW/0qBoyn4noxKZ4Sd%2b4SWzZH6XW5ubn6kZERYTabaXR0VAwPD9Pg4CANDAxQX18f9fb2Uk9Pj1eijvHgwQMp2ufqvVYPrr3Vq%2boCBmAZGhoiYAPGkdExAmZg1xUUFOgnJiaE3W4ntBaLBZ3QgcbHx30mGBdjQliPFKvVyrrMZLPZpE71mS/0mUwmMpvH5DV0YnzMARgVF1Zg1%2bXn5%2bv5hYBy7izQsb%2b/X8rY2JjXAsuCWC3jdPnSJ3T6zBk6d%2b4cXbhwgc6ePUOXL1%2bmv58/T6fff18%2bz8n9N383zuL8bm76VF0WysnOpr7%2bAQlaxQNswAiswAzsOoPBoGfWJwkAWzC/7u7uyRXzhcD8YI7dbJ6dnZ1kNBqlQFdLSwt1dTnvYb7e6xt2mj3rxD2wQI/LqoXL0gSwTyGAWRTYK5hIV1fXpEmqrTeCMWDq2GpawTOHwzHlma904RotsAATsAHjrAR0dHTIlfDXTwgxrVWv/fGDBQDTExGACNDe3i4/wk9lFKukKAq3imyfRPDN5y0gUl19XMMHADwE2DwiAAP%2bP/3UbYR5V1VVUUNDg9wCHhEABrGacGKtra00NGiS8XVwcIhM7Gikc2HvCg8Lx6M6ItxrzfvzEpUA1W9duXKFKisrJR6PCXDwwA8YaHtrG/X19khGb94sp6KiIiopKaE7d%2b5QTU0NVTLbt6qr6WZZGdU33J6VgNn8wVz9gjsBkGwOh7ACjwkAixhQEQ7qNw%2bT1YfbQQsQ1%2boe9hUBmHtWVpb3BNh4QJpgae%2bX7ZNMC4kJrEfNAnGPPYl76MC2elwE8CQq%2bIcAzsoYOtmKblPvmjSyflxCtS2NbOblcivU19VJBdXVbP63qqm8vILsDK65uZkKDHm8RUqJU07Ky8%2bn4uJiKi27Kc0ShGgn3dR0j2pra%2bV%2btfDE/3e2AK8e1tzRwank25lkv9VCA2Mj7BMecFwddBYeyPC4PzI9OEhMAJOxOnPvyQQFlgArcE%2bIYPoDnKrCUyNLtGusw1sLuHr1qndOUG4BfudpKFLzCG0BpBWQgr7%2b2AIguqKigurr6z0Pg9Zxi9wCSqORhl//K9nYArpN/WTiQgN9UGQgFN5rapJh0JvJPypCeEKAmgihOAKeRydCXBFZUQ3yB2Nm80MCOH92EuDyAWWN1BfxOlkyi%2bi2sY3K5d4ulPu%2bicF/xuGwra3d49jvi5R4JgKQv7S1tVFHOxNgGpQYgRWYDbIaLCzQc2gTE/zRuNUihriS6jB2yqptShRQOBXuNpGwPj4MqqFMm5pqZfozh98JaOfV7%2bRqE9iAEViBGdh1eTnX9eODw8IyxNlbv0kMdPdSa2MTdTFjM6XC6vTwHCYPQL7OCXxJALLS1uYWarvHW7S7R2IEVmAGdt3p5xP1ZRv3irKNr1LJ914RhRtfoatBSVT5uz9P%2bgCVAOF4uHLw1igz4QfqXOELGSG2RFVVNVXL0FhNNfyusbGRSnmLlHGGiH4VLDXcr7S0jPuxh%2b7p9YsFODiajE5YqeTon%2bha8A%2bpgLEBI7ACM7Dr3nk6TH9j4VaRt2gr5S7cIrIXb6ULXwyhkp9nOFNh9gGTBGgmiNIS4OHFB7k%2bUM/xenudZ3qoExAe1fPFXt5SAyaTDJV4pp4H9vP9OI/hLwLM9gkq2HeMPvrSOgI2YARWYAZ23alnvqs3BMYKQ2Ac5QXGiOvLYikzIILKjvzhsQT464zAl1tAJaDwtROUueAFArYbjBFYgRnYdacWR%2bjzl/DD52LoxpJoScCHX1hLxa%2b%2b8UgC3L23M6xMyPTWmeTYJk97bLaHp0rqM1lbTPa1%2b6Ua1BJQ9LMTdHH%2bBsoJdGIEVmAG9ikE5DErWQujKOf7%2b%2bne1bzJTHAmC9Beo1JsbmmRpt7CKTCSDoSeTnhfnC5x1mhknzE0NCzfoVSGD2nvaGcvPeK38wCVgNzUY/TBvHC6PisBy%2bLEla9soJtv/YWGyCFDnzYKPKpk1YY99SRIeyL0sI%2bQz3Gtvsc1JozaAIWS2np69O5OwBgTcOXAUfrbU%2bsoNzD2yQgoe/MUDQkGzRN2J8C9hPWXP/D0SMw7ApbGimsBG%2bnGy7%2blttuNri0wMwET5U009u6nZO8fpub7zTLUqf/IdLBp19XVy3ucIiFcwvsjHUWoRKaJ1LmLtwOOxO/fvy9TaqPr3tsjOHcCslLfoPPzwpiAWbaAdIJLY%2bjDr4ZT8aGTj40C1vw6Gs34J010DdCdxjucC9TR3bt36V7jXarj4qOysoqBtXLJXC9zgWYGjKKkob7O2TbclqTV1jnvQU4zJywV5eU0yvm7Nyn1tCjATjDzSZwgXqJT5rz1VJr2%2b1nDoP8Osn3rBOdEADzlRyDgFzMTMJMTdD%2bWdr92d5QzHWVj0qjc4MxUvzPhKpfxT497GNX2U1uIDK9aAmxeEqC4Diwe5f3nXO3ZlSniYGEFcvI4FBl1/R%2bIbNH5l9qIzDS1f30hjJq4srNYnH98wn%2bo70DiZARCxGG9JYfeklbtEQFCA/6/nenNWafinDuwANN1jwhQHB4fULhbjd08Tt0fZJPx7CUynmE5e5k6T39Cfdkl04otn4ivCfB05VUrGr1vJMOibVS8LIFKvp1MJd9JJkNAFJVvPuB0qD6sNbwnIG0qAV6JhoDCZ2KoIvxlqok/QrWJ6fRZ4Haq2PoaOTQE%2bNwC0uZGgGCHIfgjIa3SZhc8kFfCjk6OZW7vFsWhPxWFQT8ShSuTRWHwi8Kg3ymqfnJUOABfUYTDS11T9PLcoRdYgAnYZiTAsCRGMTwX68jjNndprOPiU%2bsd5el/BH0%2bF7uiONjjO2yKnednl9cOP%2bjRCrAAE7DlubACsyTgncUvrOCHYAQWQDkslxZF0rX1L1Fh%2btuUc%2bgEZbF86gPJSjtB2YdPTpdfZvhk/Cm6WDB3YAAWYAI2YARWYAZ23cmvh87/17NbUj5%2bdutLF7m98I2olH8s2Zzy3pfXprypW5jyG93TKb/SfS0l3ScSkHJEN3%2bapOsW%2bGj8h4I5Y%2b7AACzABGwXXViBGdj/A4JBTda1LfuLAAAAAElFTkSuQmCC' /%3e%3c/svg%3e\" width=\"1400\" alt=\"Imager advanced options\" data-srcset=\"/assets/static/advanced-options.82a2fbd.4aba3f2dbe57ac9ead726006611265e9.png 480w, /assets/static/advanced-options.cbab2cf.4aba3f2dbe57ac9ead726006611265e9.png 1024w, /assets/static/advanced-options.be54052.4aba3f2dbe57ac9ead726006611265e9.png 1400w\" data-sizes=\"(max-width: 1400px) 100vw, 1400px\" data-src=\"/assets/static/advanced-options.be54052.4aba3f2dbe57ac9ead726006611265e9.png\"><noscript><img class=\"g-image g-image--lazy g-image--loaded\" src=\"/assets/static/advanced-options.be54052.4aba3f2dbe57ac9ead726006611265e9.png\" width=\"1400\" alt=\"Imager advanced options\"></noscript></p>\n<p>We will need to repeat this process for every Pi you are setting up. Once finished, we will need to mount the boot and root partitions of our flashed drive. In the boot portion we need to add some lines to cmdline.txt file. </p>\n<p>After the text 'rootwait' and before 'quiet' add the following:</p>\n<pre class=\"shiki\" style=\"background-color: #ffffff\"><code><span class=\"line\"><span style=\"color: #24292EFF\">cgroup_enable=cpuset cgroup_memory=1 cgroup_enable=memory</span></span></code></pre>\n<p>It will look something like this</p>\n<p><img class=\"g-image g-image--lazy g-image--loading\" src=\"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 1792 1598' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-c91d534e91982dad55f2bce931b791fe'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-c91d534e91982dad55f2bce931b791fe)' width='1792' height='1598' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAA5CAYAAACGRC3XAAAACXBIWXMAAAsTAAALEwEAmpwYAAAH9UlEQVR42u1bSW8b2RF%2btmHDNpBDDkmQeJMsRbZEkaJENvedIsVFFPdFFBeJIrXYjidBoDiAJkMgJ/tgeDv5ZP%2bx/AvzNO1%2bU181m5Y90oxhIB4k0wSKr7qqXtVX36vuU7cIhUJidXVVbGxsiEKhIHK5nCiVSqJer4tqtcp6o9FgO%2bJgr9VqXyzIVSwWxcrKiojH4yIYDAq328254fucHMCAHMBcqVT4Guv6%2bvrED%2bwnY%2bu1qsiV6uIPSkmspnMin0mI9GpYiGg0Kqampm7a7fZjq9U6XFhY%2bG5xcXFI10ObzTaEvry8PLRYLMM7d%2b6w/UtkaWmJV%2bRC3pmZmeHdu3eHc3Nzw9nZ2eH8/Dz7Tsb%2bVJ4xVl4NrMBo%2bLEaOvdDusVq/%2b5309ahxWY/nr09dTOTjApmfnp6eoNOQZIuU6mUpJORfr9f0nSwriiKXFtbk%2bVyWSLO5XJ9kSAPNSmz2azc39%2bXDx8%2blN1uV/b7fUmnJQkwx/xcHq/HIxOJBGOiA2RMgUBAZjIZ6fV6OIeBEzpNmVRcbhnzK/LfbZ%2bM0vqnm7c3nOG0EAQGE1Cg4Pc0UurBwcH3ND4qEaASISqNj0osqp1OR/3223%2bpFKdS0lNF9439J%2bJgdzqdajgcVolgNZlMqu12W6WRV2l01WazyXWoIY5xOBxn1kBej8ej5vN5tdfr8Qp7LBZTB4OB6vV6eT8Ro/qoB7rV1PX1rOp0%2b9RS3Pn9f16k1HJcef%2bb398q/FEpCFGme/zWrVsFnV1FczhWSBwadLJplEBTnE7NTTqxygKfro9t5INNUZwk%2bj7oWD3jeOg%2bn0%2bLRiIakavRiWl0Mlo4FGKdpk2LRMJagHzI6fEY%2bV28V6/r0pzAMq4JHaKMRY%2bjeEWZ7INwP4qiY3OuYI%2bcnp4q4Lkg%2bp1NMTczXagW83Kw05XdrU1t0NuW2%2b2m3O225WatLPf7PbnVqMrd7bbs73TkVr3K/p3Olry3P%2bB9tVKB43vdlux1Wry2GjXZ2qzR/h25nkrI/nZHdpoNtqHGg8N93gN9b3eH8w56Xc6NvKgLHfGoVSlusB/12rC1twhThzG1N%2btyu9Wkum2ZSydlajUqs2urulDtsa5l1hIynYzLxYW7haNv7glx9M19YbXMFzJkrJXyAK6hgc5WgwG3m3VuHEAOCBAKA3SjWpKbJHsEfqtekY1KcQKu29pkG0CjqSbpHcoDoLAhH/YbewB8lwhrVEqcG3qfYlDbIB7EgdTSRpbzbFMNXBs5DwY9XoETuMr5nEwnYhJ9GZJNxrX1MRno%2bdHfHgiBP9viQgHBxVwGhTQkQQGQ0KxVxqfU5RPBaeiM12S9XODTRgM4AWMCGHi9yqeD%2bCZNEU0W5wBhPDG0FyTdp5NmIne3mTjEICeablHzaBwnDUzIDYyIQS3UBU74kJcnlGoiH/ZuZFJMMsioFHIgjwkAGSDgH38lAvBns%2bgEgN0Hh3saRnafRhKNAsC9vb4%2b8gDSwnj25f2DAcegcYwrGgBhmCKMPsDi9EAS4jEBALUzvnWMU4OgrnHboDHkQl7jRFvjqQNxxq0FsjAxXUwq4YQdOEECCEdeTB5yHY7tRMZPE1DMZcGgfgtQ4xh5nBzAQPA8ABAUx8nhJNAkAPBpjW8bgIYPUwLwAAff4d4unw4mCTqI5luJ8uIasSCWp4HqMikdfcyN5w9IQE1M2F/oGYJ47EVNPIewFzomF%2buDgz225bMp3BIaxp8JWAAB93UC8ECAYy0ekZGAT4uHAzIW0iUeDrJEg35eE9Ew21cjIb424mA3bIbAZsQbufQ847yR0/N%2bqGvg8E9qnVwhXDMS/BFeI24tHuUY1CHRsIb9Xjk3O1PY2259TEAyFpZBr1sL%2bTzyLCH/R%2btJuyGnXX%2b65yzfh/VsDGfV/Iw6mmH788ztQq%2b1%2bSkBEQ4CQ/%2bnwr2BBBCw227%2buggweguaBJgEmASYBJgEmASYBJgEmASYBJgEmASYBJgEmASYBJgEmASYBJgEmASYBJgEmASYBJgEmASYBJgEmASYBJgEmASYBJgE/FoJCE%2bCfu4Vtf9R0Qnwej68Jod3hUEAXiHFi5K/1AREPlkn9sCH1dA/K1/Ad%2bprcrCDjDljAv7%2b8FBY5u/wq7KrkZAW8LrfE0MaXpj8WuJzK5rP5dT8tHrHq9/jYh%2bufWP7xEcSYL%2bHBbqxx%2bdS9HjFOckPH4094t7DTitNwLQ%2bAZlMRty4caOIz1Xsdru08/o1xD7R8dkLPtcJhYIymUzKcDgsA34/f17Dn8VEIjJFK3R8/hKha4/HI5dsNv7Mxu12kT0gvV4v5%2bL4VIprrKysyHAoJK1WK%2b9Jp9Nc8/r168VEIiH4yy0iIEMB72w224jEWL%2baELARNTWiBiYrAR9Rc6NYLDYKBAJsJ2JGXp9v5Ha7R0TOyGq1kVhHTqfCe1xkD4VCIx/FEBGUe4lzOJ3O0eLi4sjlcr0jgmF/RwRkKJ8Q/3z0SFy6dOm3V69eXb5y5Yr7lxAhxI/k4sWL7suXL5/qO3funJsw817C7b5w4QLbz58//1Ec9kPgR5zhp33L6PnlixdCEDPi5cuXotlsiuPjY/Hq1Svx7Nkz8fz58/%2b6vCAAT58%2b5W8H8cP3g/g5HA5xdHQkHj9%2bzNfXrl0Txo9OXNAYM1bsf/36NX8bSOMu6BbBYQqLxcKxT5484Ry9Xk%2b8fftW5PN5tpfLZfHmzRtBkyF%2bAHY6KEzLVZyXAAAAAElFTkSuQmCC' /%3e%3c/svg%3e\" width=\"1792\" alt=\"Edited cmdline.txt\" data-srcset=\"/assets/static/cmdline.82a2fbd.e2265de757afd2e5d9c8ecefdefe047d.png 480w, /assets/static/cmdline.cbab2cf.e2265de757afd2e5d9c8ecefdefe047d.png 1024w, /assets/static/cmdline.d8864ac.e2265de757afd2e5d9c8ecefdefe047d.png 1792w\" data-sizes=\"(max-width: 1792px) 100vw, 1792px\" data-src=\"/assets/static/cmdline.d8864ac.e2265de757afd2e5d9c8ecefdefe047d.png\"><noscript><img class=\"g-image g-image--lazy g-image--loaded\" src=\"/assets/static/cmdline.d8864ac.e2265de757afd2e5d9c8ecefdefe047d.png\" width=\"1792\" alt=\"Edited cmdline.txt\"></noscript></p>\n<p>We will have some additional text after rootwait but ensure you put this between rootwait and quiet. From quiet on is removed after the first boot because they are used for resizing your volume\nNext we need to edit dhcpcd.conf. This can be done by opening a terminal browsing to the mounted folder of our rootfs partition. You can do this easily by using the file browser.</p>\n<p><img class=\"g-image g-image--lazy g-image--loading\" src=\"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 1873 1190' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-cca9526c6a3e230a07bb0f6278ea76f8'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-cca9526c6a3e230a07bb0f6278ea76f8)' width='1873' height='1190' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAApCAYAAACFki9MAAAACXBIWXMAAAsTAAALEwEAmpwYAAAQw0lEQVR42sVaWXdc1ZWuf9EdbEmWarg1qqpUpZoHSaUqqTRLWJItS7Kw5EHYAk%2byLTyAJ8m2DM4A9HLCmE4T0gGSBsIQwI5xjMFMoRnC9JTkqV%2bSlzRZKyv5%2btun7hVXJdmQXsF%2b2OvcW/uec8/%2bzj7f3vvcsiQSCaRSSUSjEUQi9YjU1yORiCObzag2FoshlUwimUwgHo/xPopQKESpQ1gX87Vxv5yEl%2bmzoK%2brQ319GJlMWs1H3hONGhJREuO16ERkbvF4XM1JbEinU3qfkh1GP2UTr7PJCNKxMJryGQyOt6Nvoh0dYy2wdPf0oru7WxmVzTYgGAyip6cHp0%2bfRqGlBaOjo5icnER7e7uSQqEAv9%2bPQCDwTxW/PwCfz4exsTGsW7dOzScSiRAUkXol4XAYw8PD6OvrQ0NDA/r7%2b9XvbW1t2LRp08JzuVxOtQJMZ0cHNG8Qj%2b1swDP7GhFOxrF2SxcGt/Zg9ZZOWJKpFNFLq8HlhfLiJFdcjBWERZfiM3Itv4tH1NbWKhEg/DJ5Si2vjd%2b/ll50C/qg%2bk3Al3dls1k1FyVcvUg0pt/XI8WVlnnIfDLyHHUJ6UNASoDVqznKtXhBgs8G66MYKESxJl%2bPZGMSI9t6MDjZiTW3dsPidnvg8ZTE7Xar1uv1wuVyqdbQybXxuyFOux1OqxXO6lVw2W1wsb/Sqdap62t0vX2x3lmmdzjU%2b9XvFDfFZehrquHSNKUXnRqD95q8m3qN/TU%2bK3o1hqs0jvTXpC/FZndildWJeCqEoS2tGNjUgrHtfbAUCi3KZZqbm5U0NTUtGGsYbwZB48B2mw1arR%2bhXfsRmtqNwNpRePOtcHBCDk5MWidXNTxzGHW3bld6T2Mz7ErP/py0Kxov6TdPKb073QB7TQ0cHN/B1pVMo/7AcQQnboV/zQhciVSpv7y/ulqNp/QbtlA/yvFiatwFfaEN9QdnERzbCP/gMDzhejV%2bKOrD0KZmjGwtYnxnLyxRuouQRZ0ioXq1BQwAlhMn0RcDXZEYCk%2bfR%2bHc22h7/WPEj56GtbICTq6AGODhhFtevoLiK2%2bi7bUPEbvjCOzUa9TbV62Cr1BE68tvUq6g/Y2PEbltGraVK%2bAk0PaqStR29KDt0gdofemKakMEQvorPdsgQSte/G/q3%2bD4HyFIkOwVKxf0IQLTfvm3aBY9n/N29sJaUYlI3I%2bNU224ZaqIie1dX24BISJjfxqrbzbcuDcAcEeiyP38HAYuvIvHLl7Ggfm7YRPP0FfQTQDU5AlAOwGILwsAAaJ0LABwEzQTAO2/fh9FGtBOAMI6AJoJADFM6S8TgLUjsBEA0duoDxOAPIHZdf51/PTlc%2bgbHkHFigpyhx%2bbJwu4fboXew4MlbaA4f7CpiJCTlcFQAykoa66EOLfeQBd3/8Rzr34Au799hk4HNyX%2bhZwEaD02R8hcf8PkXnkCYQ2TdHwKmgCIPekJ9OIzNn/oP5RNPz7z1A3Ov4lQNzT3lwBWfZLiv7RJxHoHyr1VwBWoZYrmn7wJ0jc9wjSDz%2bh7gU4Qx/sX4sof9/3wx/j8ksvYsOGDbiJACQTfuy4rQ377xjAvr39sDidLkUcMnERMXA58lsEAAlLCckmQSZuIWghRhErDTfGsZOAPASygfwSlv3J5xU4hp73HvJIprERXj63nN7tq0Uykym5ta5Xz8g15xGOxZFi6A6R8eV9S/pz/AYubJ7h3ElStlrtSMS82L29Ffv30QN2cwskk6UwWEom0ip8CCDle39ZAIh0lNwhDFxD4tF0nZqIsD5JKUFeqeP2chgTNPTiRdTHwuQc4Y3l9NxKEY7v0sdTAMh7dX2ARsUjpfHtJr0CQLyQ/cPUraqqUr9bbQ4kom5MTzVi/542TO9ohSWdzuhZX2Ih/n4lAPIyCZmtHXCksnB53ErMxste9LR1wh4ne/NaI9eY9U5yjaetC45YAg6JLu7F/Z1MjDzt3XCQbDWvj1vHvQgcJ7egW8YPkd05ttpaZvDCEXjIIw4%2b5/F6dA9wIEkA9m7LYt9tjdi9NatvAYnpNEw6S4w1jF12CxhRgBla4%2bPPIvezl5F89hKCM8dKe1DtcZJgPIHcf51H7okXkfvpCwhv3Ul9lTLE2OM5RpHcfz6P3JO/RB1Jy7ZAklXwFTuRf/Eymh7/BZ95TpGe6i/6ykrFCfkXXkPTj59V4/t7VqvfS3qSJDmlQILM/uR5xH5%2bAV6CXVNZhVTUhemJMPZuiWLfrYkSCebzeZXiGiQo2ZiRCF01CjC7ynPixV%2b%2bjpnvzmLt%2bDCqrTaFdCkKJNHy/CUUaYSweIwx30xyPuYNom%2blvuP13zIK7FZhcCEKtHeh7fw7aKWRbYwGofFJvb8eBdYMo3jurZKe40sYNEeB0PqNaL30IQYefwqHZvcgkc%2bhqqoGqXoHdo%2b4sW88gJmJOlg8Hq/KwSX8lXLyUspangku8YBQGNmnX0X/Aw/hf8b9%2bEVbNarJ7gbLSxjMP/8a5RJafvUuonvvXMzyBKDAyeef%2bzWKNLB%2b264yALrReuE3St/K/hLXFwMwghYClH/uIlpffQ9BJjt2HQDRh9dPIPvG55idHgM2%2bTAVWol/qXEiG7Zh/6gHh2n84Yl6qQXSKq%2bWREgAkHxckiG5v2oUEIYnaKHVaxDpW407UlaMha2o0cOgpnNAoJfFyuA61DNGu9NZtTc1TecQMrS/h/qBdQisXguXcIHNWiJSptWSSdb2DiDMcBa4eRBOepzDyDOEA7gAfv6%2boOe9WS9b1Dc4grZCFndGvoWkqwZVNica6QHHx3w4ubEOsxsjsNy8ul9Vf1JdyVaQfKBYLKr7qwEgjBsmSDmWpQ1SIDXlEcs2Kq8xiEjS5ToSY4HjNDK6uE0Mb%2bi9NLSZBBzguDZuG3MUEL2LkaXAMOnnODY9xJb0Tj5fjRDJrZnEHWBrX6TXVFoc8rjQ0JRDtS8IKxdHokBTRMM83f/URBCz4/QAGUwmbo6xYmB5PrBsGJT9xok6VnxLhUSHEaYMNhbDqBfXdpgM/FLvU4YpvckAw0iNXiaGyd5W3mHWO0t6AaKkty3Ry/gqeWKG6STYNTaNHmDH3Kgbs6M%2bHFlfV8oD5HChkUgbIl6QYQJy1S0gLhisQ/zEdxCfPcP9fQiBgaGSkaIXjmDxkThzljXCPMLTh1BLdy/p9SiRyih97K6Tih98ZGkpYhSHqGInh%2bS9DyPKgiYyfbBUbEl/6lUqzSiR/N5DiO4/hsieg/BkmxT3GPpaRoUks8TozBFEWLR5aGd1tVV5wMkRD%2bbW%2b3HsljAsUk9LESTxX3IBdQLEKCC1tHnll5AgU908Q6AwcfsbnyB5/B7YVBh0f1kLkOHzrAcG3/oUSUYBq5CUUQtIFKBe6oWONz9D5PY9sK24aREJtpHcVLHDosYohswkWCQ5Kj1rCQmTtpWmKHDLZhU9VL3BmiHQczNWVVQhF3VinsbP3RLAsQ0EwOsrHUSIgQt1vl5zl5fFS6rBZ36FNk6indXgYgCq4SUAOVZ7Yxd/g%2bdeOYejp%2ba5AtWq/0IxRPCKr7yFjiufLgVAiiEWOUW9mFpSDA2tV%2bGvyHdI1acAMMJgRYUKm7IwqholkAYATREnTozW4uR4HU5MkASbcs1oZ%2bxvbW1FZ2en8oDlXH/JFmCmFjs0h9jxM4jP34c6Iq5cWFyc%2b9VNVg6xRG6fvRvPPPUkDt91J1bR8BKAkiglET92D6J8Jnn3vylGX1wsNSBx6nuIHJlney98BETCp3JxvsdLAOMnvouo6Pl%2bb76ogC3pCTA9KDF/P/Wn1Vb1NjShelUNGsIajg/7MD8RwqlNBMBLopA8QJ3C6Cc2Rir8VcWQvCjBXDzM3MEqkytjcY/DjoZ0Cinyid1Efka6qtGQdCwKNwGzL4kC9DJKQzKh2nK9RI0Ao4NEES/fY7PWLIkC0i8Tj6lTI1kUq11Dts6Ow2vcODkWYDQIyYFIXJ22Gud9wgOSA5TXA%2bUAKLbnJHxubhXjlMhczLCVo686hktzeFzoK5Unfw9w%2b6lDFFMhY%2b4vVabL0JtE7t2ck%2bilNYOraaXxpV%2bAZO3Uo5wAkA7acGjAxW3gx6n1AVia8wU0NTUqAOQ4TKLAcgXRkmKI1/6hMXjJ7q50AxOP6NKKjq0Kk2bjy/Xsc039V/Uv0zuuoRcAUgTgjpsdOLqWoXDYC4vNZlfIO02l7DW3gCkK5J58CS1MZ1vI5PGDx0vFkF5ULV6Rf/79/0cMAGZ67Tg65MGJEQLQ3tGpCiFZfSFByQC/zpGYCoNPvYQijZdiJ0kys5kA%2bKZk0Wr/A6LOAwhA0m/FgT475mn8mfU%2bWGKsA%2bS8XYog%2bTYgIfGaADh1AFhvNz32tDoXLDCexw4cW%2bQB37TxxumVOWwb12ZZeE6uKQGPhjxzgc6kG3NrCYBHjwJ%2b/UNFeei7WiosgzmZC4SbC/AzxGgsXjSH/bqtvmG08QFFCjhJ3qQ1p9vynNgnvxtfoNxeP4nTh/3dTlhaWlpV6iuuL1%2bDxAu%2bzpGYuJSEphQjR8DnVWGnPNe/HgCIYZLJSgkvc5d78WKjujV7h4jfXwu/fLWq9eJApwMWl3vxV6GrycJ3ARNZSsFiJcvay1zzenqA1CzCX1LSSysVrUSylpYWdcRn3hZyHaW3hFmn1AUD2NtaA4vPX/p2t2Ao3WWJ0HC3rjMD4Cg/qf0Gjb8aALJtjbOL5civnBOcTj2HcDmxK18NS3dXN7ro%2bk1EK5/LwSOISRIiiYTsITleZseMHJOZTmW1GyDlSZYsiiRSYW4BWRzhJfntWiL9nMrb3diaq4Ql19OL5u4uJMgDadYDcYIQIR9ETRKjS2WLRcTku6HpiPtGAmCtrFQSp/Ep%2bS8AvSBJ99bISzUshgy9ITV6G/QSNPF2uw0bM/8Ky74Lr2Lm/Hkcf%2b89HLx0CcfefRenP/8cpz79FPO6nPrkE9x15Qq%2b/Yc/oHNqCtUsO52mQ5TrDYK8uzg%2bjo7JSazevh0Du3apVqRjyxYl7bqY7%2bX5Xs6/W2RyC6Y6NVj2XriImQsXcA%2bNu%2bvtt3H3736HB//6V3z/iy/wg7/8RcnZP/8Zcx9/jEcBrJ6ZwaoVK24YAKrI4r6//49/xCOcz9GPPsKd77yDuc8%2bw/zvf4%2bjH3yA4x9%2biKPvv4/7/vQn9cxDf/87HmYr8uDf/oaH2P7gi//F/s2NsAzNzmH42DGsPXIE69gOsR06fBjr5N4k8szo3BwSLJ1t%2blegG%2bkBndu2oW/3bvRT%2brjy/dPTWMPF6eF1F1dYpPv229G7cyd6d%2bwotUp2oI8e07f9Nmzv9cBSaMqhSU6AuIcy8o%2bQWEz96UFqazmaknaRlB0%2b3igOkD1tq6piOR5BjqEwyyq2kXYEGbGqyQGiK%2bcBxQUVlahYWYkqypbmKlgSqbT620m98XcUAuCTT%2bR6CJRrszhNpe11B8B06CrzUKdLRgWofxBVGaquKxcH0/iwT0Nvwob%2btB2726rkSEzS31KiIymjxFZpjf8LKN1yqbBRv18P0QwxAXKNjHPZfID9a1gMNQZsONpVjWM9VhzutcGyemAQXawCM5ksurq6VCvVoYikyAs1QVkmaKB%2bXcRhyFdVfdpVRYCpke8CISdODQYw1%2b/DkZtZC/h8khfT1bnSIsa1rLpPVp0JgyFyX0qG7Prq2L%2bmOP7B%2b8Uiq1cSTWVyy4q2WDTjeSVMnJwlAFrjXjww2YSzm7M4uS6E/wMIji6dokJAdAAAAABJRU5ErkJggg==' /%3e%3c/svg%3e\" width=\"1873\" alt=\"Rootfs terminal\" data-srcset=\"/assets/static/rootfs.82a2fbd.4f0580f991535d64d348010107a27e41.png 480w, /assets/static/rootfs.cbab2cf.4f0580f991535d64d348010107a27e41.png 1024w, /assets/static/rootfs.0d2b9e9.4f0580f991535d64d348010107a27e41.png 1873w\" data-sizes=\"(max-width: 1873px) 100vw, 1873px\" data-src=\"/assets/static/rootfs.0d2b9e9.4f0580f991535d64d348010107a27e41.png\"><noscript><img class=\"g-image g-image--lazy g-image--loaded\" src=\"/assets/static/rootfs.0d2b9e9.4f0580f991535d64d348010107a27e41.png\" width=\"1873\" alt=\"Rootfs terminal\"></noscript></p>\n<pre class=\"shiki\" style=\"background-color: #ffffff\"><code><span class=\"line\"><span style=\"color: #24292EFF\">sudo nano etc/dhcpcd.conf</span></span></code></pre>\n<p>Here we need to setup your static IP address information. We can scroll down, uncomment lines, and edit them as needed. Mine looks like this:</p>\n<p><img class=\"g-image g-image--lazy g-image--loading\" src=\"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 1732 1162' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-d8e4ed757e0d42451c3db910d1e4e616'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-d8e4ed757e0d42451c3db910d1e4e616)' width='1732' height='1162' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAArCAYAAADIWo5HAAAACXBIWXMAAAsTAAALEwEAmpwYAAANTElEQVR42s1ay3NUVRq/unPhbKYmiCYR8k6/H%2bmk8%2b48O7fz6g4JQohQ5WQoiAOSgIWQQcUpcWWV7tyw0AXlaGH5LlQsFago4MKFWuVKV%2bmiZjN/APee%2bf2%2be09z6XRCQCB01VfnnO985zvnfO97bxt9fX1Gb2%2bvkU6njfb2dsM0TWNiYsLI5XJ/GrLZrEH%2b5M09%2bvv7BYaGhgQGBwdlnm1PT4/QDQwMCA1brrkV7%2bHhYRmTH89eim5kZMSYnMgZfZmc8UR82OgfNI10X8pI93YZsml5eXlZKBT6R01NzZzP59uP/tzdgGAwOFdXVzfX2Ng4V19fP9fQ0CAt9hCcxrPVdJqGLXFr8Sad3%2b%2bXMXkSStEGAoG5MNoGf2j/pqrAXCAYnn2ysrxsON1viKQrKioGksmkgjRVV1eXampqUs3NzX8KEomEamlpUdCi6uzsVNCw6u7ulrajo0Nw3ItjttCm4EiTSqWk5dq1eOPssoY4vcZLo/utra0q3tSsetsTai6bVK0tCVXx5Nahzj7TMLC5UVZWZvIQb7311vXp6enr0WjUgkAsbFISOHcrwMYWDmctLCxY%2b/fvt44fPy5w%2bPBha%2b/evdbu3butQ4cOWS%2b88II1NzdnHT161Nq3b5918ODBQjs/P2/BLVfsqccHDhywpqamLJ53dnbWmpmZsaA8Cxe2YNlCxz7M3wrGWqxnc8nr/zs9ao2kmqxHy7aMVLRNGeI3mzZtMmFKCmZlRSIRGyYjAPMR0GMC6GyY2roBplzoa17YR/gUj737EOAS0q7Gm2u4ln29Rs8Vr2vk/gGf3ZNoVJFIWFVUVI5mt0EASilj27Zt5nfffafOnz9vv/POO/ZXX32lvv32W/XZZ5%2bpc%2bfOKXdOff311%2brSpUvqxx9/VFeuXFkXXL16tdAuLS0JP/InvP/%2b%2b%2bqLL74QIP6bb76RPb788kv1%2beefy14XL15cc7/Lly%2bv%2byxXrl61Ly5dtvfs2aMqKyu3TSAwigAQKU1uhEvbZ86csfUBz549qz755BM5GIG4CxcuyGVuZ2PScg0v9Omnn4pgeckPPvhAxhQE9yF/jtmnUEh/J/utcQb7%2b%2b%2bXbLgWrX3y5MmThvH8888b1TU1JgMI0o%2b9bXLSjsfjEpyQWoiTltDW1qZAq2pra%2b8IENUVXEIhegvANGUMUy/g2WogPeFO9yuxv11VVWVD4QyekxC2Ycw%2b84zxZGWlmURUbU0m7bbWVpsRlpfFWCU9QDwzBCOsgLdfalwCuF7z0P3VcLfidbuAwGzHYjEbLs9MNPnhhx8axsSuXcbm8nIzig2jiYSN1o7BAqIEpBAsUBzHMC8ARnocgVCkr8cQUGHsXUPAOK55sb8xYIfD4ZsF0PfySeNvDQ2mr7NL%2bVvb7PpUyq7v61e1ZkbVwy2CrW3KD2toSPWohu6U8iPfhpF7eXl//4CKIMf6kcMDyNl%2buIsvnVa%2bgUHpB4APYl1jekiFsOaBFMDiiRNGTW2tyaJiyDTtdCZjD2UyamhkhGOnIMFFMhiPwXc6UC%2bEo1G5BPKvigDEenA5GcNCoq7WI8Rpa0Kfh4h5heDpe8f3VQDHjh83UAKbKBwUwEY1aFMYA9Dg6OioU51B6%2byPjY1JX/sUYwIKlULl2IZ%2bsxsLuCHnWoDXMSRWdOHV4B4KYqUAXl5cNOpgAcOI8rmxMXsEVjCKkpgBcBRaH4YVDEEYM7t2qe1YmIUgUFkp0KkxzE/v3KkGMT%2bO/i70uSaNcR%2byyI6pKZWF0EZhUVMTE45gUIQ0RSIqDmvhRQvAcTRy4/KuxdxzAQwdOGhs2rrV9MOHQ/D/QHe3HerqdnwW2ozgMqHBQRWBJgPQfgOsI4B50AlNADHAh7Xi7x2dKgytg48KwqKCjBXAyRgQQSzxDaYlXgSxPgoLYhskvx4Hd98tYHphwXiiqsqM41BNEECir89O4LBRPLAkcblYb5%2bK49IJaDSBoBfFRVuASwIXwQWTCIxtEFAUsSFOAC4KCOOyEQgjjCDKi%2bnAGQINBUdBMcsQRyB9CHvedwH8%2b6WXjPq6OpMmnfW4QAcOxOKH5kvzzo6Pi/kPQgCcpzt048B0g90zM6oXQuuHEAlt0GwoEFCRUEjFYO6RYFAgGg6rKHCEgguI6XvgfrvA32dnjQoUQiloGIHOziALZHBBFkIMfJOTkyqXy0kA7IDm%2buASrKQm4NMMemkIaQRC4JpR0LDVNNyoExrPYj359MNqWGEyyDJwrhYU4%2bsIlndoJSsFoJ8FDh85wmdqG2nP5rM1I7wcFubNDFF4noeGiRsEkI7P8cSxz%2bf3LtB0wO/1mILkPFMphdHuvguI6%2bJoHVnhngvg1Kuvmv95913lw%2bNnFI/DEZiqmC7aMEyXoM056uJC7hgMZU5o2aeZuziOo%2bTDeZcm6oLX5FdkBEJxprg7brJSAPNnzhhV8bjZPjLKwMQMYOvoHEVwCiLgBRGhQxj7USGywgujaoy6wY00AaHpkaAXRFDkmHSM%2bswoYWYHaJ5VI7MBs4Cs4XoEQlaO4bZ2CY5BWAmhITMslSaDI7OEVJvYg32e765ZQPez/zT%2burXK9CVbeWAbm9uSytxIzcjMQ8vBmPp4GVxeojYEwXkd2fmcwMNxjjRRjnFB4gQY9dFSEDr6F54pWE2S1l1DvgU8cJJVuNbF3TUBZP51wiirrzfDTg63oQ0KQaTNi/EwzuVTAhQKD%2bJDIBM8hCP1AOgLZuk172IoEfU31AVGUQg9hkLIB5PFZXD5bls0LVp1BcBixQXRBM0eFxZThgCaIuGVl/Ie3G1jdxjw7mkQHIMLPLZlCypB8TFxgZBb0dFUxZzF3DsdV5AK0DH9sPh8t7Q0f9ITH000O%2bbc7Jq7C/fpgef2BDDy3CFYQJXplwDTZdMK5IKs6nBYapmXosadQNTrgIsPusFRrAIC4qMvBeLED7hGSvgKvdd3b9Lmhgrg0LzxGEphv1Of244bOEGNwYda58UZfZ26HXPtHU7tzvpeskCvogXp8pYWUxwLSj4AadhYC3hOYoCbYuj/jgVAe1H3AUgCousC4hKu6dNKKICg%2b/AkGUFco0MCZchNfdR8yH0%2bkCjvZosHxAJcF2Be5tNgT6%2btNc1LUPs%2bVH1i9jBn7Q7E0fR5WXENCkrneGaGjg6ZJy8KQd4SgU7iSbsTPx4IAUxns0b55s1m3KnObJiq7Y3oYroaPOasQZu6F%2beYe9Ga8I33AIUU9iC4wPj%2bOXGBcFKKE2SADls/mkaSThaQAgZapOnSKsLMDih0NE77Pas5HQB1AaRpaCnaJeJFr8U2VADp44tGGR6HxeRbW22mQm3WEvwk0LW6NUC76wK9TlnqxoRCqeoWRVIw6dLWXe%2bUv72F7PLgZQHnQjb83HZSV7eTwujDuAAv48SD9A030GatTX1FMRQt%2bdx/kwtstAB0JShpkCmwO%2bVUgm55KwWRKwBmBxGIW9drXLjIrNdbxcUehEJoeGHB2FRdbQacWh8psFPSICM4BaDjgLYGb7ojThdEt1PqboDm18gC27cb5Y8/biZo1rEYM4Bdsq5npEeb8LzEuBHxo4VN%2bJZHf9pa7SAxVwClaGIe4axFtxpNbG3hrhRANpczNiMN%2bgMBFUYKxMXs2CrlagSXDYCOH0CExkvnjkkX1C9MNE0RxN2PKuRFnvGi9d4%2bX6qQX6l575i8SFs8X0S7UgAn%2bGWopsbcvn0739XJx0P9kdK7CQ/KV1xPPfWUfOTQH0O05L1rxsfH5X0i8aTRGtIfPHl5/m1lx44d8pqNa/R6rxa5J1/H8cDe%2bVIan5qakpe45F18Js/%2bpV%2bJzczMmL/%2b%2bqs6cuTI9ZGREQsE1sTEhPzFhH8/4d9damtrrVdeecX66aefZG56etoyTdPCZa1UKmWNjY1ZEI6FTa3z589bb7zxhuCefvppK5vNWuSLTYU3DiS0v//%2bu7Vnzx5rcHDQyuVyshaWI/PsQzHW6dOnrR9%2b%2bMGCcmRfAi4qPCFkCxeSv8H88ssv1muvvSZ7kEbvyfNBucKTtBAq51cIIPPHH3%2boY8eOiZb5ZylqsNn9OsyW39dPnTqlfvvtN5njW18IQIAvRtny7TBp%2bYeG9957T/B8o0x%2bnKc2iePfcXbu3KmuXbum9u7dKy9YyVO/fPXu%2bfbbb6uff/5Z8ORBXtQ0W9LTSvgCd3l5WUFYYlGc1/fgH7I45lri6Jq0lq6urqmzZ886AoCEui9dunRt3759y5hYxoI8GOWh/TwW5HGgfHV1df7o0aP5c%2bfO5cEoD%2bZ5aFj67e3teVhBHlrK4zD5jz76KP/mm28KHoLKY/M8DitAvrhYHoLJLy0t5WEJspb8IBwB756vv/56/uOPP85Dy7IewhJ6CETGEGYepp2/cOFC/sUXXxT%2b/f39eWhcaOGuQp/JZMh72efzLaP9L/hnQG8Y8/PzBn6PAqoffvjhRrRrwkMPPXRLmlvBeva5V%2bDuXQf4C4RryM%2byLGlpDV7YsmWL4f0Rxx/MewVtMTzyyCOrzvEHi7uJb/F88Z5r8So1v7i4eMs1/P0fLTa5VkAlrUoAAAAASUVORK5CYII=' /%3e%3c/svg%3e\" width=\"1732\" alt=\"dhcpcd static ip config\" data-srcset=\"/assets/static/dhcpcd.82a2fbd.f49e8586023668f3b9773898cce5b8b3.png 480w, /assets/static/dhcpcd.cbab2cf.f49e8586023668f3b9773898cce5b8b3.png 1024w, /assets/static/dhcpcd.7f37f3d.f49e8586023668f3b9773898cce5b8b3.png 1732w\" data-sizes=\"(max-width: 1732px) 100vw, 1732px\" data-src=\"/assets/static/dhcpcd.7f37f3d.f49e8586023668f3b9773898cce5b8b3.png\"><noscript><img class=\"g-image g-image--lazy g-image--loaded\" src=\"/assets/static/dhcpcd.7f37f3d.f49e8586023668f3b9773898cce5b8b3.png\" width=\"1732\" alt=\"dhcpcd static ip config\"></noscript></p>\n<p>Next we need to edit the following two files: /etc/hosts and /etc/hostname. We will need to change raspberrypi in each of them with the name we specified. They are edited by executing</p>\n<pre class=\"shiki\" style=\"background-color: #ffffff\"><code><span class=\"line\"><span style=\"color: #24292EFF\">sudo nano etc/hosts</span></span></code></pre>\n<p>then we need to edit</p>\n<pre class=\"shiki\" style=\"background-color: #ffffff\"><code><span class=\"line\"><span style=\"color: #24292EFF\">sudo nano etc/hostname</span></span></code></pre>\n<p><img class=\"g-image g-image--lazy g-image--loading\" src=\"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 1732 1162' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-895b3730732b0cc22aa06e0b36127362'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-895b3730732b0cc22aa06e0b36127362)' width='1732' height='1162' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAArCAYAAADIWo5HAAAACXBIWXMAAAsTAAALEwEAmpwYAAAIn0lEQVR42u1aS09UyxYunTk4d6jxAQcFVJCXAoKiiIDgbh7SPBQJSoznKrTRiJrgI5LIQBOjiY6MAwdMSYxifBDFFyKgaMJATRzpiB1zJ/cHWLvO9610kW3T0njEXJPbnaxU7apVa636aq1Vu6u2KisrU6WlpaqyslIVFRUpx3FUfX29CgaDP011dXWK8imbOsrLy4W2b98uVFFRIf0st27dKnzbtm0THpYcE0t2VVWVPFMebY/GV11drRrrg6osEFRLc6tUeYWjKstKVGVpsRKly5YtW5iVlfXvlJSUUHp6egfqobmgzMzM0MqVK0NpaWmhVatWhVavXi0ldEibbWdp%2bSwPS7bNJJt8a9askWfKJEXjzcjICGWjXL0mq2PRioxQRmb2X38mLltYVVmuBOmEhIRthYWFBmiaLVu2mLy8PLN%2b/fqfovz8fFNQUGCwimbz5s0GKyyyWW7atEnaiouL5ZklVlPayFNSUiIlx84kG7bLGLbZMX4eW9%2bwYYPJzVtvSovyTaiu0GwoyDcJfy7fvrnMUQqD1KJFixwace3ata8tLS1f165dqwGIhpKoxL5YBMUaxuljx47pjo4Offr0aaHjx4/rgwcP6r179%2bqjR4/qkydP6lAopLu6unR7e7s%2bcuSI8LPs7OzUCMtpOu3z4cOHdVNTk6a9%2b/fv162trRqLpzFhDc8WPtbh/jpzXYE%2bFCz8%2bt8bNbq6JE//sTCpOmFjk1KBQEAAgCsZuBWFeXAZIbiPkH0mgc%2bDq82a4MpTdcj34OZTdSvP6mCbX75/bDQiL8ewbu2zff46KQ2UlZHubc1PMzk52SYhIbGmrgEAGGOY9Jxnz56ZR48eeb29vd7Dhw/N06dPzb1798zAwIB5/vy5efz4sdDw8LAZHx83r169kvL169ff1CPJ3%2b7ne/DggcgbHBw0t2/fNtRpdb148cKMjo5%2bV6afKDMWzxSNj3svRl55bW1tJjExsaEeiVEA2LlzpzMyMmJevnzp9fX1eZw8Abl165aA8OTJEzEWAJmhoSHz9u1bobGxMfPmzRszMTExIwiRgJD37t27AgInznp/f7%2b5f/%2b%2b6CDIswVgthS2zxsdHfEQWvT2xnPnzimFWFNJSUmSAxCzHhKUx%2bRDQvwZJsfU1FSDjGvgklKHS0nSITGJMYGxzqQEdzbLly8XSk5OFmJ9xYoVUocueUaGF2IbS8rHLjTF55dBnXNB0ONBvoetkXNtBPBKHTp0SEGRw8yMiXhIGh4zrJ%2b4KzCrkljfuHGjqampMdh3pdyxY4fUWVIOQWGdgJCwR0vJXYbtSFDCQ4A5HnlIACcfeWpra6W0u1Jubu6U/p8hJGZv3bp1XkNDA%2b1sROgpdebMGQV0HBoAhR69AIlQBlAxBkwrubVwEjSURtvJ02BuS%2bxrbGyc2tbYjpcd8RS8lAg/2wkA8o%2bAwzrH4eVFQLF8bKc91D0H5GVnZ38LwKVLlxRc2uFE0OFhIgwDMZj7Z6RyPtMraDgnzYnQUE6SE0A%2bkT62M1TID6VCOTk5EiK2zj77bPn4bMm2%2bxdgzgG4ePGiwtbkcBJYNQ%2br6hF1AsD4/x4AjCMSY5%2bTpxtTBr3ChgYBobf4jWcI/ajhczT56ADg5URCgKsOV/QwcQGAMRppvDWG4WHdOpw7ZMXxDi9AsGQfy0gZ/lCaw4n9cwD4Z4IvQtgWjH0ZsS5o3TTSYJbWrdlv%2bfhMt4ccIcq0cqx70wP%2bBxP/PgA9PT0KW5CEAMjjTmCTlN3q/GEQzXhOijxMehROL6D7s2Qo0EOY6OBt5vr16wLSPwmFXwIA3wO4DYb3cnkPoPvbDE4XjxYG0VyauYHJlONJ3FkYBpTFrXPfvn2mu7tbvOO3AYD//ZcsWeKEMzO3QI8ua2k2WdgPgnV56/Y245NsaPxWOaC5uVktXbrUsQxh%2buEsPBservpvlwN27dolAISNkjelX6E8Wtj8XwHwm1AcgDgAcQDiAMQBiAMQByAOQByAOABxAOIAxAGIAxAHAADs3r1bAAif0U07EYq8GYp1lkc%2be/IT63AkGk%2b0g5MfkRXjsGU6APyGZvHixfJ9ADvpAZHndbZuz/V4Tmh5op3z2%2bNwP08kP2VQFmVGO3a3dZ4pUl60fv8zZZE3sj%2bCdzoAZ8%2beVSkpKQ6vtHgxQgDsJahfCQ3lKS9CRm6M7Gc0Fnn/GF6Z8Tic7eTxnweSj5PntVtzc7OcPNvLlshVpE4er9Ngf3%2b0FW9qapITacqOtMmnfzoA/D6gtbXV%2bfDhgzlx4sTX6upqDQZdX18vn5jw8xN%2b7pKamqp7enr0xMSE9LW0tGjHcTQmq0tKSnRtba0GOBpK9eDgoL5y5Yq07dmzR8PLNOVCqciGQcL76dMn3dbWpisqKnQwGJSx8BzpZx0Lo2/cuKHHxsY0Fkf0kjBRkQmQNSYkn8G8f/9eX7hwQXSQx%2bqkfVhckUlegMr%2baQAEPn/%2bbE6dOmXCt8SygvZaiyXv18%2bfP28%2bfvwofbwXDF%2bmyMUHS97okpcfNvT19Uk7b3spj/1cTbYx3JB7zJcvX8yBAwfkGs3eJfI%2bwa%2bzt7fXvHv3TtrtJay9Ric/vYT3EZOTkwZgiUex386D9xr2BpttDE16S3FxcdPNmzenvhDZMjw8/KW9vX0SHZMY4EKQi9V3McCFQW5ycrLb1dXlDgwMuBDkQriLFZZ6UVGRCy9wsUoujHH7%2b/vdq1evSjuAcqHchbFClIuJuQDGHRkZceEJMpbyAI6QX%2bfly5fdO3fuuFhlGQ%2bwhB%2bAyDPAdOHa7tDQkNvd3S3yy8vLXay48CJchT8QCFD2ZHp6%2biTK/0B%2bAPxKdXZ2Kvz%2bACXPnz8/DeWMNG/evJg8sWg2en4VhXWvBP0L4Cr5aa2lpDf4KSkpSfl/bOMP7j2NN5IWLFjw3T7%2b4HHfyI3sj9Q5k6xo/fzwI9YY/v4GRcaZZsjF9%2bMAAAAASUVORK5CYII=' /%3e%3c/svg%3e\" width=\"1732\" alt=\"hosts configured\" data-srcset=\"/assets/static/hosts-1.82a2fbd.da8545e90e1052bd56e10d51986f9bce.png 480w, /assets/static/hosts-1.cbab2cf.da8545e90e1052bd56e10d51986f9bce.png 1024w, /assets/static/hosts-1.7f37f3d.da8545e90e1052bd56e10d51986f9bce.png 1732w\" data-sizes=\"(max-width: 1732px) 100vw, 1732px\" data-src=\"/assets/static/hosts-1.7f37f3d.da8545e90e1052bd56e10d51986f9bce.png\"><noscript><img class=\"g-image g-image--lazy g-image--loaded\" src=\"/assets/static/hosts-1.7f37f3d.da8545e90e1052bd56e10d51986f9bce.png\" width=\"1732\" alt=\"hosts configured\"></noscript> </p>\n<p><img class=\"g-image g-image--lazy g-image--loading\" src=\"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 1732 1162' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-d2f6b1e668c1bcb15d3b4a35ee432353'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-d2f6b1e668c1bcb15d3b4a35ee432353)' width='1732' height='1162' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAArCAYAAADIWo5HAAAACXBIWXMAAAsTAAALEwEAmpwYAAAHO0lEQVR42u1aSWhVSRSthQgu7J0JmKG702rmOT%2bjZvqZ3k%2bi%2bZnU4ISkNfkSiYqICoK6dqULRdshSlQccI6z0Ug0iQtFxWEhCpJHiIusBMF61fdcU79/0o8MGmhsXuBwX9W7Q9V5t%2b6H3BJut1sUFhaK0tJSkZOTIwzDENXV1cLr9f4wqqqqBPzDN2IUFRUxysrKGCUlJfwesqCggPWKi4tZBxI24/kuLy/nMfxh7XZ6FRUVorbaK9werwhJLRdFJYYodeeL0sJcwUFDQ0ODEhIS/pwzZ44vJiammZ59U4H4%2bHjfvHnzfNHR0b7IyEhfVFQUS4rBc3oeUutpHUjMjeUberGxsTyGT8BONy4uzpdIMio2oTk4Is4XF5/Y%2bGt4aFB5aZFgpsPCwoozMzMVsany8vJUWlqaSk9P/yG4XC6VkZGh6CuqBQsWKPrC7Bty/vz5PJebm8tjSPqaPAed/Px8lrAdyzetnW0wp20CdfRzVlaWSk1LV4U5LuWrylRZGS4V9uvvZQvchhAUXAQFBRlYxP79%2b782NDR8TU5OlkSIpCC2wLvxQIElLU5u3LhRNjc3y23btjE2bdok16xZI1esWCFbW1vlli1bpM/nY9nU1CTXr1/P%2bpAbNmyQdCz/FVOPW1paZF1dncR6Gxsb5bJlyyR9PEkblpTZrIdnSn8Zn5Ih13kzvw79VSkr8tPkzKDfKsKy64TweDwiODjYoFRSlFYyKSnJopRhUPow9BggPYtSbcKgVPY/a3uK45caGCNWYmIi62IcaGsH7UP7BgJjBepGExLiYqwCV7RKSkpUYWHhlVU1RIBSCkXPuH//vrp9%2b7bV1tZm3bx5U927d09dvXpVXb9%2bXXV2dqo7d%2b4wHj58qJ48eaJ6e3snhL6%2bvhHPiHPt2jWWly9f5ueOjg5169YtjnXhwgXV1dWlHjx4oHp6ekbY2wE6E11Lb1%2bf1dXdY61cuVKFh4fXVFNhZAIWL15sICht0Gpvb7fu3r3LBJw9e5ZJ6O7uVpjDIrEwLGpSgYcXCuJAIjaOzQIXL15Uly5dYhKw%2bVOnTnEsxHn8%2bPGkYowXn9ZtPXrUbdHRQrbX7ty5Uwg6l4Kqv0FHQdFPiUWFxaKfIUVniAsTakN9fb2iNFJUlRlz5879blDlVpTafkmVn6V%2b1nHw/kfi2IH8WhERERb9NKJ41l65ckWIpUuXipCQEANVlQqGRcUFUBq64kLi1wHyR6H9QNphKmLYgQqzlZKSYtXU1OCXqJYyTiD9mQCqpAovh6HskJqa6pc/KbjI2hIwvDFrGLYOfvLNT4wAZMBPvkmHAIcAhwCHAIcAhwCHAIcAhwCHAIcAhwCHAIcAhwCHAIcAhwCHAIcAh4Ap%2bbf4/5oArZCWljaCAN2tsXM41js7vf8aLpfLSk5OHklAfX29mD17tkHMqIBWOJ4ZaJtjrAE9yPj4eH4HDNvynJYaGENf9/1GQ/uwezcW9LomaWehP%2bj1ev/pDfb29uKShLFv3z517Ngx68yZM9bp06fV4cOH1ZEjR7hDTHPctT158qQ6ePAgy%2bPHj6vz589zR/fQoUOqra2N544ePara29vViRMnGPABe3SC0WlGO1wDXWLtI3AeGK07Gugonzt3jqWdDZ419FxHR4dF%2bta6deu4O7x79%2b5v7XFKCePt27fq2bNnVmdnp4W2NByjdY37ABijXY6ePrHGresbN25w2/zFixfq48eP6sOHDzzWdwsA6EAfrfc3b96o58%2bf%2b0Gx2AZ/Q0ND7AfAO8iXL1/6x6MB24GBAbaFDLTROnge7YOeradPn3J7nLKhduvWrd8IWL58ufHq1Su1efPmrwsXLpREiKSjwddQkpKSJJ1jvnoC4OqLlpSCktJJvnv3TtKGpWEYcvXq1TxXUFDA11fwTHVGwi8VWvYHSUdCrl27Vg4ODkrKGllUVCSXLFkia2trWReSjhbr4wqMBmxp8XLXrl3y06dPLHEdprq6WlZWVnJMj8cj3W63LC8v96%2bFjiLb4hYM6XINoA/8jYCGhgbP%2b/fv1fbt2/k%2bADlSuC%2bAS0gYD3eORwBFBeeQAvJXQHaUlZXxWF%2bEwqUr3DOgDfEzbGCLVjXOZGtrq/ry5YvCkYMNbBctWsS6AOLbFVTExfFCJhDhrIsY9AFURUWFys7O9uvqC1O6sYt6hTi0rzo6Qt8IoIk8St%2bBlpaW/qysrH5yYlJws6SkxKSNmMSeSV/CJGM/iBSTNmFCl46ESfXDJNZNyh4zPz/fpMAmLYj9EKHsS/uAbVRUlLlq1SqTUtLcu3evmZOTY1IWmEQA6xOZ7C8wJuxhGxkZaR44cMCkumTSZk36WGxDJJhE%2bIi1Yu3altBPGdBPfgeJEM%2bOHTuEaGpqEvQ3k/AHIXqymDZtGsvp06dP2nbGjBnR3xNzCjCP8MuePXsE/71%2b/ZolssEOE/0LtPn8%2bfOk/Ew2tn5nZzNr1qxx7fTf3/Yy9%2bwASr3pAAAAAElFTkSuQmCC' /%3e%3c/svg%3e\" width=\"1732\" alt=\"hostname configured\" data-srcset=\"/assets/static/hosts-2.82a2fbd.1466bf93cfdc19461ae98036fbcabb91.png 480w, /assets/static/hosts-2.cbab2cf.1466bf93cfdc19461ae98036fbcabb91.png 1024w, /assets/static/hosts-2.7f37f3d.1466bf93cfdc19461ae98036fbcabb91.png 1732w\" data-sizes=\"(max-width: 1732px) 100vw, 1732px\" data-src=\"/assets/static/hosts-2.7f37f3d.1466bf93cfdc19461ae98036fbcabb91.png\"><noscript><img class=\"g-image g-image--lazy g-image--loaded\" src=\"/assets/static/hosts-2.7f37f3d.1466bf93cfdc19461ae98036fbcabb91.png\" width=\"1732\" alt=\"hostname configured\"></noscript></p>\n<p>For my master I went with hercules-00, hercules-01, and hercules-02. The nodes followed the same naming scheme up to hercules-05.</p>\n<p>Once all these changes are made on ALL of our drives we can insert them into our Raspberry Pis and boot them up! Once they are all up and running we will need to ssh into them all and do a few more things. Here we have some choices. We can either do this manually or use a tool like ansible. We are going to go through it all manually so we can understand the steps in case we need to troubleshoot.</p>\n<p>Ok, let's ssh into our first Pi.</p>\n<p><img class=\"g-image g-image--lazy g-image--loading\" src=\"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 1732 1162' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-fcb0e41fd3d96865d52062c828ac9834'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-fcb0e41fd3d96865d52062c828ac9834)' width='1732' height='1162' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAArCAYAAADIWo5HAAAACXBIWXMAAAsTAAALEwEAmpwYAAAKTklEQVR42u2a22/TyRXHR%2bJ596GiLCQBQrnk4jiO7Z/t2LnbMckvN2LHCSSAQEARBASvXFbhgaqwRagvqDy076itEPCw/ZOoVpX6F/D7Tc9n4mP91klIFtLVKkuko5k5M3Nm5nsuc%2bYXm1KpZIrFopmYmDADAwPG931TrVZNpVLZdTpz5owZHx83Y2Njplwum9OnT7tycnLS7WF6enrHsubn5w171znIYO%2bbjZuZmTG1asWUpiqmNT1txk/7ZqI0aiaKw8YdvK2t7UBvb%2b/vT5w4sdrd3X1T6qv/D4rH46udnZ2rp06dcmVXV5crZU3Hi8ViP0lWR0dHYw4yoM3G9vT0rCak7Iz13vzmdz2rPfHEtaNH2g5MT4wbp4HDhw%2bX%2b/v7raBph4eHred5NpvN7iplMhmby%2bXsyMiIFW27krWgwcFBxysUCm7cTmXJ3u3Q0JBrj46OOpnUIc6gsvL5vE17GVscyNib8/02n8vYw0ePTQ6P%2b8YMDg2aAwcO%2bENDg/bly798WFlZ/pDoSwS5/lyQzWYilP1kks0G6XQ6ENMP7t27F6ytrQW3b98OVldXg7t37wbXr193pbhIIJveVh5jkHnr1q2gVqsFiUQiuHLlSrCyshKkUinXJ%2b7VGFetzAexvkxw80z2w3//Oh3MjHrBV9%2b0zxwpLBmzVF0xrYfafC%2bVs5l0LsikcqGXzApJmcquE23PC9OpVCgHcZRMJh1PFnTU19fneNqGaDOWPkrZfCgbcsRc2WCD6I%2b2d0LIE8t1spBJW/toR8d6XibMZ71wZiRt06mkbW1rm52Zqxhz5Q9j5kjHb/3cZIfNne4Ms2OxMD8r9clOmx3tsbnxbttfitt01rMSPMTM1k1WAo4zLUx3amrKivasBCVniqJpKxpwfRJYrWjJzRFNWQHGCiBWwHFEXdtRPuOgaL2ZFx27mYxof9rNTYex3mRYLJbYy8J3T58ac%2buPFdPeecgvTMVsvhwP%2bye6wvx0px2qdtlcuVtA6bID0jc4MmRHi2UHwOzsrJXo6g46NzfnDkh7YWHBASMR2UrkdTEFEOBT4rf4JH4LMLSp4/u0iQeACl/9WOtiIW4uPOKVxin1eXi0ARoZ8JBLnbEOBKwxkQgXFxdZq/b99/8y5tmTP5vuzphfGivbmam58GxtOSyOlu1kedou1c7Z%2bbmqnZ%2bt2lk5UKV%2baPE1K7eHOxQa54Bon0OrRbAIC9MHX65WZyUEqhs3bli5opysS5cu2eXlZXv%2b/Hl77do1Bwh9V69edXJYh37AAVyAQhZ9gA4P%2bSiF%2bsWLFxtBln0uLS25OYyRdihjwrNnzwJY7dWrV8Z896enRq4iv7pQtZVqJSwMFEIv41kvkxb0JeoKSUBsoKzRVQkNqWYpo/1oTSOxtulXjdS10pinvKjmta7zmjWvfSqbNjKit4nOEWtwsQaLFVBqb968MebOnTumvb3dB2nxWw1sTuBmvhflbzZGebohrUepmbfVmOY1turbStYmMSSUvCDEgsRVau/evTMuWzp06JAvHVaSChe5CVYQPC0JLgihrcEFPkQdPmOigY4%2bnaP9Oj5aj7Y1iEXH65oqJypf50bX133RbgKWs4W4JQC8fftWYsCzZ0YyMp%2bAJX4SimmEBDH8CR51DXgEFdr4u6S0zu8IgvTRZjy%2biRlS0iYI4dOMZS58fJJ4gH8iC5/VPk2MWF/jCnXWph8ecQIeMvF12vSxF5XDPOKTWu2WANy/f99ICuyTVQGAbCBkcyxAsEAgE3ARFkIwPIhxLMqmuPboY3HGIY8%2bNqE3AgQYAMA4fJFxCp4GUZ2jh9KAiyJYB4BUAQAGj/nMo2Tv8FBMk4tsBODJkycuCDJRFgsJFBpVOSTIK9pspg6UA4c6fRyEhagzhj42xlwWo2RzehMAgMrHCjgYfAWYOVgOffAVQMDjRgAQvRWQy42DrKjbqks0xYWNADx69MjIQ8QFQVkslI2FoMdiLMyB2HD0bgd9tMAh6FNXYUMQB6IPDSpAyIcAjbHIhTgg8xmDfI3iUd%2bN3iDK0xuhOXhuE3A3AiA5uDl27JiPiXELyOFC9Wk2ChhcIRwUtOHjd1yJ1Nkwc3ED5jGGORxWM0M9OBoGOObDAyTNGjWWoPmtIvxOaJs5GwGQTZiDBw/6cgO4W0CejpCt3wpWnpiN6CpPUKt9BBetw6fUNiU85lLXEp6OheBH16GkX81Xr7HoDRS9JaKmvkPQNgLw4sULI5vzMUHpCMVsQzVtBp47d85pSgMNmtKnK3zGaGTH9LEa%2bGj78uXLLh6oj5KZ4VpoX7NASvyaDA4iI2QO7oDl6Q2B5agrIZt9qEtS4iY7sJiNADx8%2bNCcPHnSr/t7KAIdACwMTw%2blZs7CGmHV3zXFBQhMHWq%2bMulnDnI4DIfTB5W6mrqdjtFcnnm4mroY/OjDC9lbJV3bAvD8%2bXMj5ufX7%2boGAGyIqM1m9IHDJtAWAjgk6HN4vQ45lD6OiBFq0uomWleXkvzD1XEPHUtJO5rYaLvZBaIJ0Ce7wMuXL50L1O9cbgCSoUaEVmvgwBcuXGi87ABH72TGoCksBs3oXawPFa4sgIM0wGI5uJeaM3U0iiK4/jQRYiyuQX07DX%2bSBcjLzBw9etRnk7K5UMwr1E9MHATzwuTQKAeGjyVQ6tMVwJjDYbRNHyWEZaipRp%2bteoswRvvq%2b2jIYG39rvApt8K2APDVVN8CPBTqX3UaUT/6FtBITr/yomYYzdu1riYbzfM1umteH/2QEZWn7wSVudnD6LMB4EkoAcQnQpMG19Nhpwn8XrM2TXX1Da4pLyarKSsug2ugTRZhLlomJiALi0K7m3390fpnmvhPB%2bDx48emo6PDr19v7jGk0Ra/BwiN7JrPayJDqYmPRnxNafWmwHzrT%2b1G1NZkCID0S7BG/F066M4BePDggXsMAcDCQtUBMDs36zRbW6ytH6Q4tv5lZ3b9ZVYX0HiM6K2AP2vg5DBYi6bU%2bqpTi9AcgjF6xzOWedtZwq4CsFQ7a1paWv1kQswwkQpTCS%2bknurj66lnXT2Ztsk%2biQtxMddkymbIwVNixuKb8pASjSUbWouacvOHy%2biHlY%2b5wM9qAcuXFkzr4RY/M5CwuWJPmCvFQupeoc9mBnptdiQu9YTNSLu/HLPZAoKyNpHut8Wyb7/99qEcZvc09jnvgE8C4Obf8qY98Ru/cOakHaicDAcXj7vP4vmpznWagTpsbixuC5Xjdrict5nsgO3x5OlaOWf/%2bY%2b/216xhN3c6M9qAZJ3m9bWVh8zF3IugPnX2z%2bmhOfKtDN5tJ7aaQ7%2bS6GPAFD/bi6HguzHKNX00XEX7udfDgCpbQHY/OvrnrGA1Pr//%2bwepS8AfAHgCwBfAPgCwMcA%2bMBPTPYq8TMdfk6j/xx1AAgaADC1h7X%2bo3%2bm8Air/0Bi8fXr18b9zq6lpWVEkPlB6H2d/r1H6X08Hn9fKpX%2bIxYxtba2Zsy%2bffuM/H0ldFyo61dCp4S%2b5ou42b9/PwC4b4PWWrPX/5rP%2bD9yoXbamfrxAQAAAABJRU5ErkJggg==' /%3e%3c/svg%3e\" width=\"1732\" alt=\"ssh'd in\" data-srcset=\"/assets/static/ssh.82a2fbd.a7d33af447477a3c5f98884ac8e3b7c6.png 480w, /assets/static/ssh.cbab2cf.a7d33af447477a3c5f98884ac8e3b7c6.png 1024w, /assets/static/ssh.7f37f3d.a7d33af447477a3c5f98884ac8e3b7c6.png 1732w\" data-sizes=\"(max-width: 1732px) 100vw, 1732px\" data-src=\"/assets/static/ssh.7f37f3d.a7d33af447477a3c5f98884ac8e3b7c6.png\"><noscript><img class=\"g-image g-image--lazy g-image--loaded\" src=\"/assets/static/ssh.7f37f3d.a7d33af447477a3c5f98884ac8e3b7c6.png\" width=\"1732\" alt=\"ssh'd in\"></noscript></p>\n<p>From here we have to do a little bit of setup. First, let's do our usual housekeeping stuff and configure locales with raspi-config and of course fully update our system. Once this is done, we need to setup iptables. Raspbian is using nftables instead of iptables and k3s doesn't work with this. We need to execute the following on every one of our pis</p>\n<pre class=\"shiki\" style=\"background-color: #ffffff\"><code><span class=\"line\"><span style=\"color: #24292EFF\">sudo iptables -F</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">sudo update-alternatives --set iptables /usr/sbin/iptables-legacy</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">sudo update-alternatives --set ip6tables /usr/sbin/ip6tables-legacy</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">sudo reboot</span></span></code></pre>\n<h3 id=\"finally-installing-k3s\"><a href=\"#finally-installing-k3s\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Finally installing k3s</h3>\n<p>The part we have been building up to... installing our cluster! I promise, the hardest part of this is over. This part is just copy, paste, and go!</p>\n<p>Ok, let's ssh into our first pi, the first master we are setting up and we need to execute the following:</p>\n<pre class=\"shiki\" style=\"background-color: #ffffff\"><code><span class=\"line\"><span style=\"color: #24292EFF\">sudo curl -sfL https://get.k3s.io </span><span style=\"color: #D32F2F\">|</span><span style=\"color: #24292EFF\"> sh -s - --write-kubeconfig-mode 644 --cluster-init</span></span></code></pre>\n<p>We just need to wait for this to finish and when it does we can move on to the next Pi.\nMy next Pi is my second of the three masters that I am setting up in my cluster. Luckily the command I run on this will be the same as what I run on the third. We need to grab our server token from the Pi we just setup. To do this we just execute the following:</p>\n<pre class=\"shiki\" style=\"background-color: #ffffff\"><code><span class=\"line\"><span style=\"color: #24292EFF\">sudo cat /var/lib/rancher/k3s/server/token</span></span></code></pre>\n<p>Now we just copy that string and paste it into our command for our remaining masters here:</p>\n<pre class=\"shiki\" style=\"background-color: #ffffff\"><code><span class=\"line\"><span style=\"color: #24292EFF\">sudo curl -sfL https://get.k3s.io </span><span style=\"color: #D32F2F\">|</span><span style=\"color: #24292EFF\"> K3S_TOKEN=</span><span style=\"color: #D32F2F\">&lt;</span><span style=\"color: #24292EFF\">TOKEN STRING</span><span style=\"color: #D32F2F\">&gt;</span><span style=\"color: #24292EFF\"> sh -s - --write-kubeconfig-mode 644 --server https://</span><span style=\"color: #D32F2F\">&lt;</span><span style=\"color: #24292EFF\">IP OF FIRST MASTER</span><span style=\"color: #D32F2F\">&gt;</span><span style=\"color: #24292EFF\">:6443</span></span></code></pre>\n<p>We can go ahead and run this command on the next master also.</p>\n<p>Now that the master nodes are ready we can check them by running</p>\n<pre class=\"shiki\" style=\"background-color: #ffffff\"><code><span class=\"line\"><span style=\"color: #24292EFF\">kubectl get nodes</span></span></code></pre>\n<p>We should see all three of our masters listed like this:</p>\n<p><img class=\"g-image g-image--lazy g-image--loading\" src=\"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 1438 162' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-231a9b13d62275e3b595f5fa68b39deb'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-231a9b13d62275e3b595f5fa68b39deb)' width='1438' height='162' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAHCAYAAAC4NEsKAAAACXBIWXMAAAsTAAALEwEAmpwYAAACiElEQVR42l3VR05DQRAEUF8IkTHZgMmYaJsgMhJr7r9q9EYq68uLr57U1TXVNXbv5%2benvr%2b/6%2b/vr66vr2thYaFWV1drZWWlfcvLy%2b2ztrS0VMPhsKbTab2/v9fDw0M9PT3Vy8tL219cXKyLi4uC%2bfj42L7JZNL2ghG84HfX5vdSPzE1Li8v6%2bvrq15fX2tjY6Pt47a/v994fX5%2b1tvbW43H4zb//f1t%2b/M14PUQPj4%2brrOzszo4OGiA/X6/RQd2dnZqe3t7RlQRIjg7GAzaWMz%2b1tZWnZyc1OnpacOEbQ2mohnnkyNubm7O4vr6%2boyD8%2bGUGnt7e03oq6urxi1iOaf24eFhHR0d1fn5eeOJB0xY8EVzOT1dohQwkQt0zdjluIPSDkd9Hb67u2sqc0O3uwS6ublp6yI8LkFCLlz46j4/P7d1c%2beSd3t7Wx8fH23dWMQvTsBrNBq17uLn4jqsWff3900AuBxKoC62%2buriKaenU7oElGq%2bzAFSGmCeAEUBihRWyF6eDXVhyM%2bXrshRz5q5OnFUd18Mh4ztx%2brWXISg6qU2IZzlEGeIxjlxd%2b5q7m7E7AFK50UX1t0oSX1q5/25TN6/ty8nAgD0HOTKg0N5Z2JJHbUfJyBlni7BFbkuY9FlIwAOXMglLJ13rduwXFIt%2bPjINbeHE/cRqTnAZrf7xkgZ7%2b7uNgIKRgDgQCgql2DzDiCcHB8ciou6bWw9dXQi59KlWNiZrhPiQmdxkJffljhAPt4uzgFra2sz1xFBjjhzAKCuAxTWJaojIkqI%2borrfP4B8ivfdUAwOScdjCXNsyaXiM6LOOiS%2bmoYW593AFG8Z/m63nUAbBxdGh4%2bmuRe%2bU3CLQL8A2fvIK3lo0KTAAAAAElFTkSuQmCC' /%3e%3c/svg%3e\" width=\"1438\" alt=\"Master Nodes\" data-srcset=\"/assets/static/master-nodes.82a2fbd.bbd1bf753617aad0eaf3ab7381e83574.png 480w, /assets/static/master-nodes.cbab2cf.bbd1bf753617aad0eaf3ab7381e83574.png 1024w, /assets/static/master-nodes.4a9fc61.bbd1bf753617aad0eaf3ab7381e83574.png 1438w\" data-sizes=\"(max-width: 1438px) 100vw, 1438px\" data-src=\"/assets/static/master-nodes.4a9fc61.bbd1bf753617aad0eaf3ab7381e83574.png\"><noscript><img class=\"g-image g-image--lazy g-image--loaded\" src=\"/assets/static/master-nodes.4a9fc61.bbd1bf753617aad0eaf3ab7381e83574.png\" width=\"1438\" alt=\"Master Nodes\"></noscript></p>\n<p>So, on our first master we need to grab our node-token. We do this by catting the node-token file</p>\n<pre class=\"shiki\" style=\"background-color: #ffffff\"><code><span class=\"line\"><span style=\"color: #24292EFF\">sudo cat /var/lib/rancher/k3s/server/node-token</span></span></code></pre>\n<p>We just copy this string and then ssh into our nodes and run the following:</p>\n<pre class=\"shiki\" style=\"background-color: #ffffff\"><code><span class=\"line\"><span style=\"color: #24292EFF\">sudo curl -sfL https://get.k3s.io </span><span style=\"color: #D32F2F\">|</span><span style=\"color: #24292EFF\"> K3S_TOKEN=</span><span style=\"color: #D32F2F\">&lt;</span><span style=\"color: #24292EFF\">NODE TOKEN STRING</span><span style=\"color: #D32F2F\">&gt;</span><span style=\"color: #24292EFF\"> K3S_URL=https://</span><span style=\"color: #D32F2F\">&lt;</span><span style=\"color: #24292EFF\">IP OF FIRST MASTER</span><span style=\"color: #D32F2F\">&gt;</span><span style=\"color: #24292EFF\">:6443 sh -</span></span></code></pre>\n<p>We can then go back to one of our master nodes and watch these come online!</p>\n<pre class=\"shiki\" style=\"background-color: #ffffff\"><code><span class=\"line\"><span style=\"color: #24292EFF\">watch kubectl get nodes</span></span></code></pre>\n<p>Once all show up as ready you are good to go!</p>\n<p>There is one last thing before we move on to setting up our workstation. This is optional but I hate seeing the worker nodes not say they are workers. We can fix that.</p>\n<pre class=\"shiki\" style=\"background-color: #ffffff\"><code><span class=\"line\"><span style=\"color: #24292EFF\">kubectl label node </span><span style=\"color: #D32F2F\">&lt;</span><span style=\"color: #24292EFF\">node-hostname</span><span style=\"color: #D32F2F\">&gt;</span><span style=\"color: #24292EFF\"> node-role.kubernetes.io/worker=worker</span></span></code></pre>\n<p>Once we do this for your nodes you will have something that looks like this</p>\n<p><img class=\"g-image g-image--lazy g-image--loading\" src=\"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 1732 1162' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-e1ca63d7cc5b286a3ac8b5817779244c'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-e1ca63d7cc5b286a3ac8b5817779244c)' width='1732' height='1162' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAArCAYAAADIWo5HAAAACXBIWXMAAAsTAAALEwEAmpwYAAAHcElEQVR42u1aW28bRRQeqc/wgKKUxkkLhcSJ75fdtR0nvl%2bythPHjmPHlAbC5SGWKsofaJvLQ5EoEqJCQrz2tWpf%2bpeKEBK/oLuH80080dZ1UrulDwRHOpqZMzPn8s05Z2atiFwuJ0DlclmsrKwI0zRFs9kUjUbjnVClUhHFYlEUCgWRzWZFqVSSffA3NzdHloO12Fer1eR4bW1Nyhi2DmtazYbIVxrCFa2KQskU5XxGlHMpIR2fnZ2dDgQC387Pz/c8Hs8%2b93vvilh%2bb3FxUdLCwkJvaWlJ9sH3%2b/0jy8Fat9vd8/l8p3K9Xu/QtVgT5HbRG9i/fN3X8/mD31y7OjtdLReEPI25ubliPB4nRpBSqRRpmkaGYfzrpOs6JZNJSqfTlMlkiCOAVldXZR/8ceTEYjFi2%2bV%2b8CADctU8fECLcSKRoKimUy6p0/5mnBIxneaufbyWKphCpFKrYnp62lxdXaGHD3950e3uvAiFglYsHrMMQ3eQ8dYUjUYtDkvr1q1bkg4PD2V7%2b/Zt6%2bbNmxYbOpIcdsxiAKxer2dtbW1ZoVDI2tvbs7rdrhWJROQcp9bpumZj0/KGdGu/brz4%2b/eqVcto1nuXP6pdXW4L0W5%2bJlxXZk09EiNDi1t6NG5rYYMpZmsR44Qw1jQ7Go0wRW1WYofDYUnog4d59EHoY44Nky3m2RhJmDuRFbXZOJsdkmM1Pw5hL0eu7EMWyDnnXKtpup0wNLuWjlI0EibX7Ox6baMhxJeHGTHnnjKN8gLpBbetpZfsxLqb4uYiGRkfxQoeiuf9pHHYFIomh1qauGgSFx0Zggi9fD5Py8vLsgUhnbCGiw9xjSEursRAEDtNDNBYhH2gQR6D%2bxINrhlOUdsbCNuwLRgMbv1w/74Q3//YEdc9LjO9EaLshm5nNiN2orpIyTqDUPJSvOyhZNVH8WSCMrkSO10grqzU6XSo3W5TtVqVuYfasbu7K50GKBsbG1Sv12ULhTAQeQkQRiEYjPUAFjTIQ81QLWgU2RpHHae3vb29zbUj1Xr27JkQv/78m/D7Ama38zntffG1vdVo235viIK%2bCAV8jG4gQn5PUCrnSipPFE7zdSmdW19fJ67IstDw9SkB4DyXTnOFl3NcieUpqRbEJyAJwIDvXKNOGEDeuHFDAom1sAHFj/P%2blA9nOP/l3GA0OCOuD4LNcmzYyaC1njx5IsTh0YFwuxfM9XWEa8kuFAt2sVTkEC9TJpuhXD5H2%2b1tWU0hHE4rAOAs%2bFCAigunMY/0AHEhklVa9dEiUuAYxgAT0aPmkD7g4UShC6CCj2jjO186Bj3gIa2wFjoxh3TEGHO4XQYcfwkAAMj7W0%2bfPhXi4OBA8H1s4iTZIZuNsXEdwjkYBqNarZZ0FKcAPpBHGqBVKMMwGAAAYAxkACQ4iHXYp%2bZgJOYVWNCNNeiDB9CgC0BADyIK%2bwAK7IBcAKlAwxxsxcFADgAZ4vxwAI6OjjgC3GbfSJudeAUAzCkAYCyMOgsA8J1pAgDglAIAxmEeOiALOs4CAHv5epQyVQrADvVegXwFgNKpdIwNQD%2b0ZQSo8IZgKMAJOAGAsarAOQGAM%2bChhQwYqgqiMwKcxmKtiioFAJxTACBfIQtFTukZBoCKANg3FgDOFHACAGEQjBwDAFAMo5ThwwBQKQBHsA7GIYzBVzmP/FTXJcaqxR7oQh/VHbrgJACALKeewRSAw5Cvogq8sSIAAJyXAjDivBRAccLdD6CwT82jYg9W/WHjwb6q6IgAXLXQibFKAQCiIgDOq7R6oxpwfHwsU8AZAQBARQCEQaiKgGEpAADgrLoh0IJwkmcY8lqCTNwCsAW64KAqgufVgPFT4PAkBWq1Kgs2GYAipwCqNAsv5Cmby/K92yS9fw3ihJUikBMAjFUYYh0ccN7H4wKA9AGQcBSpo67BYSkAUpE7Vgoc37sv3POLZqPeonqtYZulql0z%2bXSrDVorVaiYL1O71ZWK/X4f1Tm0d3Z25NWI1HCmAHg4LfChBACoJ/C4BLDhNB46AEE9bhABABjFVaUpTl89zKAb45EB%2bOqnuLjq%2bcBcrs8TP4Ht%2bNqSvbL9KSUbPF7j74CKmxLmknwKF8vI7zo9evTo9JNz8HSdD5A3PX3nvmGvumHyB/ln6H4VgN3vNsTc9Q9NI%2bvjjx%2b/DYrlT74B9NUAeBTP%2bUmPGbScTEnE7969d3otDXP8bZwf3P%2b68XnrRnoJtptdMXPFZYaDvCHEn7SgoEbhgIaxpDCPI2GcxkkF93q9Z721X%2bvImwIwrqyRU6Cz0xEul8uMRLEh0v/ml/0BcnxVDQn9/wgNAaDTB%2bDEmf4PHH2nI%2bOF5QUCIEoXlCYATACYADABYALABIAJABMAJgBMAJgAMAFgAsAEgAkArwLwAv9iclEJ/6LDAFj45fgUAEYDAFQu8Km/9FMeftPET%2b2pVGr78ePHQlSrVTEzM5NmZP5ket6nPy4oPff7/c/z%2bfxfHBGVO3fuCHHp0iXBf%2b8xfcK09D%2bhBab3Hzx4IMTU1BQAkP9RSUTiov8N%2bvgPXX9IMx/K%2b58AAAAASUVORK5CYII=' /%3e%3c/svg%3e\" width=\"1732\" alt=\"Labeled Nodes\" data-srcset=\"/assets/static/labeled-nodes.82a2fbd.1ea7a9efb693a79eebe9713a24a10221.png 480w, /assets/static/labeled-nodes.cbab2cf.1ea7a9efb693a79eebe9713a24a10221.png 1024w, /assets/static/labeled-nodes.7f37f3d.1ea7a9efb693a79eebe9713a24a10221.png 1732w\" data-sizes=\"(max-width: 1732px) 100vw, 1732px\" data-src=\"/assets/static/labeled-nodes.7f37f3d.1ea7a9efb693a79eebe9713a24a10221.png\"><noscript><img class=\"g-image g-image--lazy g-image--loaded\" src=\"/assets/static/labeled-nodes.7f37f3d.1ea7a9efb693a79eebe9713a24a10221.png\" width=\"1732\" alt=\"Labeled Nodes\"></noscript></p>\n<h3 id=\"setting-up-our-workstation\"><a href=\"#setting-up-our-workstation\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Setting up our workstation</h3>\n<p>Yes! We have a working k3s cluster on Raspberry Pis! Let's setup our workstation so we don't have to ssh into anything. First things first, we need to install kubectl on our system. So, if you are using Windows you will need to verify whether or not you need to enable WSL. On Linux it's a one liner...</p>\n<pre class=\"shiki\" style=\"background-color: #ffffff\"><code><span class=\"line\"><span style=\"color: #24292EFF\">curl -LO </span><span style=\"color: #22863A\">&quot;https://dl.k8s.io/release/$(curl -L -s https://dl.k8s.io/release/stable.txt)/bin/linux/amd64/kubectl&quot;</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">sudo install -o root -g root -m 0755 kubectl /usr/local/bin/kubectl</span></span></code></pre>\n<p>Awesome! Now we need to copy over our config from our first master. You may be wondering, why do we keep using the first master? Well, that's because etcd takes some time to replicate so we are going with the source to ensure we have the correct, up-to-date info.</p>\n<pre class=\"shiki\" style=\"background-color: #ffffff\"><code><span class=\"line\"><span style=\"color: #24292EFF\">scp pi@</span><span style=\"color: #D32F2F\">&lt;</span><span style=\"color: #24292EFF\">FIRST MASTER IP</span><span style=\"color: #D32F2F\">&gt;</span><span style=\"color: #24292EFF\">:/etc/rancher/k3s/k3s.yaml </span><span style=\"color: #6F42C1\">.</span></span></code></pre>\n<p>You can decide where and how you want to store this file, I create a folder in my home directory called .kube and put the k3s.yaml file in it. Then I export it and add it to my .bashrc to ensure it happens automatically.</p>\n<p><img class=\"g-image g-image--lazy g-image--loading\" src=\"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 1732 1124' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-686969a2de5859c39daaf2dd779a6526'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-686969a2de5859c39daaf2dd779a6526)' width='1732' height='1124' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAqCAYAAAADBl3iAAAACXBIWXMAAAsTAAALEwEAmpwYAAALfklEQVR42t2a20%2bb2RHAvyYiCYFcNgoPiaq0W7xcfQNztQFjDNjGGLDBQAgh2baJ0kRRkoc%2b5bH0JZWqqn3Y/BmV8pdU6lOlVaXW0kbatVpt%2b9acnM7v4PF%2bYbmYDdlEizQ6tznzzcyZ2znGa29v9zKZjJdMJr3p6WmvWCx6S0tL7wQWFha82dlZB%2bl02puZmamPC4VCw3TgMZ/PO36hubi46GjMz89/C5e1%2bfmCt1IqesPpRa99OO9lsxkvGAp78aF%2bzztx4sSZcDi82tnZea%2brq%2buO9O%2bGQqFjB%2bgGg8G78o273d3dd%2bV79T7A2lFo9fb2uv0656fBul8O5iMy/llX6M7VQOheOBwqnzp1qjnw8TXPk861gYGBr0WbNpVK2cHBQTs0NOTa4wKlNzw8bMfHxx2IxdX7AGuN0hJ%2bbSKRsFNTU3ZkZMTtnZyctPF4vI4HjuKPjAzb/tigzU8O2a25YdvXH6te%2buij9s7uoFNAoK%2bv76vt7W375MmTV6I5IwSNbDxWEIaMCGru3btnHjx4YJ4%2bferg/v375vHjxyabzTZMKxaLGTF58%2bjRIyOKdPw%2bfPjQzfX395uxsTEjLmZELre%2buFAwgZ6o%2bexX4//72x9yti8a%2baL1wqXuCz8Je15TU1NACFZHR0fRJh94rSAafKPdD/zrB/X9wJyc2IE4fty9vif8vhbh3Vj4r/dZ8/eB2MDg66nEgFlMDdpoX//LixfOd4fCkR0LEH%2bqip9Y8SnT09ND60DmLWPWaMXP3gBdpwXfP6fzzNEXX3QALVqxNAeRSERA2zchKgBOUOgoD729PTZco%2bP212js0Aq7PW/QrM2L39ue3pDp7AnB18vW1tZuoed5Z8%2beDQjzVfxndXXVlMtle%2bfOHbuxsWHX1tasRFLnazdv3rQSfd3c9evXHbAG/q1bt9jrYH193eGsrKw4HPYtLy87oaPRqBWz3FFSb8h2Az3BnbY3uNOvAesdXT12PJmyK%2bU1W1ou25//8q5dWV235bV1m8sXbCgctV2C21Xb07ULmIv0xRx9lBeNRszExDiH5RTQ2dm1YwEdHR1VNFhzATsxMVEPKAQYNKnBRoF17bNGUKKtuVIdHzzWODGsgbajs9PGB8N2KtFvp%2bL9dnI06oBxKr4zlxrts5MjUZtNjdil7KRdFLixnLflhRlbzKVknLTpsQE7PS4wtg/IWiY5LHRj8t1eFG%2bQU/h42dLSIgro9Lzm5uaABKcqURMF0EoQcZEZxiWouAirQjKPkJwiClI8BKWvgkOD02Yv2QWlMsdaUuY2V/L21krWbizN2F9cL9hP1/J2fWHK3i7n7C2B2%2bU5Wc/Zm6WM3SzN2mImYedTQ7aQHrYL0yN2cXrUzRVnD4O44MeFl6iNRKOGwxQFfHXp0qWQ8Od5586dC8zNzbkgKMwaGMasMVuJzDaXy1kpOqwUS87kpbBwAD5ClUolK8WIFRrOBaS4cftwG9ZxB3Cgg3tAH3pLpWWbnsnYsfGkzRcWnUknxibc3EwmZ7Nz8zaby9tkKu3aeGLcBkPi09F%2bGxTT75U%2bLhCK9NmwQGgP0PlwtM9KoAfIErhDta2tLSKH7XkXL14MCENVTkn83khF5k4WgfB5GGcOhSAoSmCNGME8wiAg8/RRwI0bN6ykJLfOHhS2tbXlxuCiGBSUyczuKEkUR386nXYKW1tblXUxc9lLLEkk4q7PwawIH7TEFvYM7AhWb/cDBFcFiAVUL1%2b%2bHHYKwAXELKsILaZstCDBlDFZNWnMHFAf949p1by12PHjsYaCdU7jBmO%2b5Y8n6lLEItbZq65Gnzn6kucdPi5bE65hBWABdQUQBCU6uxhAsaLEGBO1dTO%2bg08rMMc6oGsw6sfRqK94/r27%2b7RK0z/P2P%2bt3fSU38OUsK8CSIO4ACYrZmk4GczTX6rKJcOZHYDJYsrqGpg07gEecYIWWpoOOU0YPeyE3gbeygJOnz4dkI6zAEpKrZ8xN4RFUHwe/2aMrxPkEFKDo5qymje01DUaNdF3DQe6gExWa0hGfVFTFydMEENgAhzKoGUOC6CvZuoHv4k3ekrvRQHnz58PiCDOBUQQo8gqgJas9DlNV6LW/F777/t0G3GHA11AhHNZAAtogMie898F/HsPo7V7bS/c76QAXIAYoIUCLTFgNzH6WICO6SueH8d/F1d8HWvfv0fHKoTi6b1%2b9/d1zp%2bt9uKjYQVQCEmUd4WQRHNDRKeiowgiENIyR3FDUUMBopcerRYJdvQ3NzddqwUS2YOgCR0tlnSOAof4wV7wyRjEHC2y4IdsRFYBn%2b%2bBx5iWLMW3oMsadAnC/tTdcAwQ/69CUAgboj4fR7PEBQSkfEURyhBMsgaADyCIv2TWLMFeBb4BowiulSJ9FMuLFHQYM0%2bhw8nSMmY/fejDh%2bIzhib0mDuyBXAXQAEIIB/nVcURZRMEORU/IATzyijZQK0FZcEMpwIO86RDcP3KYw1hwEV4VTK0WFc6ZCOUyDzVIjR0P3wyjxLAV4Xsl3YPtAAuQzUzNcoEjPERmFDTRRC9/ICHMmiZA2rFlFOUZgp/RUfrryj9mUTH/upSK1A/Hf9%2bxfPv3y8YHlgJislX0SDvZzCP1rX40fqbMa4BcPJaF4DPXq0OUYA%2bXDaSSfbDO%2b5UuK8CuAyJAFUE4T0AV%2bBUOWWCEaeMQFgASgA4bcyOPqaMeeqtEFP21w1%2bJpiDlkZ81v33Cs0c/mKqdkd5IwsdVmAdSQFnzpwJhEIh9x4gpm70yRpz4rSJrJysVoMAgqIQTl3vA7TEDvbi%2byiPSK9%2bTouS6BO19fqsbsR1WemoMonyqlz4YE2f4lSRx1IKcxuEYO3JuR5wMG0NPKoAvQRp8GIMHkyqG9AHNEprTNGor27GWBWjbsceDgMeEFp/A6jdVepX6qOW1wcqgEqwVoQYvb9rvlYhVQAVTAMj6yoQuRxFMYfgqgy1Gn%2bcoE89wbpGca0d9roWv%2b0d48AgKD7rCiFcAMZgBiXgBvpASosSEAyGEUgDZa2GqCtATV4tBVrQ5BTBxz2Y1yivkV%2bj%2bnFeg4/0IIIF6G1Q0x7C6akzR5DjBBEAX9dT01NGUL0aq7nquOZm9VfjgzLAcd8eD3UBfQ/QpyiE18pMgyDCIrxWcfoIilWQDVAKluLP28dpxu9EAWQBfhmqmbhTwO4iw/9rjb8gId3txjvq68/39U6wrwJaWloCcoruLgDCcbzgfAgvQA0roLW1NSB%2bXcW3%2bTX1hyDsYQrgp0AUIGPPO3nyZACN1EzafPODZeRbpr/bHY5i7h/SkxhZr62tLSwxb%2bcyhAtgARLNjf%2bqq4%2bf/qupFkP6DuC/f%2b/1LtjIa833qATn4uVyuXrlypWwyCDX4fPn5C6QriYnk1IHLJpicckWFihwMrZYKopSdtKc3uXJBmQCCiFSntboegHSel6zyYfkKqoAKcW/UQCF0Fy28GW5tGZXSquvCnNLJj40bnKZvNnc2DJbNz41peKy2di4bmSjIVNIjW%2bkcHL/hcF/dvCSdPv2bcN1GitiDA4PLJubm/zWYGrxxf0Hx3uEVyhACrYv6wpoPtf0yehcz3%2bSi1E7lum3iUKvjRe67ehM2CYyAlmB5LCdTM3YqfSUffbsmcv/xAD9DUALnN3/58Opk153v9m9T4AvuVB9ffXq1Qj/WeadOt10LTbd/pfYdOBlLB3452CuvTKy9NPKwPQnlViqozKYba8MJvoq8bF0RUriyvPnzyviQ5WOjo6K%2bH9FFFGRoLInsBYMBuv9DwD%2bIfBSXPevYgGdcvP1%2bDvjeU0/FuiQnNCx056q9X9U63s/FPik1n584sSJZskETgHe59bz/i7wW4HfCXwm8BuBXwv8UeBPn296v/%2bz9f7933951lrvxYsXnuRS94%2bOkj0%2beJB45VoJ3t729ranf%2bKe3v8BLhoB1p8SZWgAAAAASUVORK5CYII=' /%3e%3c/svg%3e\" width=\"1732\" alt=\"bashrc export\" data-srcset=\"/assets/static/bashrc.82a2fbd.cfad81899ceec42e4ea1c627d02b077a.png 480w, /assets/static/bashrc.cbab2cf.cfad81899ceec42e4ea1c627d02b077a.png 1024w, /assets/static/bashrc.7f37f3d.cfad81899ceec42e4ea1c627d02b077a.png 1732w\" data-sizes=\"(max-width: 1732px) 100vw, 1732px\" data-src=\"/assets/static/bashrc.7f37f3d.cfad81899ceec42e4ea1c627d02b077a.png\"><noscript><img class=\"g-image g-image--lazy g-image--loaded\" src=\"/assets/static/bashrc.7f37f3d.cfad81899ceec42e4ea1c627d02b077a.png\" width=\"1732\" alt=\"bashrc export\"></noscript></p>\n<p>If we open this file, we will see that it points to 127.0.0.1:6443. If we run kubectl we get nothing! We want to ensure our HA master nodes area able to handle requests. How are we going to do that? If one goes down and we only have this file pointed to one we are going to be in trouble. We need a load balancer. We can solve this a number of ways, my favorite way is with a config file and nginx in docker. Here is what my config file looks like:</p>\n<pre class=\"shiki\" style=\"background-color: #ffffff\"><code><span class=\"line\"><span style=\"color: #24292EFF\">events {}</span></span>\n\n<span class=\"line\"><span style=\"color: #24292EFF\">stream {</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">  upstream k3s_servers {</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">    server 192.168.1.248:6443</span><span style=\"color: #D32F2F\">;</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">    server 192.168.1.249:6443</span><span style=\"color: #D32F2F\">;</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">    server 192.168.1.250:6443</span><span style=\"color: #D32F2F\">;</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">  }</span></span>\n\n<span class=\"line\"><span style=\"color: #24292EFF\">  server {</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">    listen 6443</span><span style=\"color: #D32F2F\">;</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">    proxy_pass k3s_servers</span><span style=\"color: #D32F2F\">;</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">  }</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">}</span></span></code></pre>\n<p>I created a folder called .nginx in my home folder and stored the file nginx.conf there with the info listed above. To deploy our load balancer we just run</p>\n<pre class=\"shiki\" style=\"background-color: #ffffff\"><code><span class=\"line\"><span style=\"color: #24292EFF\">sudo docker run -d --restart=unless-stopped -p 6443:6443 -v /home/b34rd/.nginx/nginx.conf:/etc/nginx/nginx.conf nginx:1.14</span></span></code></pre>\n<p>Now let's run kubectl get nodes and see what happens!</p>\n<p><img class=\"g-image g-image--lazy g-image--loading\" src=\"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 1732 1162' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-e1ca63d7cc5b286a3ac8b5817779244c'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-e1ca63d7cc5b286a3ac8b5817779244c)' width='1732' height='1162' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAArCAYAAADIWo5HAAAACXBIWXMAAAsTAAALEwEAmpwYAAAHcElEQVR42u1aW28bRRQeqc/wgKKUxkkLhcSJ75fdtR0nvl%2bythPHjmPHlAbC5SGWKsofaJvLQ5EoEqJCQrz2tWpf%2bpeKEBK/oLuH80080dZ1UrulDwRHOpqZMzPn8s05Z2atiFwuJ0DlclmsrKwI0zRFs9kUjUbjnVClUhHFYlEUCgWRzWZFqVSSffA3NzdHloO12Fer1eR4bW1Nyhi2DmtazYbIVxrCFa2KQskU5XxGlHMpIR2fnZ2dDgQC387Pz/c8Hs8%2b93vvilh%2bb3FxUdLCwkJvaWlJ9sH3%2b/0jy8Fat9vd8/l8p3K9Xu/QtVgT5HbRG9i/fN3X8/mD31y7OjtdLReEPI25ubliPB4nRpBSqRRpmkaGYfzrpOs6JZNJSqfTlMlkiCOAVldXZR/8ceTEYjFi2%2bV%2b8CADctU8fECLcSKRoKimUy6p0/5mnBIxneaufbyWKphCpFKrYnp62lxdXaGHD3950e3uvAiFglYsHrMMQ3eQ8dYUjUYtDkvr1q1bkg4PD2V7%2b/Zt6%2bbNmxYbOpIcdsxiAKxer2dtbW1ZoVDI2tvbs7rdrhWJROQcp9bpumZj0/KGdGu/brz4%2b/eqVcto1nuXP6pdXW4L0W5%2bJlxXZk09EiNDi1t6NG5rYYMpZmsR44Qw1jQ7Go0wRW1WYofDYUnog4d59EHoY44Nky3m2RhJmDuRFbXZOJsdkmM1Pw5hL0eu7EMWyDnnXKtpup0wNLuWjlI0EibX7Ox6baMhxJeHGTHnnjKN8gLpBbetpZfsxLqb4uYiGRkfxQoeiuf9pHHYFIomh1qauGgSFx0Zggi9fD5Py8vLsgUhnbCGiw9xjSEursRAEDtNDNBYhH2gQR6D%2bxINrhlOUdsbCNuwLRgMbv1w/74Q3//YEdc9LjO9EaLshm5nNiN2orpIyTqDUPJSvOyhZNVH8WSCMrkSO10grqzU6XSo3W5TtVqVuYfasbu7K50GKBsbG1Sv12ULhTAQeQkQRiEYjPUAFjTIQ81QLWgU2RpHHae3vb29zbUj1Xr27JkQv/78m/D7Ama38zntffG1vdVo235viIK%2bCAV8jG4gQn5PUCrnSipPFE7zdSmdW19fJ67IstDw9SkB4DyXTnOFl3NcieUpqRbEJyAJwIDvXKNOGEDeuHFDAom1sAHFj/P%2blA9nOP/l3GA0OCOuD4LNcmzYyaC1njx5IsTh0YFwuxfM9XWEa8kuFAt2sVTkEC9TJpuhXD5H2%2b1tWU0hHE4rAOAs%2bFCAigunMY/0AHEhklVa9dEiUuAYxgAT0aPmkD7g4UShC6CCj2jjO186Bj3gIa2wFjoxh3TEGHO4XQYcfwkAAMj7W0%2bfPhXi4OBA8H1s4iTZIZuNsXEdwjkYBqNarZZ0FKcAPpBHGqBVKMMwGAAAYAxkACQ4iHXYp%2bZgJOYVWNCNNeiDB9CgC0BADyIK%2bwAK7IBcAKlAwxxsxcFADgAZ4vxwAI6OjjgC3GbfSJudeAUAzCkAYCyMOgsA8J1pAgDglAIAxmEeOiALOs4CAHv5epQyVQrADvVegXwFgNKpdIwNQD%2b0ZQSo8IZgKMAJOAGAsarAOQGAM%2bChhQwYqgqiMwKcxmKtiioFAJxTACBfIQtFTukZBoCKANg3FgDOFHACAGEQjBwDAFAMo5ThwwBQKQBHsA7GIYzBVzmP/FTXJcaqxR7oQh/VHbrgJACALKeewRSAw5Cvogq8sSIAAJyXAjDivBRAccLdD6CwT82jYg9W/WHjwb6q6IgAXLXQibFKAQCiIgDOq7R6oxpwfHwsU8AZAQBARQCEQaiKgGEpAADgrLoh0IJwkmcY8lqCTNwCsAW64KAqgufVgPFT4PAkBWq1Kgs2GYAipwCqNAsv5Cmby/K92yS9fw3ihJUikBMAjFUYYh0ccN7H4wKA9AGQcBSpo67BYSkAUpE7Vgoc37sv3POLZqPeonqtYZulql0z%2bXSrDVorVaiYL1O71ZWK/X4f1Tm0d3Z25NWI1HCmAHg4LfChBACoJ/C4BLDhNB46AEE9bhABABjFVaUpTl89zKAb45EB%2bOqnuLjq%2bcBcrs8TP4Ht%2bNqSvbL9KSUbPF7j74CKmxLmknwKF8vI7zo9evTo9JNz8HSdD5A3PX3nvmGvumHyB/ln6H4VgN3vNsTc9Q9NI%2bvjjx%2b/DYrlT74B9NUAeBTP%2bUmPGbScTEnE7969d3otDXP8bZwf3P%2b68XnrRnoJtptdMXPFZYaDvCHEn7SgoEbhgIaxpDCPI2GcxkkF93q9Z721X%2bvImwIwrqyRU6Cz0xEul8uMRLEh0v/ml/0BcnxVDQn9/wgNAaDTB%2bDEmf4PHH2nI%2bOF5QUCIEoXlCYATACYADABYALABIAJABMAJgBMAJgAMAFgAsAEgAkArwLwAv9iclEJ/6LDAFj45fgUAEYDAFQu8Km/9FMeftPET%2b2pVGr78ePHQlSrVTEzM5NmZP5ket6nPy4oPff7/c/z%2bfxfHBGVO3fuCHHp0iXBf%2b8xfcK09D%2bhBab3Hzx4IMTU1BQAkP9RSUTiov8N%2bvgPXX9IMx/K%2b58AAAAASUVORK5CYII=' /%3e%3c/svg%3e\" width=\"1732\" alt=\"Workstation Nodes\" data-srcset=\"/assets/static/labeled-nodes.82a2fbd.1ea7a9efb693a79eebe9713a24a10221.png 480w, /assets/static/labeled-nodes.cbab2cf.1ea7a9efb693a79eebe9713a24a10221.png 1024w, /assets/static/labeled-nodes.7f37f3d.1ea7a9efb693a79eebe9713a24a10221.png 1732w\" data-sizes=\"(max-width: 1732px) 100vw, 1732px\" data-src=\"/assets/static/labeled-nodes.7f37f3d.1ea7a9efb693a79eebe9713a24a10221.png\"><noscript><img class=\"g-image g-image--lazy g-image--loaded\" src=\"/assets/static/labeled-nodes.7f37f3d.1ea7a9efb693a79eebe9713a24a10221.png\" width=\"1732\" alt=\"Workstation Nodes\"></noscript></p>\n<p>If you have that, you are good to go! Now one final thing before we close out this part. We are going to configure helm! What is helm? It's a package manager for Kubernetes. <a href=\"https://helm.sh/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://helm.sh/</a>. We are just going to follow the installation instructions found at <a href=\"https://helm.sh/docs/intro/install/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://helm.sh/docs/intro/install/</a>. I went with the script method and had to run the installer with sudo. Depending on your workstation the instructions might vary a bit.</p>\n<pre class=\"shiki\" style=\"background-color: #ffffff\"><code><span class=\"line\"><span style=\"color: #24292EFF\">curl -fsSL -o get_helm.sh https://raw.githubusercontent.com/helm/helm/main/scripts/get-helm-3 </span><span style=\"color: #D32F2F\">&amp;&amp;</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">chmod +x get_helm.sh </span><span style=\"color: #D32F2F\">&amp;&amp;</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">sudo ./get_helm.sh</span></span></code></pre>\n<p>Once the installation is finished, we are going to add some chart repositories and ensure everything is good.</p>\n<pre class=\"shiki\" style=\"background-color: #ffffff\"><code><span class=\"line\"><span style=\"color: #24292EFF\">helm repo add stable https://charts.helm.sh/stable </span><span style=\"color: #D32F2F\">&amp;&amp;</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">helm repo add bitnami https://charts.bitnami.com/bitnami </span><span style=\"color: #D32F2F\">&amp;&amp;</span></span>\n<span class=\"line\"><span style=\"color: #24292EFF\">helm repo update</span></span></code></pre>\n<p>Once that's finished we are ready to move on to part 2!</p>\n<h3 id=\"conclusion\"><a href=\"#conclusion\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Conclusion</h3>\n<p>Well, we now have a k3s HA cluster setup. Well, that's if you do too if you used more than 1 Pi. If you used one and just follwed instructions for the first master you are ready to add more master nodes and some worker nodes. In the next part we will setup the Kubernetes Dashboard, Metallb, Cert-Manager, Rancher, and Longhorn. Once we have those up and running we can configure replicated and persistent storage, backups, and a few other fun tweaks. In Part 3 we will begin adding all of our homelab things like PiHole, UniFi Network Application, Heimdall, Squid, and tons more. They all thrive in this environment because if one worker or even one master that is hosting a pod (the thing that holds containers in kubernetes) goes down, another will pickup the task and keep your apps going! If you have any questions feel free to ask. Also, I've listed my references and resources below. Happy hacking!</p>\n<p>References:</p>\n<ul>\n<li><a href=\"https://rancher.com/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://rancher.com/</a></li>\n<li><a href=\"https://rancher.com/docs/k3s/latest\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://rancher.com/docs/k3s/latest</a></li>\n<li><a href=\"https://k3s.io/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://k3s.io/</a></li>\n<li><a href=\"https://www.raspberrypi.com/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://www.raspberrypi.com/</a></li>\n</ul>\n<p>Resources:</p>\n<ul>\n<li><a target=\"_blank\" href=\"https://www.amazon.com/gp/product/B089DGSLZW/ref=as_li_tl?ie=UTF8&camp=1789&creative=9325&creativeASIN=B089DGSLZW&linkCode=as2&tag=b34rd-20&linkId=4630dc5c191b7534758d639ec9822eba\">Raspberry Pi 4 Model B 8GB</a></li>\n<li><a target=\"_blank\" href=\"https://www.amazon.com/gp/product/B07TC2BK1X/ref=as_li_tl?ie=UTF8&camp=1789&creative=9325&creativeASIN=B07TC2BK1X&linkCode=as2&tag=b34rd-20&linkId=5a84a68eb88ed682e9fb9ecb02fe6f52\">Raspberry Pi 4 Model B 4GB</a></li>\n<li><a target=\"_blank\" href=\"https://www.amazon.com/gp/product/B07D7P4SY4/ref=as_li_tl?ie=UTF8&camp=1789&creative=9325&creativeASIN=B07D7P4SY4&linkCode=as2&tag=b34rd-20&linkId=6c7cd60c5b5aa9f2ae3d0d609508b7ea\">SAMSUNG 64GB - USB 3.1 Flash Drive</a></li>\n<li><a target=\"_blank\" href=\"https://www.amazon.com/gp/product/B082ZLDMZ6/ref=as_li_tl?ie=UTF8&camp=1789&creative=9325&creativeASIN=B082ZLDMZ6&linkCode=as2&tag=b34rd-20&linkId=e97859199ae66ec5bb0e138965b681a0\">UCTRONICS PoE HAT for Raspberry Pi 4</a></li>\n<li><a target=\"_blank\" href=\"https://www.amazon.com/gp/product/B096MKY263/ref=as_li_tl?ie=UTF8&camp=1789&creative=9325&creativeASIN=B096MKY263&linkCode=as2&tag=b34rd-20&linkId=c542aa40713691b903bff24d47643d9a\">UCTRONICS Raspberry Pi Cluster Metal Rack for 4 with silent(well, quiet) fans</a></li>\n<li><a target=\"_blank\" href=\"https://www.amazon.com/gp/product/B098B6YXBQ/ref=as_li_tl?ie=UTF8&camp=1789&creative=9325&creativeASIN=B098B6YXBQ&linkCode=as2&tag=b34rd-20&linkId=a13958c9c606992306923985b6eea252\">UCTRONICS 1U Rack with PoE Functionality for Raspberry Pi 4 Supports 1-6 Units with PoE HAT, Power Switch, and SD Card Adapter</a></li>\n<li><a target=\"_blank\" href=\"https://www.amazon.com/gp/product/B09152NSB9/ref=as_li_tl?ie=UTF8&camp=1789&creative=9325&creativeASIN=B09152NSB9&linkCode=as2&tag=b34rd-20&linkId=87faf7962096ccd54de8c9b8a9f4b7b4\">UCTRONICS 2U Rackmount for Raspberry Pi 4, 12 Mounting Plates for Pi 4 Model B</a></li>\n<li><a target=\"_blank\" href=\"https://www.amazon.com/gp/product/B00NEMGCIA/ref=as_li_tl?ie=UTF8&camp=1789&creative=9325&creativeASIN=B00NEMGCIA&linkCode=as2&tag=b34rd-20&linkId=3065851130ceec401727ce00e1eb20f8\">Noctua NF-A4x10 Fan 5V, 3-Pin, 5V Version (40x10mm, Brown)</a></li>\n<li><a target=\"_blank\" href=\"https://www.amazon.com/gp/product/B06XWN9Q99/ref=as_li_tl?ie=UTF8&camp=1789&creative=9325&creativeASIN=B06XWN9Q99&linkCode=as2&tag=b34rd-20&linkId=ebac93c449ef34ea471e3a9ba8c62e46\">SAMSUNG 32GB 95MB/s (U1) microSDHC</a></li>\n<li><a target=\"_blank\" href=\"https://www.amazon.com/gp/product/B07VYRZ23K/ref=as_li_tl?ie=UTF8&camp=1789&creative=9325&creativeASIN=B07VYRZ23K&linkCode=as2&tag=b34rd-20&linkId=035d841aeddf241541230983633c800b\">Raspberry Pi 4 Model B Aluminum Case Metal Chassis Shell Box with Onboard Cooling Fan (Black) (for Raspberry Pi 4)</a></li>\n</ul>\n","description":"k3s cluster on raspberry pis for homelab","timeToRead":11,"cover":"https://info.rancher.com/hubfs/k3s-social.png","author":{"id":"b34rd","title":"b34rd","path":"/author/b34rd/"},"tags":[{"id":"k3s","title":"k3s","path":"/tag/k3s/"},{"id":"kubernetes","title":"kubernetes","path":"/tag/kubernetes/"},{"id":"docker","title":"docker","path":"/tag/docker/"},{"id":"raspberry pi","title":"raspberry pi","path":"/tag/raspberry%20pi/"},{"id":"homelab","title":"homelab","path":"/tag/homelab/"}]}},"context":{}}